function PE(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function kE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kd={exports:{}},ol={},Gd={exports:{}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy;function zI(){if(Vy)return We;Vy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function S(F){return F===null||typeof F!="object"?null:(F=E&&F[E]||F["@@iterator"],typeof F=="function"?F:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,M={};function V(F,X,_e){this.props=F,this.context=X,this.refs=M,this.updater=_e||P}V.prototype.isReactComponent={},V.prototype.setState=function(F,X){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,X,"setState")},V.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function Q(){}Q.prototype=V.prototype;function K(F,X,_e){this.props=F,this.context=X,this.refs=M,this.updater=_e||P}var Y=K.prototype=new Q;Y.constructor=K,x(Y,V.prototype),Y.isPureReactComponent=!0;var J=Array.isArray,fe=Object.prototype.hasOwnProperty,te={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function A(F,X,_e){var Le,Pe={},je=null,Oe=null;if(X!=null)for(Le in X.ref!==void 0&&(Oe=X.ref),X.key!==void 0&&(je=""+X.key),X)fe.call(X,Le)&&!T.hasOwnProperty(Le)&&(Pe[Le]=X[Le]);var Ve=arguments.length-2;if(Ve===1)Pe.children=_e;else if(1<Ve){for(var Ze=Array(Ve),wt=0;wt<Ve;wt++)Ze[wt]=arguments[wt+2];Pe.children=Ze}if(F&&F.defaultProps)for(Le in Ve=F.defaultProps,Ve)Pe[Le]===void 0&&(Pe[Le]=Ve[Le]);return{$$typeof:n,type:F,key:je,ref:Oe,props:Pe,_owner:te.current}}function I(F,X){return{$$typeof:n,type:F.type,key:X,ref:F.ref,props:F.props,_owner:F._owner}}function C(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function D(F){var X={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(_e){return X[_e]})}var b=/\/+/g;function k(F,X){return typeof F=="object"&&F!==null&&F.key!=null?D(""+F.key):X.toString(36)}function de(F,X,_e,Le,Pe){var je=typeof F;(je==="undefined"||je==="boolean")&&(F=null);var Oe=!1;if(F===null)Oe=!0;else switch(je){case"string":case"number":Oe=!0;break;case"object":switch(F.$$typeof){case n:case e:Oe=!0}}if(Oe)return Oe=F,Pe=Pe(Oe),F=Le===""?"."+k(Oe,0):Le,J(Pe)?(_e="",F!=null&&(_e=F.replace(b,"$&/")+"/"),de(Pe,X,_e,"",function(wt){return wt})):Pe!=null&&(C(Pe)&&(Pe=I(Pe,_e+(!Pe.key||Oe&&Oe.key===Pe.key?"":(""+Pe.key).replace(b,"$&/")+"/")+F)),X.push(Pe)),1;if(Oe=0,Le=Le===""?".":Le+":",J(F))for(var Ve=0;Ve<F.length;Ve++){je=F[Ve];var Ze=Le+k(je,Ve);Oe+=de(je,X,_e,Ze,Pe)}else if(Ze=S(F),typeof Ze=="function")for(F=Ze.call(F),Ve=0;!(je=F.next()).done;)je=je.value,Ze=Le+k(je,Ve++),Oe+=de(je,X,_e,Ze,Pe);else if(je==="object")throw X=String(F),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return Oe}function Je(F,X,_e){if(F==null)return F;var Le=[],Pe=0;return de(F,Le,"","",function(je){return X.call(_e,je,Pe++)}),Le}function ft(F){if(F._status===-1){var X=F._result;X=X(),X.then(function(_e){(F._status===0||F._status===-1)&&(F._status=1,F._result=_e)},function(_e){(F._status===0||F._status===-1)&&(F._status=2,F._result=_e)}),F._status===-1&&(F._status=0,F._result=X)}if(F._status===1)return F._result.default;throw F._result}var Xe={current:null},se={transition:null},Re={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:se,ReactCurrentOwner:te};function he(){throw Error("act(...) is not supported in production builds of React.")}return We.Children={map:Je,forEach:function(F,X,_e){Je(F,function(){X.apply(this,arguments)},_e)},count:function(F){var X=0;return Je(F,function(){X++}),X},toArray:function(F){return Je(F,function(X){return X})||[]},only:function(F){if(!C(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},We.Component=V,We.Fragment=t,We.Profiler=s,We.PureComponent=K,We.StrictMode=r,We.Suspense=f,We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Re,We.act=he,We.cloneElement=function(F,X,_e){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Le=x({},F.props),Pe=F.key,je=F.ref,Oe=F._owner;if(X!=null){if(X.ref!==void 0&&(je=X.ref,Oe=te.current),X.key!==void 0&&(Pe=""+X.key),F.type&&F.type.defaultProps)var Ve=F.type.defaultProps;for(Ze in X)fe.call(X,Ze)&&!T.hasOwnProperty(Ze)&&(Le[Ze]=X[Ze]===void 0&&Ve!==void 0?Ve[Ze]:X[Ze])}var Ze=arguments.length-2;if(Ze===1)Le.children=_e;else if(1<Ze){Ve=Array(Ze);for(var wt=0;wt<Ze;wt++)Ve[wt]=arguments[wt+2];Le.children=Ve}return{$$typeof:n,type:F.type,key:Pe,ref:je,props:Le,_owner:Oe}},We.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:a,_context:F},F.Consumer=F},We.createElement=A,We.createFactory=function(F){var X=A.bind(null,F);return X.type=F,X},We.createRef=function(){return{current:null}},We.forwardRef=function(F){return{$$typeof:d,render:F}},We.isValidElement=C,We.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:ft}},We.memo=function(F,X){return{$$typeof:m,type:F,compare:X===void 0?null:X}},We.startTransition=function(F){var X=se.transition;se.transition={};try{F()}finally{se.transition=X}},We.unstable_act=he,We.useCallback=function(F,X){return Xe.current.useCallback(F,X)},We.useContext=function(F){return Xe.current.useContext(F)},We.useDebugValue=function(){},We.useDeferredValue=function(F){return Xe.current.useDeferredValue(F)},We.useEffect=function(F,X){return Xe.current.useEffect(F,X)},We.useId=function(){return Xe.current.useId()},We.useImperativeHandle=function(F,X,_e){return Xe.current.useImperativeHandle(F,X,_e)},We.useInsertionEffect=function(F,X){return Xe.current.useInsertionEffect(F,X)},We.useLayoutEffect=function(F,X){return Xe.current.useLayoutEffect(F,X)},We.useMemo=function(F,X){return Xe.current.useMemo(F,X)},We.useReducer=function(F,X,_e){return Xe.current.useReducer(F,X,_e)},We.useRef=function(F){return Xe.current.useRef(F)},We.useState=function(F){return Xe.current.useState(F)},We.useSyncExternalStore=function(F,X,_e){return Xe.current.useSyncExternalStore(F,X,_e)},We.useTransition=function(){return Xe.current.useTransition()},We.version="18.3.1",We}var Uy;function gp(){return Uy||(Uy=1,Gd.exports=zI()),Gd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy;function HI(){if(Fy)return ol;Fy=1;var n=gp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var _,E={},S=null,P=null;m!==void 0&&(S=""+m),f.key!==void 0&&(S=""+f.key),f.ref!==void 0&&(P=f.ref);for(_ in f)r.call(f,_)&&!a.hasOwnProperty(_)&&(E[_]=f[_]);if(d&&d.defaultProps)for(_ in f=d.defaultProps,f)E[_]===void 0&&(E[_]=f[_]);return{$$typeof:e,type:d,key:S,ref:P,props:E,_owner:s.current}}return ol.Fragment=t,ol.jsx=u,ol.jsxs=u,ol}var By;function WI(){return By||(By=1,Kd.exports=HI()),Kd.exports}var H=WI(),Z=gp();const qI=kE(Z),KI=PE({__proto__:null,default:qI},[Z]);var sc={},Qd={exports:{}},Un={},Yd={exports:{}},Jd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy;function GI(){return jy||(jy=1,(function(n){function e(se,Re){var he=se.length;se.push(Re);e:for(;0<he;){var F=he-1>>>1,X=se[F];if(0<s(X,Re))se[F]=Re,se[he]=X,he=F;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var Re=se[0],he=se.pop();if(he!==Re){se[0]=he;e:for(var F=0,X=se.length,_e=X>>>1;F<_e;){var Le=2*(F+1)-1,Pe=se[Le],je=Le+1,Oe=se[je];if(0>s(Pe,he))je<X&&0>s(Oe,Pe)?(se[F]=Oe,se[je]=he,F=je):(se[F]=Pe,se[Le]=he,F=Le);else if(je<X&&0>s(Oe,he))se[F]=Oe,se[je]=he,F=je;else break e}}return Re}function s(se,Re){var he=se.sortIndex-Re.sortIndex;return he!==0?he:se.id-Re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],m=[],_=1,E=null,S=3,P=!1,x=!1,M=!1,V=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(se){for(var Re=t(m);Re!==null;){if(Re.callback===null)r(m);else if(Re.startTime<=se)r(m),Re.sortIndex=Re.expirationTime,e(f,Re);else break;Re=t(m)}}function J(se){if(M=!1,Y(se),!x)if(t(f)!==null)x=!0,ft(fe);else{var Re=t(m);Re!==null&&Xe(J,Re.startTime-se)}}function fe(se,Re){x=!1,M&&(M=!1,Q(A),A=-1),P=!0;var he=S;try{for(Y(Re),E=t(f);E!==null&&(!(E.expirationTime>Re)||se&&!D());){var F=E.callback;if(typeof F=="function"){E.callback=null,S=E.priorityLevel;var X=F(E.expirationTime<=Re);Re=n.unstable_now(),typeof X=="function"?E.callback=X:E===t(f)&&r(f),Y(Re)}else r(f);E=t(f)}if(E!==null)var _e=!0;else{var Le=t(m);Le!==null&&Xe(J,Le.startTime-Re),_e=!1}return _e}finally{E=null,S=he,P=!1}}var te=!1,T=null,A=-1,I=5,C=-1;function D(){return!(n.unstable_now()-C<I)}function b(){if(T!==null){var se=n.unstable_now();C=se;var Re=!0;try{Re=T(!0,se)}finally{Re?k():(te=!1,T=null)}}else te=!1}var k;if(typeof K=="function")k=function(){K(b)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,Je=de.port2;de.port1.onmessage=b,k=function(){Je.postMessage(null)}}else k=function(){V(b,0)};function ft(se){T=se,te||(te=!0,k())}function Xe(se,Re){A=V(function(){se(n.unstable_now())},Re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){x||P||(x=!0,ft(fe))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(se){switch(S){case 1:case 2:case 3:var Re=3;break;default:Re=S}var he=S;S=Re;try{return se()}finally{S=he}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,Re){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var he=S;S=se;try{return Re()}finally{S=he}},n.unstable_scheduleCallback=function(se,Re,he){var F=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?F+he:F):he=F,se){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=he+X,se={id:_++,callback:Re,priorityLevel:se,startTime:he,expirationTime:X,sortIndex:-1},he>F?(se.sortIndex=he,e(m,se),t(f)===null&&se===t(m)&&(M?(Q(A),A=-1):M=!0,Xe(J,he-F))):(se.sortIndex=X,e(f,se),x||P||(x=!0,ft(fe))),se},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(se){var Re=S;return function(){var he=S;S=Re;try{return se.apply(this,arguments)}finally{S=he}}}})(Jd)),Jd}var $y;function QI(){return $y||($y=1,Yd.exports=GI()),Yd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zy;function YI(){if(zy)return Un;zy=1;var n=gp(),e=QI();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function S(i){return f.call(E,i)?!0:f.call(_,i)?!1:m.test(i)?E[i]=!0:(_[i]=!0,!1)}function P(i,o,l,h){if(l!==null&&l.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function x(i,o,l,h){if(o===null||typeof o>"u"||P(i,o,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function M(i,o,l,h,p,y,w){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=p,this.mustUseProperty=l,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=w}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){V[i]=new M(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];V[o]=new M(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){V[i]=new M(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){V[i]=new M(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){V[i]=new M(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){V[i]=new M(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){V[i]=new M(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){V[i]=new M(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){V[i]=new M(i,5,!1,i.toLowerCase(),null,!1,!1)});var Q=/[\-:]([a-z])/g;function K(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(Q,K);V[o]=new M(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(Q,K);V[o]=new M(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(Q,K);V[o]=new M(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){V[i]=new M(i,1,!1,i.toLowerCase(),null,!1,!1)}),V.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){V[i]=new M(i,1,!1,i.toLowerCase(),null,!0,!0)});function Y(i,o,l,h){var p=V.hasOwnProperty(o)?V[o]:null;(p!==null?p.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(x(o,l,p,h)&&(l=null),h||p===null?S(o)&&(l===null?i.removeAttribute(o):i.setAttribute(o,""+l)):p.mustUseProperty?i[p.propertyName]=l===null?p.type===3?!1:"":l:(o=p.attributeName,h=p.attributeNamespace,l===null?i.removeAttribute(o):(p=p.type,l=p===3||p===4&&l===!0?"":""+l,h?i.setAttributeNS(h,o,l):i.setAttribute(o,l))))}var J=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fe=Symbol.for("react.element"),te=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),D=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),Je=Symbol.for("react.memo"),ft=Symbol.for("react.lazy"),Xe=Symbol.for("react.offscreen"),se=Symbol.iterator;function Re(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var he=Object.assign,F;function X(i){if(F===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);F=o&&o[1]||""}return`
`+F+i}var _e=!1;function Le(i,o){if(!i||_e)return"";_e=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(q){var h=q}Reflect.construct(i,[],o)}else{try{o.call()}catch(q){h=q}i.call(o.prototype)}else{try{throw Error()}catch(q){h=q}i()}}catch(q){if(q&&h&&typeof q.stack=="string"){for(var p=q.stack.split(`
`),y=h.stack.split(`
`),w=p.length-1,N=y.length-1;1<=w&&0<=N&&p[w]!==y[N];)N--;for(;1<=w&&0<=N;w--,N--)if(p[w]!==y[N]){if(w!==1||N!==1)do if(w--,N--,0>N||p[w]!==y[N]){var L=`
`+p[w].replace(" at new "," at ");return i.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",i.displayName)),L}while(1<=w&&0<=N);break}}}finally{_e=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?X(i):""}function Pe(i){switch(i.tag){case 5:return X(i.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return i=Le(i.type,!1),i;case 11:return i=Le(i.type.render,!1),i;case 1:return i=Le(i.type,!0),i;default:return""}}function je(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case T:return"Fragment";case te:return"Portal";case I:return"Profiler";case A:return"StrictMode";case k:return"Suspense";case de:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case D:return(i.displayName||"Context")+".Consumer";case C:return(i._context.displayName||"Context")+".Provider";case b:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Je:return o=i.displayName||null,o!==null?o:je(i.type)||"Memo";case ft:o=i._payload,i=i._init;try{return je(i(o))}catch{}}return null}function Oe(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return je(o);case 8:return o===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Ve(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ze(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function wt(i){var o=Ze(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return p.call(this)},set:function(w){h=""+w,y.call(this,w)}}),Object.defineProperty(i,o,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function pr(i){i._valueTracker||(i._valueTracker=wt(i))}function Dt(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var l=o.getValue(),h="";return i&&(h=Ze(i)?i.checked?"true":"false":i.value),i=h,i!==l?(o.setValue(i),!0):!1}function En(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function xr(i,o){var l=o.checked;return he({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function xi(i,o){var l=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;l=Ve(o.value!=null?o.value:l),i._wrapperState={initialChecked:h,initialValue:l,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function $n(i,o){o=o.checked,o!=null&&Y(i,"checked",o,!1)}function Ns(i,o){$n(i,o);var l=Ve(o.value),h=o.type;if(l!=null)h==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?ii(i,o.type,l):o.hasOwnProperty("defaultValue")&&ii(i,o.type,Ve(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Io(i,o,l){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,l||o===i.value||(i.value=o),i.defaultValue=o}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function ii(i,o,l){(o!=="number"||En(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var mr=Array.isArray;function gr(i,o,l,h){if(i=i.options,o){o={};for(var p=0;p<l.length;p++)o["$"+l[p]]=!0;for(l=0;l<i.length;l++)p=o.hasOwnProperty("$"+i[l].value),i[l].selected!==p&&(i[l].selected=p),p&&h&&(i[l].defaultSelected=!0)}else{for(l=""+Ve(l),o=null,p=0;p<i.length;p++){if(i[p].value===l){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}o!==null||i[p].disabled||(o=i[p])}o!==null&&(o.selected=!0)}}function bs(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return he({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Li(i,o){var l=o.value;if(l==null){if(l=o.children,o=o.defaultValue,l!=null){if(o!=null)throw Error(t(92));if(mr(l)){if(1<l.length)throw Error(t(93));l=l[0]}o=l}o==null&&(o=""),l=o}i._wrapperState={initialValue:Ve(l)}}function Cn(i,o){var l=Ve(o.value),h=Ve(o.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),o.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),h!=null&&(i.defaultValue=""+h)}function yr(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Nt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function At(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Nt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Gt,wn=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,l,h,p){MSApp.execUnsafeLocalFunction(function(){return i(o,l,h,p)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Gt=Gt||document.createElement("div"),Gt.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Gt.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function _r(i,o){if(o){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=o;return}}i.textContent=o}var tr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},si=["Webkit","ms","Moz","O"];Object.keys(tr).forEach(function(i){si.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),tr[o]=tr[i]})});function Pn(i,o,l){return o==null||typeof o=="boolean"||o===""?"":l||typeof o!="number"||o===0||tr.hasOwnProperty(i)&&tr[i]?(""+o).trim():o+"px"}function Mi(i,o){i=i.style;for(var l in o)if(o.hasOwnProperty(l)){var h=l.indexOf("--")===0,p=Pn(l,o[l],h);l==="float"&&(l="cssFloat"),h?i.setProperty(l,p):i[l]=p}}var Vi=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ui(i,o){if(o){if(Vi[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Os(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lr=null;function vr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var oi=null,cn=null,kn=null;function Fi(i){if(i=Wa(i)){if(typeof oi!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Eu(o),oi(i.stateNode,i.type,o))}}function zn(i){cn?kn?kn.push(i):kn=[i]:cn=i}function xs(){if(cn){var i=cn,o=kn;if(kn=cn=null,Fi(i),o)for(i=0;i<o.length;i++)Fi(o[i])}}function Mr(i,o){return i(o)}function Vr(){}var Dn=!1;function Ls(i,o,l){if(Dn)return i(o,l);Dn=!0;try{return Mr(i,o,l)}finally{Dn=!1,(cn!==null||kn!==null)&&(Vr(),xs())}}function Rt(i,o){var l=i.stateNode;if(l===null)return null;var h=Eu(l);if(h===null)return null;l=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(t(231,o,typeof l));return l}var O=!1;if(d)try{var B={};Object.defineProperty(B,"passive",{get:function(){O=!0}}),window.addEventListener("test",B,B),window.removeEventListener("test",B,B)}catch{O=!1}function W(i,o,l,h,p,y,w,N,L){var q=Array.prototype.slice.call(arguments,3);try{o.apply(l,q)}catch(ie){this.onError(ie)}}var ne=!1,ce=null,Ee=!1,De=null,we={onError:function(i){ne=!0,ce=i}};function ve(i,o,l,h,p,y,w,N,L){ne=!1,ce=null,W.apply(we,arguments)}function me(i,o,l,h,p,y,w,N,L){if(ve.apply(this,arguments),ne){if(ne){var q=ce;ne=!1,ce=null}else throw Error(t(198));Ee||(Ee=!0,De=q)}}function ge(i){var o=i,l=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(l=o.return),i=o.return;while(i)}return o.tag===3?l:null}function xe(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Ue(i){if(ge(i)!==i)throw Error(t(188))}function bt(i){var o=i.alternate;if(!o){if(o=ge(i),o===null)throw Error(t(188));return o!==i?null:i}for(var l=i,h=o;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){l=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return Ue(p),i;if(y===h)return Ue(p),o;y=y.sibling}throw Error(t(188))}if(l.return!==h.return)l=p,h=y;else{for(var w=!1,N=p.child;N;){if(N===l){w=!0,l=p,h=y;break}if(N===h){w=!0,h=p,l=y;break}N=N.sibling}if(!w){for(N=y.child;N;){if(N===l){w=!0,l=y,h=p;break}if(N===h){w=!0,h=y,l=p;break}N=N.sibling}if(!w)throw Error(t(189))}}if(l.alternate!==h)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?i:o}function st(i){return i=bt(i),i!==null?He(i):null}function He(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=He(i);if(o!==null)return o;i=i.sibling}return null}var ut=e.unstable_scheduleCallback,nr=e.unstable_cancelCallback,Ur=e.unstable_shouldYield,Hn=e.unstable_requestPaint,qe=e.unstable_now,Bi=e.unstable_getCurrentPriorityLevel,Wn=e.unstable_ImmediatePriority,hn=e.unstable_UserBlockingPriority,en=e.unstable_NormalPriority,Fr=e.unstable_LowPriority,Ke=e.unstable_IdlePriority,lt=null,Ut=null;function Br(i){if(Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(lt,i,void 0,(i.current.flags&128)===128)}catch{}}var Ge=Math.clz32?Math.clz32:So,rr=Math.log,Ms=Math.LN2;function So(i){return i>>>=0,i===0?32:31-(rr(i)/Ms|0)|0}var Ao=64,Ro=4194304;function ji(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Vs(i,o){var l=i.pendingLanes;if(l===0)return 0;var h=0,p=i.suspendedLanes,y=i.pingedLanes,w=l&268435455;if(w!==0){var N=w&~p;N!==0?h=ji(N):(y&=w,y!==0&&(h=ji(y)))}else w=l&~p,w!==0?h=ji(w):y!==0&&(h=ji(y));if(h===0)return 0;if(o!==0&&o!==h&&(o&p)===0&&(p=h&-h,y=o&-o,p>=y||p===16&&(y&4194240)!==0))return o;if((h&4)!==0&&(h|=l&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)l=31-Ge(o),p=1<<l,h|=i[l],o&=~p;return h}function Ih(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ai(i,o){for(var l=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes;0<y;){var w=31-Ge(y),N=1<<w,L=p[w];L===-1?((N&l)===0||(N&h)!==0)&&(p[w]=Ih(N,o)):L<=o&&(i.expiredLanes|=N),y&=~N}}function qn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Us(){var i=Ao;return Ao<<=1,(Ao&4194240)===0&&(Ao=64),i}function $i(i){for(var o=[],l=0;31>l;l++)o.push(i);return o}function zi(i,o,l){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Ge(o),i[o]=l}function pt(i,o){var l=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<l;){var p=31-Ge(l),y=1<<p;o[p]=0,h[p]=-1,i[p]=-1,l&=~y}}function Hi(i,o){var l=i.entangledLanes|=o;for(i=i.entanglements;l;){var h=31-Ge(l),p=1<<h;p&o|i[h]&o&&(i[h]|=o),l&=~p}}var et=0;function Wi(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Zl,Co,eu,tu,nu,Da=!1,jr=[],tn=null,Er=null,wr=null,qi=new Map,ir=new Map,$r=[],Sh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ru(i,o){switch(i){case"focusin":case"focusout":tn=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":qi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ir.delete(o.pointerId)}}function Nn(i,o,l,h,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},o!==null&&(o=Wa(o),o!==null&&Co(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),i)}function Ah(i,o,l,h,p){switch(o){case"focusin":return tn=Nn(tn,i,o,l,h,p),!0;case"dragenter":return Er=Nn(Er,i,o,l,h,p),!0;case"mouseover":return wr=Nn(wr,i,o,l,h,p),!0;case"pointerover":var y=p.pointerId;return qi.set(y,Nn(qi.get(y)||null,i,o,l,h,p)),!0;case"gotpointercapture":return y=p.pointerId,ir.set(y,Nn(ir.get(y)||null,i,o,l,h,p)),!0}return!1}function iu(i){var o=zs(i.target);if(o!==null){var l=ge(o);if(l!==null){if(o=l.tag,o===13){if(o=xe(l),o!==null){i.blockedOn=o,nu(i.priority,function(){eu(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function li(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var l=Po(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);Lr=h,l.target.dispatchEvent(h),Lr=null}else return o=Wa(l),o!==null&&Co(o),i.blockedOn=l,!1;o.shift()}return!0}function Fs(i,o,l){li(i)&&l.delete(o)}function su(){Da=!1,tn!==null&&li(tn)&&(tn=null),Er!==null&&li(Er)&&(Er=null),wr!==null&&li(wr)&&(wr=null),qi.forEach(Fs),ir.forEach(Fs)}function Tr(i,o){i.blockedOn===o&&(i.blockedOn=null,Da||(Da=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,su)))}function Ir(i){function o(p){return Tr(p,i)}if(0<jr.length){Tr(jr[0],i);for(var l=1;l<jr.length;l++){var h=jr[l];h.blockedOn===i&&(h.blockedOn=null)}}for(tn!==null&&Tr(tn,i),Er!==null&&Tr(Er,i),wr!==null&&Tr(wr,i),qi.forEach(o),ir.forEach(o),l=0;l<$r.length;l++)h=$r[l],h.blockedOn===i&&(h.blockedOn=null);for(;0<$r.length&&(l=$r[0],l.blockedOn===null);)iu(l),l.blockedOn===null&&$r.shift()}var ui=J.ReactCurrentBatchConfig,Ki=!0;function Tt(i,o,l,h){var p=et,y=ui.transition;ui.transition=null;try{et=1,Na(i,o,l,h)}finally{et=p,ui.transition=y}}function Rh(i,o,l,h){var p=et,y=ui.transition;ui.transition=null;try{et=4,Na(i,o,l,h)}finally{et=p,ui.transition=y}}function Na(i,o,l,h){if(Ki){var p=Po(i,o,l,h);if(p===null)Vh(i,o,h,Bs,l),ru(i,h);else if(Ah(p,i,o,l,h))h.stopPropagation();else if(ru(i,h),o&4&&-1<Sh.indexOf(i)){for(;p!==null;){var y=Wa(p);if(y!==null&&Zl(y),y=Po(i,o,l,h),y===null&&Vh(i,o,h,Bs,l),y===p)break;p=y}p!==null&&h.stopPropagation()}else Vh(i,o,h,null,l)}}var Bs=null;function Po(i,o,l,h){if(Bs=null,i=vr(h),i=zs(i),i!==null)if(o=ge(i),o===null)i=null;else if(l=o.tag,l===13){if(i=xe(o),i!==null)return i;i=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Bs=i,null}function ba(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bi()){case Wn:return 1;case hn:return 4;case en:case Fr:return 16;case Ke:return 536870912;default:return 16}default:return 16}}var Kn=null,ko=null,bn=null;function Oa(){if(bn)return bn;var i,o=ko,l=o.length,h,p="value"in Kn?Kn.value:Kn.textContent,y=p.length;for(i=0;i<l&&o[i]===p[i];i++);var w=l-i;for(h=1;h<=w&&o[l-h]===p[y-h];h++);return bn=p.slice(i,1<h?1-h:void 0)}function Do(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function zr(){return!0}function xa(){return!1}function nn(i){function o(l,h,p,y,w){this._reactName=l,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var N in i)i.hasOwnProperty(N)&&(l=i[N],this[N]=l?l(y):y[N]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?zr:xa,this.isPropagationStopped=xa,this}return he(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=zr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=zr)},persist:function(){},isPersistent:zr}),o}var Sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},No=nn(Sr),Hr=he({},Sr,{view:0,detail:0}),Ch=nn(Hr),bo,ci,Gi,js=he({},Hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Gi&&(Gi&&i.type==="mousemove"?(bo=i.screenX-Gi.screenX,ci=i.screenY-Gi.screenY):ci=bo=0,Gi=i),bo)},movementY:function(i){return"movementY"in i?i.movementY:ci}}),Oo=nn(js),La=he({},js,{dataTransfer:0}),ou=nn(La),xo=he({},Hr,{relatedTarget:0}),Lo=nn(xo),au=he({},Sr,{animationName:0,elapsedTime:0,pseudoElement:0}),hi=nn(au),lu=he({},Sr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),uu=nn(lu),cu=he({},Sr,{data:0}),Ma=nn(cu),Mo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function du(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=hu[i])?!!o[i]:!1}function Wr(){return du}var c=he({},Hr,{key:function(i){if(i.key){var o=Mo[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Do(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Tn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wr,charCode:function(i){return i.type==="keypress"?Do(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Do(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=nn(c),v=he({},js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R=nn(v),j=he({},Hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wr}),G=nn(j),ue=he({},Sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ct=nn(ue),Ht=he({},js,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),tt=nn(Ht),Qt=[9,13,27,32],Ft=d&&"CompositionEvent"in window,sr=null;d&&"documentMode"in document&&(sr=document.documentMode);var Gn=d&&"TextEvent"in window&&!sr,$s=d&&(!Ft||sr&&8<sr&&11>=sr),Vo=" ",Nm=!1;function bm(i,o){switch(i){case"keyup":return Qt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Om(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Uo=!1;function BT(i,o){switch(i){case"compositionend":return Om(o);case"keypress":return o.which!==32?null:(Nm=!0,Vo);case"textInput":return i=o.data,i===Vo&&Nm?null:i;default:return null}}function jT(i,o){if(Uo)return i==="compositionend"||!Ft&&bm(i,o)?(i=Oa(),bn=ko=Kn=null,Uo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return $s&&o.locale!=="ko"?null:o.data;default:return null}}var $T={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xm(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!$T[i.type]:o==="textarea"}function Lm(i,o,l,h){zn(h),o=yu(o,"onChange"),0<o.length&&(l=new No("onChange","change",null,l,h),i.push({event:l,listeners:o}))}var Va=null,Ua=null;function zT(i){Zm(i,0)}function fu(i){var o=zo(i);if(Dt(o))return i}function HT(i,o){if(i==="change")return o}var Mm=!1;if(d){var Ph;if(d){var kh="oninput"in document;if(!kh){var Vm=document.createElement("div");Vm.setAttribute("oninput","return;"),kh=typeof Vm.oninput=="function"}Ph=kh}else Ph=!1;Mm=Ph&&(!document.documentMode||9<document.documentMode)}function Um(){Va&&(Va.detachEvent("onpropertychange",Fm),Ua=Va=null)}function Fm(i){if(i.propertyName==="value"&&fu(Ua)){var o=[];Lm(o,Ua,i,vr(i)),Ls(zT,o)}}function WT(i,o,l){i==="focusin"?(Um(),Va=o,Ua=l,Va.attachEvent("onpropertychange",Fm)):i==="focusout"&&Um()}function qT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return fu(Ua)}function KT(i,o){if(i==="click")return fu(o)}function GT(i,o){if(i==="input"||i==="change")return fu(o)}function QT(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Ar=typeof Object.is=="function"?Object.is:QT;function Fa(i,o){if(Ar(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var l=Object.keys(i),h=Object.keys(o);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var p=l[h];if(!f.call(o,p)||!Ar(i[p],o[p]))return!1}return!0}function Bm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function jm(i,o){var l=Bm(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=o&&h>=o)return{node:l,offset:o-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Bm(l)}}function $m(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?$m(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function zm(){for(var i=window,o=En();o instanceof i.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)i=o.contentWindow;else break;o=En(i.document)}return o}function Dh(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function YT(i){var o=zm(),l=i.focusedElem,h=i.selectionRange;if(o!==l&&l&&l.ownerDocument&&$m(l.ownerDocument.documentElement,l)){if(h!==null&&Dh(l)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in l)l.selectionStart=o,l.selectionEnd=Math.min(i,l.value.length);else if(i=(o=l.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var p=l.textContent.length,y=Math.min(h.start,p);h=h.end===void 0?y:Math.min(h.end,p),!i.extend&&y>h&&(p=h,h=y,y=p),p=jm(l,y);var w=jm(l,h);p&&w&&(i.rangeCount!==1||i.anchorNode!==p.node||i.anchorOffset!==p.offset||i.focusNode!==w.node||i.focusOffset!==w.offset)&&(o=o.createRange(),o.setStart(p.node,p.offset),i.removeAllRanges(),y>h?(i.addRange(o),i.extend(w.node,w.offset)):(o.setEnd(w.node,w.offset),i.addRange(o)))}}for(o=[],i=l;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<o.length;l++)i=o[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var JT=d&&"documentMode"in document&&11>=document.documentMode,Fo=null,Nh=null,Ba=null,bh=!1;function Hm(i,o,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;bh||Fo==null||Fo!==En(h)||(h=Fo,"selectionStart"in h&&Dh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ba&&Fa(Ba,h)||(Ba=h,h=yu(Nh,"onSelect"),0<h.length&&(o=new No("onSelect","select",null,o,l),i.push({event:o,listeners:h}),o.target=Fo)))}function pu(i,o){var l={};return l[i.toLowerCase()]=o.toLowerCase(),l["Webkit"+i]="webkit"+o,l["Moz"+i]="moz"+o,l}var Bo={animationend:pu("Animation","AnimationEnd"),animationiteration:pu("Animation","AnimationIteration"),animationstart:pu("Animation","AnimationStart"),transitionend:pu("Transition","TransitionEnd")},Oh={},Wm={};d&&(Wm=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function mu(i){if(Oh[i])return Oh[i];if(!Bo[i])return i;var o=Bo[i],l;for(l in o)if(o.hasOwnProperty(l)&&l in Wm)return Oh[i]=o[l];return i}var qm=mu("animationend"),Km=mu("animationiteration"),Gm=mu("animationstart"),Qm=mu("transitionend"),Ym=new Map,Jm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qi(i,o){Ym.set(i,o),a(o,[i])}for(var xh=0;xh<Jm.length;xh++){var Lh=Jm[xh],XT=Lh.toLowerCase(),ZT=Lh[0].toUpperCase()+Lh.slice(1);Qi(XT,"on"+ZT)}Qi(qm,"onAnimationEnd"),Qi(Km,"onAnimationIteration"),Qi(Gm,"onAnimationStart"),Qi("dblclick","onDoubleClick"),Qi("focusin","onFocus"),Qi("focusout","onBlur"),Qi(Qm,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eI=new Set("cancel close invalid load scroll toggle".split(" ").concat(ja));function Xm(i,o,l){var h=i.type||"unknown-event";i.currentTarget=l,me(h,o,void 0,i),i.currentTarget=null}function Zm(i,o){o=(o&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],p=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var w=h.length-1;0<=w;w--){var N=h[w],L=N.instance,q=N.currentTarget;if(N=N.listener,L!==y&&p.isPropagationStopped())break e;Xm(p,N,q),y=L}else for(w=0;w<h.length;w++){if(N=h[w],L=N.instance,q=N.currentTarget,N=N.listener,L!==y&&p.isPropagationStopped())break e;Xm(p,N,q),y=L}}}if(Ee)throw i=De,Ee=!1,De=null,i}function yt(i,o){var l=o[zh];l===void 0&&(l=o[zh]=new Set);var h=i+"__bubble";l.has(h)||(eg(o,i,2,!1),l.add(h))}function Mh(i,o,l){var h=0;o&&(h|=4),eg(l,i,h,o)}var gu="_reactListening"+Math.random().toString(36).slice(2);function $a(i){if(!i[gu]){i[gu]=!0,r.forEach(function(l){l!=="selectionchange"&&(eI.has(l)||Mh(l,!1,i),Mh(l,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[gu]||(o[gu]=!0,Mh("selectionchange",!1,o))}}function eg(i,o,l,h){switch(ba(o)){case 1:var p=Tt;break;case 4:p=Rh;break;default:p=Na}l=p.bind(null,o,l,i),p=void 0,!O||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(o,l,{capture:!0,passive:p}):i.addEventListener(o,l,!0):p!==void 0?i.addEventListener(o,l,{passive:p}):i.addEventListener(o,l,!1)}function Vh(i,o,l,h,p){var y=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var N=h.stateNode.containerInfo;if(N===p||N.nodeType===8&&N.parentNode===p)break;if(w===4)for(w=h.return;w!==null;){var L=w.tag;if((L===3||L===4)&&(L=w.stateNode.containerInfo,L===p||L.nodeType===8&&L.parentNode===p))return;w=w.return}for(;N!==null;){if(w=zs(N),w===null)return;if(L=w.tag,L===5||L===6){h=y=w;continue e}N=N.parentNode}}h=h.return}Ls(function(){var q=y,ie=vr(l),ae=[];e:{var re=Ym.get(i);if(re!==void 0){var pe=No,Ie=i;switch(i){case"keypress":if(Do(l)===0)break e;case"keydown":case"keyup":pe=g;break;case"focusin":Ie="focus",pe=Lo;break;case"focusout":Ie="blur",pe=Lo;break;case"beforeblur":case"afterblur":pe=Lo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=Oo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=ou;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=G;break;case qm:case Km:case Gm:pe=hi;break;case Qm:pe=ct;break;case"scroll":pe=Ch;break;case"wheel":pe=tt;break;case"copy":case"cut":case"paste":pe=uu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=R}var Se=(o&4)!==0,Mt=!Se&&i==="scroll",$=Se?re!==null?re+"Capture":null:re;Se=[];for(var U=q,z;U!==null;){z=U;var le=z.stateNode;if(z.tag===5&&le!==null&&(z=le,$!==null&&(le=Rt(U,$),le!=null&&Se.push(za(U,le,z)))),Mt)break;U=U.return}0<Se.length&&(re=new pe(re,Ie,null,l,ie),ae.push({event:re,listeners:Se}))}}if((o&7)===0){e:{if(re=i==="mouseover"||i==="pointerover",pe=i==="mouseout"||i==="pointerout",re&&l!==Lr&&(Ie=l.relatedTarget||l.fromElement)&&(zs(Ie)||Ie[di]))break e;if((pe||re)&&(re=ie.window===ie?ie:(re=ie.ownerDocument)?re.defaultView||re.parentWindow:window,pe?(Ie=l.relatedTarget||l.toElement,pe=q,Ie=Ie?zs(Ie):null,Ie!==null&&(Mt=ge(Ie),Ie!==Mt||Ie.tag!==5&&Ie.tag!==6)&&(Ie=null)):(pe=null,Ie=q),pe!==Ie)){if(Se=Oo,le="onMouseLeave",$="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(Se=R,le="onPointerLeave",$="onPointerEnter",U="pointer"),Mt=pe==null?re:zo(pe),z=Ie==null?re:zo(Ie),re=new Se(le,U+"leave",pe,l,ie),re.target=Mt,re.relatedTarget=z,le=null,zs(ie)===q&&(Se=new Se($,U+"enter",Ie,l,ie),Se.target=z,Se.relatedTarget=Mt,le=Se),Mt=le,pe&&Ie)t:{for(Se=pe,$=Ie,U=0,z=Se;z;z=jo(z))U++;for(z=0,le=$;le;le=jo(le))z++;for(;0<U-z;)Se=jo(Se),U--;for(;0<z-U;)$=jo($),z--;for(;U--;){if(Se===$||$!==null&&Se===$.alternate)break t;Se=jo(Se),$=jo($)}Se=null}else Se=null;pe!==null&&tg(ae,re,pe,Se,!1),Ie!==null&&Mt!==null&&tg(ae,Mt,Ie,Se,!0)}}e:{if(re=q?zo(q):window,pe=re.nodeName&&re.nodeName.toLowerCase(),pe==="select"||pe==="input"&&re.type==="file")var Ce=HT;else if(xm(re))if(Mm)Ce=GT;else{Ce=qT;var Ne=WT}else(pe=re.nodeName)&&pe.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(Ce=KT);if(Ce&&(Ce=Ce(i,q))){Lm(ae,Ce,l,ie);break e}Ne&&Ne(i,re,q),i==="focusout"&&(Ne=re._wrapperState)&&Ne.controlled&&re.type==="number"&&ii(re,"number",re.value)}switch(Ne=q?zo(q):window,i){case"focusin":(xm(Ne)||Ne.contentEditable==="true")&&(Fo=Ne,Nh=q,Ba=null);break;case"focusout":Ba=Nh=Fo=null;break;case"mousedown":bh=!0;break;case"contextmenu":case"mouseup":case"dragend":bh=!1,Hm(ae,l,ie);break;case"selectionchange":if(JT)break;case"keydown":case"keyup":Hm(ae,l,ie)}var be;if(Ft)e:{switch(i){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Uo?bm(i,l)&&(Me="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Me="onCompositionStart");Me&&($s&&l.locale!=="ko"&&(Uo||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Uo&&(be=Oa()):(Kn=ie,ko="value"in Kn?Kn.value:Kn.textContent,Uo=!0)),Ne=yu(q,Me),0<Ne.length&&(Me=new Ma(Me,i,null,l,ie),ae.push({event:Me,listeners:Ne}),be?Me.data=be:(be=Om(l),be!==null&&(Me.data=be)))),(be=Gn?BT(i,l):jT(i,l))&&(q=yu(q,"onBeforeInput"),0<q.length&&(ie=new Ma("onBeforeInput","beforeinput",null,l,ie),ae.push({event:ie,listeners:q}),ie.data=be))}Zm(ae,o)})}function za(i,o,l){return{instance:i,listener:o,currentTarget:l}}function yu(i,o){for(var l=o+"Capture",h=[];i!==null;){var p=i,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=Rt(i,l),y!=null&&h.unshift(za(i,y,p)),y=Rt(i,o),y!=null&&h.push(za(i,y,p))),i=i.return}return h}function jo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function tg(i,o,l,h,p){for(var y=o._reactName,w=[];l!==null&&l!==h;){var N=l,L=N.alternate,q=N.stateNode;if(L!==null&&L===h)break;N.tag===5&&q!==null&&(N=q,p?(L=Rt(l,y),L!=null&&w.unshift(za(l,L,N))):p||(L=Rt(l,y),L!=null&&w.push(za(l,L,N)))),l=l.return}w.length!==0&&i.push({event:o,listeners:w})}var tI=/\r\n?/g,nI=/\u0000|\uFFFD/g;function ng(i){return(typeof i=="string"?i:""+i).replace(tI,`
`).replace(nI,"")}function _u(i,o,l){if(o=ng(o),ng(i)!==o&&l)throw Error(t(425))}function vu(){}var Uh=null,Fh=null;function Bh(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var jh=typeof setTimeout=="function"?setTimeout:void 0,rI=typeof clearTimeout=="function"?clearTimeout:void 0,rg=typeof Promise=="function"?Promise:void 0,iI=typeof queueMicrotask=="function"?queueMicrotask:typeof rg<"u"?function(i){return rg.resolve(null).then(i).catch(sI)}:jh;function sI(i){setTimeout(function(){throw i})}function $h(i,o){var l=o,h=0;do{var p=l.nextSibling;if(i.removeChild(l),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(h===0){i.removeChild(p),Ir(o);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=p}while(l);Ir(o)}function Yi(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function ig(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(o===0)return i;o--}else l==="/$"&&o++}i=i.previousSibling}return null}var $o=Math.random().toString(36).slice(2),qr="__reactFiber$"+$o,Ha="__reactProps$"+$o,di="__reactContainer$"+$o,zh="__reactEvents$"+$o,oI="__reactListeners$"+$o,aI="__reactHandles$"+$o;function zs(i){var o=i[qr];if(o)return o;for(var l=i.parentNode;l;){if(o=l[di]||l[qr]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(i=ig(i);i!==null;){if(l=i[qr])return l;i=ig(i)}return o}i=l,l=i.parentNode}return null}function Wa(i){return i=i[qr]||i[di],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function zo(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Eu(i){return i[Ha]||null}var Hh=[],Ho=-1;function Ji(i){return{current:i}}function _t(i){0>Ho||(i.current=Hh[Ho],Hh[Ho]=null,Ho--)}function gt(i,o){Ho++,Hh[Ho]=i.current,i.current=o}var Xi={},dn=Ji(Xi),On=Ji(!1),Hs=Xi;function Wo(i,o){var l=i.type.contextTypes;if(!l)return Xi;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in l)p[y]=o[y];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=p),p}function xn(i){return i=i.childContextTypes,i!=null}function wu(){_t(On),_t(dn)}function sg(i,o,l){if(dn.current!==Xi)throw Error(t(168));gt(dn,o),gt(On,l)}function og(i,o,l){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var p in h)if(!(p in o))throw Error(t(108,Oe(i)||"Unknown",p));return he({},l,h)}function Tu(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Xi,Hs=dn.current,gt(dn,i),gt(On,On.current),!0}function ag(i,o,l){var h=i.stateNode;if(!h)throw Error(t(169));l?(i=og(i,o,Hs),h.__reactInternalMemoizedMergedChildContext=i,_t(On),_t(dn),gt(dn,i)):_t(On),gt(On,l)}var fi=null,Iu=!1,Wh=!1;function lg(i){fi===null?fi=[i]:fi.push(i)}function lI(i){Iu=!0,lg(i)}function Zi(){if(!Wh&&fi!==null){Wh=!0;var i=0,o=et;try{var l=fi;for(et=1;i<l.length;i++){var h=l[i];do h=h(!0);while(h!==null)}fi=null,Iu=!1}catch(p){throw fi!==null&&(fi=fi.slice(i+1)),ut(Wn,Zi),p}finally{et=o,Wh=!1}}return null}var qo=[],Ko=0,Su=null,Au=0,or=[],ar=0,Ws=null,pi=1,mi="";function qs(i,o){qo[Ko++]=Au,qo[Ko++]=Su,Su=i,Au=o}function ug(i,o,l){or[ar++]=pi,or[ar++]=mi,or[ar++]=Ws,Ws=i;var h=pi;i=mi;var p=32-Ge(h)-1;h&=~(1<<p),l+=1;var y=32-Ge(o)+p;if(30<y){var w=p-p%5;y=(h&(1<<w)-1).toString(32),h>>=w,p-=w,pi=1<<32-Ge(o)+p|l<<p|h,mi=y+i}else pi=1<<y|l<<p|h,mi=i}function qh(i){i.return!==null&&(qs(i,1),ug(i,1,0))}function Kh(i){for(;i===Su;)Su=qo[--Ko],qo[Ko]=null,Au=qo[--Ko],qo[Ko]=null;for(;i===Ws;)Ws=or[--ar],or[ar]=null,mi=or[--ar],or[ar]=null,pi=or[--ar],or[ar]=null}var Qn=null,Yn=null,It=!1,Rr=null;function cg(i,o){var l=hr(5,null,null,0);l.elementType="DELETED",l.stateNode=o,l.return=i,o=i.deletions,o===null?(i.deletions=[l],i.flags|=16):o.push(l)}function hg(i,o){switch(i.tag){case 5:var l=i.type;return o=o.nodeType!==1||l.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Qn=i,Yn=Yi(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Qn=i,Yn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(l=Ws!==null?{id:pi,overflow:mi}:null,i.memoizedState={dehydrated:o,treeContext:l,retryLane:1073741824},l=hr(18,null,null,0),l.stateNode=o,l.return=i,i.child=l,Qn=i,Yn=null,!0):!1;default:return!1}}function Gh(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Qh(i){if(It){var o=Yn;if(o){var l=o;if(!hg(i,o)){if(Gh(i))throw Error(t(418));o=Yi(l.nextSibling);var h=Qn;o&&hg(i,o)?cg(h,l):(i.flags=i.flags&-4097|2,It=!1,Qn=i)}}else{if(Gh(i))throw Error(t(418));i.flags=i.flags&-4097|2,It=!1,Qn=i}}}function dg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Qn=i}function Ru(i){if(i!==Qn)return!1;if(!It)return dg(i),It=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Bh(i.type,i.memoizedProps)),o&&(o=Yn)){if(Gh(i))throw fg(),Error(t(418));for(;o;)cg(i,o),o=Yi(o.nextSibling)}if(dg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(o===0){Yn=Yi(i.nextSibling);break e}o--}else l!=="$"&&l!=="$!"&&l!=="$?"||o++}i=i.nextSibling}Yn=null}}else Yn=Qn?Yi(i.stateNode.nextSibling):null;return!0}function fg(){for(var i=Yn;i;)i=Yi(i.nextSibling)}function Go(){Yn=Qn=null,It=!1}function Yh(i){Rr===null?Rr=[i]:Rr.push(i)}var uI=J.ReactCurrentBatchConfig;function qa(i,o,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var h=l.stateNode}if(!h)throw Error(t(147,i));var p=h,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(w){var N=p.refs;w===null?delete N[y]:N[y]=w},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,i))}return i}function Cu(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function pg(i){var o=i._init;return o(i._payload)}function mg(i){function o($,U){if(i){var z=$.deletions;z===null?($.deletions=[U],$.flags|=16):z.push(U)}}function l($,U){if(!i)return null;for(;U!==null;)o($,U),U=U.sibling;return null}function h($,U){for($=new Map;U!==null;)U.key!==null?$.set(U.key,U):$.set(U.index,U),U=U.sibling;return $}function p($,U){return $=as($,U),$.index=0,$.sibling=null,$}function y($,U,z){return $.index=z,i?(z=$.alternate,z!==null?(z=z.index,z<U?($.flags|=2,U):z):($.flags|=2,U)):($.flags|=1048576,U)}function w($){return i&&$.alternate===null&&($.flags|=2),$}function N($,U,z,le){return U===null||U.tag!==6?(U=jd(z,$.mode,le),U.return=$,U):(U=p(U,z),U.return=$,U)}function L($,U,z,le){var Ce=z.type;return Ce===T?ie($,U,z.props.children,le,z.key):U!==null&&(U.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===ft&&pg(Ce)===U.type)?(le=p(U,z.props),le.ref=qa($,U,z),le.return=$,le):(le=Ju(z.type,z.key,z.props,null,$.mode,le),le.ref=qa($,U,z),le.return=$,le)}function q($,U,z,le){return U===null||U.tag!==4||U.stateNode.containerInfo!==z.containerInfo||U.stateNode.implementation!==z.implementation?(U=$d(z,$.mode,le),U.return=$,U):(U=p(U,z.children||[]),U.return=$,U)}function ie($,U,z,le,Ce){return U===null||U.tag!==7?(U=eo(z,$.mode,le,Ce),U.return=$,U):(U=p(U,z),U.return=$,U)}function ae($,U,z){if(typeof U=="string"&&U!==""||typeof U=="number")return U=jd(""+U,$.mode,z),U.return=$,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case fe:return z=Ju(U.type,U.key,U.props,null,$.mode,z),z.ref=qa($,null,U),z.return=$,z;case te:return U=$d(U,$.mode,z),U.return=$,U;case ft:var le=U._init;return ae($,le(U._payload),z)}if(mr(U)||Re(U))return U=eo(U,$.mode,z,null),U.return=$,U;Cu($,U)}return null}function re($,U,z,le){var Ce=U!==null?U.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return Ce!==null?null:N($,U,""+z,le);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case fe:return z.key===Ce?L($,U,z,le):null;case te:return z.key===Ce?q($,U,z,le):null;case ft:return Ce=z._init,re($,U,Ce(z._payload),le)}if(mr(z)||Re(z))return Ce!==null?null:ie($,U,z,le,null);Cu($,z)}return null}function pe($,U,z,le,Ce){if(typeof le=="string"&&le!==""||typeof le=="number")return $=$.get(z)||null,N(U,$,""+le,Ce);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case fe:return $=$.get(le.key===null?z:le.key)||null,L(U,$,le,Ce);case te:return $=$.get(le.key===null?z:le.key)||null,q(U,$,le,Ce);case ft:var Ne=le._init;return pe($,U,z,Ne(le._payload),Ce)}if(mr(le)||Re(le))return $=$.get(z)||null,ie(U,$,le,Ce,null);Cu(U,le)}return null}function Ie($,U,z,le){for(var Ce=null,Ne=null,be=U,Me=U=0,Xt=null;be!==null&&Me<z.length;Me++){be.index>Me?(Xt=be,be=null):Xt=be.sibling;var ot=re($,be,z[Me],le);if(ot===null){be===null&&(be=Xt);break}i&&be&&ot.alternate===null&&o($,be),U=y(ot,U,Me),Ne===null?Ce=ot:Ne.sibling=ot,Ne=ot,be=Xt}if(Me===z.length)return l($,be),It&&qs($,Me),Ce;if(be===null){for(;Me<z.length;Me++)be=ae($,z[Me],le),be!==null&&(U=y(be,U,Me),Ne===null?Ce=be:Ne.sibling=be,Ne=be);return It&&qs($,Me),Ce}for(be=h($,be);Me<z.length;Me++)Xt=pe(be,$,Me,z[Me],le),Xt!==null&&(i&&Xt.alternate!==null&&be.delete(Xt.key===null?Me:Xt.key),U=y(Xt,U,Me),Ne===null?Ce=Xt:Ne.sibling=Xt,Ne=Xt);return i&&be.forEach(function(ls){return o($,ls)}),It&&qs($,Me),Ce}function Se($,U,z,le){var Ce=Re(z);if(typeof Ce!="function")throw Error(t(150));if(z=Ce.call(z),z==null)throw Error(t(151));for(var Ne=Ce=null,be=U,Me=U=0,Xt=null,ot=z.next();be!==null&&!ot.done;Me++,ot=z.next()){be.index>Me?(Xt=be,be=null):Xt=be.sibling;var ls=re($,be,ot.value,le);if(ls===null){be===null&&(be=Xt);break}i&&be&&ls.alternate===null&&o($,be),U=y(ls,U,Me),Ne===null?Ce=ls:Ne.sibling=ls,Ne=ls,be=Xt}if(ot.done)return l($,be),It&&qs($,Me),Ce;if(be===null){for(;!ot.done;Me++,ot=z.next())ot=ae($,ot.value,le),ot!==null&&(U=y(ot,U,Me),Ne===null?Ce=ot:Ne.sibling=ot,Ne=ot);return It&&qs($,Me),Ce}for(be=h($,be);!ot.done;Me++,ot=z.next())ot=pe(be,$,Me,ot.value,le),ot!==null&&(i&&ot.alternate!==null&&be.delete(ot.key===null?Me:ot.key),U=y(ot,U,Me),Ne===null?Ce=ot:Ne.sibling=ot,Ne=ot);return i&&be.forEach(function($I){return o($,$I)}),It&&qs($,Me),Ce}function Mt($,U,z,le){if(typeof z=="object"&&z!==null&&z.type===T&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case fe:e:{for(var Ce=z.key,Ne=U;Ne!==null;){if(Ne.key===Ce){if(Ce=z.type,Ce===T){if(Ne.tag===7){l($,Ne.sibling),U=p(Ne,z.props.children),U.return=$,$=U;break e}}else if(Ne.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===ft&&pg(Ce)===Ne.type){l($,Ne.sibling),U=p(Ne,z.props),U.ref=qa($,Ne,z),U.return=$,$=U;break e}l($,Ne);break}else o($,Ne);Ne=Ne.sibling}z.type===T?(U=eo(z.props.children,$.mode,le,z.key),U.return=$,$=U):(le=Ju(z.type,z.key,z.props,null,$.mode,le),le.ref=qa($,U,z),le.return=$,$=le)}return w($);case te:e:{for(Ne=z.key;U!==null;){if(U.key===Ne)if(U.tag===4&&U.stateNode.containerInfo===z.containerInfo&&U.stateNode.implementation===z.implementation){l($,U.sibling),U=p(U,z.children||[]),U.return=$,$=U;break e}else{l($,U);break}else o($,U);U=U.sibling}U=$d(z,$.mode,le),U.return=$,$=U}return w($);case ft:return Ne=z._init,Mt($,U,Ne(z._payload),le)}if(mr(z))return Ie($,U,z,le);if(Re(z))return Se($,U,z,le);Cu($,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,U!==null&&U.tag===6?(l($,U.sibling),U=p(U,z),U.return=$,$=U):(l($,U),U=jd(z,$.mode,le),U.return=$,$=U),w($)):l($,U)}return Mt}var Qo=mg(!0),gg=mg(!1),Pu=Ji(null),ku=null,Yo=null,Jh=null;function Xh(){Jh=Yo=ku=null}function Zh(i){var o=Pu.current;_t(Pu),i._currentValue=o}function ed(i,o,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===l)break;i=i.return}}function Jo(i,o){ku=i,Jh=Yo=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(Ln=!0),i.firstContext=null)}function lr(i){var o=i._currentValue;if(Jh!==i)if(i={context:i,memoizedValue:o,next:null},Yo===null){if(ku===null)throw Error(t(308));Yo=i,ku.dependencies={lanes:0,firstContext:i}}else Yo=Yo.next=i;return o}var Ks=null;function td(i){Ks===null?Ks=[i]:Ks.push(i)}function yg(i,o,l,h){var p=o.interleaved;return p===null?(l.next=l,td(o)):(l.next=p.next,p.next=l),o.interleaved=l,gi(i,h)}function gi(i,o){i.lanes|=o;var l=i.alternate;for(l!==null&&(l.lanes|=o),l=i,i=i.return;i!==null;)i.childLanes|=o,l=i.alternate,l!==null&&(l.childLanes|=o),l=i,i=i.return;return l.tag===3?l.stateNode:null}var es=!1;function nd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _g(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function yi(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function ts(i,o,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(rt&2)!==0){var p=h.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),h.pending=o,gi(i,l)}return p=h.interleaved,p===null?(o.next=o,td(h)):(o.next=p.next,p.next=o),h.interleaved=o,gi(i,l)}function Du(i,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,Hi(i,l)}}function vg(i,o){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var w={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?p=y=w:y=y.next=w,l=l.next}while(l!==null);y===null?p=y=o:y=y.next=o}else p=y=o;l={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,effects:h.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=o:i.next=o,l.lastBaseUpdate=o}function Nu(i,o,l,h){var p=i.updateQueue;es=!1;var y=p.firstBaseUpdate,w=p.lastBaseUpdate,N=p.shared.pending;if(N!==null){p.shared.pending=null;var L=N,q=L.next;L.next=null,w===null?y=q:w.next=q,w=L;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,N=ie.lastBaseUpdate,N!==w&&(N===null?ie.firstBaseUpdate=q:N.next=q,ie.lastBaseUpdate=L))}if(y!==null){var ae=p.baseState;w=0,ie=q=L=null,N=y;do{var re=N.lane,pe=N.eventTime;if((h&re)===re){ie!==null&&(ie=ie.next={eventTime:pe,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var Ie=i,Se=N;switch(re=o,pe=l,Se.tag){case 1:if(Ie=Se.payload,typeof Ie=="function"){ae=Ie.call(pe,ae,re);break e}ae=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Se.payload,re=typeof Ie=="function"?Ie.call(pe,ae,re):Ie,re==null)break e;ae=he({},ae,re);break e;case 2:es=!0}}N.callback!==null&&N.lane!==0&&(i.flags|=64,re=p.effects,re===null?p.effects=[N]:re.push(N))}else pe={eventTime:pe,lane:re,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ie===null?(q=ie=pe,L=ae):ie=ie.next=pe,w|=re;if(N=N.next,N===null){if(N=p.shared.pending,N===null)break;re=N,N=re.next,re.next=null,p.lastBaseUpdate=re,p.shared.pending=null}}while(!0);if(ie===null&&(L=ae),p.baseState=L,p.firstBaseUpdate=q,p.lastBaseUpdate=ie,o=p.shared.interleaved,o!==null){p=o;do w|=p.lane,p=p.next;while(p!==o)}else y===null&&(p.shared.lanes=0);Ys|=w,i.lanes=w,i.memoizedState=ae}}function Eg(i,o,l){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],p=h.callback;if(p!==null){if(h.callback=null,h=l,typeof p!="function")throw Error(t(191,p));p.call(h)}}}var Ka={},Kr=Ji(Ka),Ga=Ji(Ka),Qa=Ji(Ka);function Gs(i){if(i===Ka)throw Error(t(174));return i}function rd(i,o){switch(gt(Qa,o),gt(Ga,i),gt(Kr,Ka),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:At(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=At(o,i)}_t(Kr),gt(Kr,o)}function Xo(){_t(Kr),_t(Ga),_t(Qa)}function wg(i){Gs(Qa.current);var o=Gs(Kr.current),l=At(o,i.type);o!==l&&(gt(Ga,i),gt(Kr,l))}function id(i){Ga.current===i&&(_t(Kr),_t(Ga))}var Ct=Ji(0);function bu(i){for(var o=i;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var sd=[];function od(){for(var i=0;i<sd.length;i++)sd[i]._workInProgressVersionPrimary=null;sd.length=0}var Ou=J.ReactCurrentDispatcher,ad=J.ReactCurrentBatchConfig,Qs=0,Pt=null,Wt=null,Yt=null,xu=!1,Ya=!1,Ja=0,cI=0;function fn(){throw Error(t(321))}function ld(i,o){if(o===null)return!1;for(var l=0;l<o.length&&l<i.length;l++)if(!Ar(i[l],o[l]))return!1;return!0}function ud(i,o,l,h,p,y){if(Qs=y,Pt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ou.current=i===null||i.memoizedState===null?pI:mI,i=l(h,p),Ya){y=0;do{if(Ya=!1,Ja=0,25<=y)throw Error(t(301));y+=1,Yt=Wt=null,o.updateQueue=null,Ou.current=gI,i=l(h,p)}while(Ya)}if(Ou.current=Vu,o=Wt!==null&&Wt.next!==null,Qs=0,Yt=Wt=Pt=null,xu=!1,o)throw Error(t(300));return i}function cd(){var i=Ja!==0;return Ja=0,i}function Gr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Pt.memoizedState=Yt=i:Yt=Yt.next=i,Yt}function ur(){if(Wt===null){var i=Pt.alternate;i=i!==null?i.memoizedState:null}else i=Wt.next;var o=Yt===null?Pt.memoizedState:Yt.next;if(o!==null)Yt=o,Wt=i;else{if(i===null)throw Error(t(310));Wt=i,i={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Yt===null?Pt.memoizedState=Yt=i:Yt=Yt.next=i}return Yt}function Xa(i,o){return typeof o=="function"?o(i):o}function hd(i){var o=ur(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=Wt,p=h.baseQueue,y=l.pending;if(y!==null){if(p!==null){var w=p.next;p.next=y.next,y.next=w}h.baseQueue=p=y,l.pending=null}if(p!==null){y=p.next,h=h.baseState;var N=w=null,L=null,q=y;do{var ie=q.lane;if((Qs&ie)===ie)L!==null&&(L=L.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),h=q.hasEagerState?q.eagerState:i(h,q.action);else{var ae={lane:ie,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};L===null?(N=L=ae,w=h):L=L.next=ae,Pt.lanes|=ie,Ys|=ie}q=q.next}while(q!==null&&q!==y);L===null?w=h:L.next=N,Ar(h,o.memoizedState)||(Ln=!0),o.memoizedState=h,o.baseState=w,o.baseQueue=L,l.lastRenderedState=h}if(i=l.interleaved,i!==null){p=i;do y=p.lane,Pt.lanes|=y,Ys|=y,p=p.next;while(p!==i)}else p===null&&(l.lanes=0);return[o.memoizedState,l.dispatch]}function dd(i){var o=ur(),l=o.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=i;var h=l.dispatch,p=l.pending,y=o.memoizedState;if(p!==null){l.pending=null;var w=p=p.next;do y=i(y,w.action),w=w.next;while(w!==p);Ar(y,o.memoizedState)||(Ln=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,h]}function Tg(){}function Ig(i,o){var l=Pt,h=ur(),p=o(),y=!Ar(h.memoizedState,p);if(y&&(h.memoizedState=p,Ln=!0),h=h.queue,fd(Rg.bind(null,l,h,i),[i]),h.getSnapshot!==o||y||Yt!==null&&Yt.memoizedState.tag&1){if(l.flags|=2048,Za(9,Ag.bind(null,l,h,p,o),void 0,null),Jt===null)throw Error(t(349));(Qs&30)!==0||Sg(l,o,p)}return p}function Sg(i,o,l){i.flags|=16384,i={getSnapshot:o,value:l},o=Pt.updateQueue,o===null?(o={lastEffect:null,stores:null},Pt.updateQueue=o,o.stores=[i]):(l=o.stores,l===null?o.stores=[i]:l.push(i))}function Ag(i,o,l,h){o.value=l,o.getSnapshot=h,Cg(o)&&Pg(i)}function Rg(i,o,l){return l(function(){Cg(o)&&Pg(i)})}function Cg(i){var o=i.getSnapshot;i=i.value;try{var l=o();return!Ar(i,l)}catch{return!0}}function Pg(i){var o=gi(i,1);o!==null&&Dr(o,i,1,-1)}function kg(i){var o=Gr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:i},o.queue=i,i=i.dispatch=fI.bind(null,Pt,i),[o.memoizedState,i]}function Za(i,o,l,h){return i={tag:i,create:o,destroy:l,deps:h,next:null},o=Pt.updateQueue,o===null?(o={lastEffect:null,stores:null},Pt.updateQueue=o,o.lastEffect=i.next=i):(l=o.lastEffect,l===null?o.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,o.lastEffect=i)),i}function Dg(){return ur().memoizedState}function Lu(i,o,l,h){var p=Gr();Pt.flags|=i,p.memoizedState=Za(1|o,l,void 0,h===void 0?null:h)}function Mu(i,o,l,h){var p=ur();h=h===void 0?null:h;var y=void 0;if(Wt!==null){var w=Wt.memoizedState;if(y=w.destroy,h!==null&&ld(h,w.deps)){p.memoizedState=Za(o,l,y,h);return}}Pt.flags|=i,p.memoizedState=Za(1|o,l,y,h)}function Ng(i,o){return Lu(8390656,8,i,o)}function fd(i,o){return Mu(2048,8,i,o)}function bg(i,o){return Mu(4,2,i,o)}function Og(i,o){return Mu(4,4,i,o)}function xg(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Lg(i,o,l){return l=l!=null?l.concat([i]):null,Mu(4,4,xg.bind(null,o,i),l)}function pd(){}function Mg(i,o){var l=ur();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&ld(o,h[1])?h[0]:(l.memoizedState=[i,o],i)}function Vg(i,o){var l=ur();o=o===void 0?null:o;var h=l.memoizedState;return h!==null&&o!==null&&ld(o,h[1])?h[0]:(i=i(),l.memoizedState=[i,o],i)}function Ug(i,o,l){return(Qs&21)===0?(i.baseState&&(i.baseState=!1,Ln=!0),i.memoizedState=l):(Ar(l,o)||(l=Us(),Pt.lanes|=l,Ys|=l,i.baseState=!0),o)}function hI(i,o){var l=et;et=l!==0&&4>l?l:4,i(!0);var h=ad.transition;ad.transition={};try{i(!1),o()}finally{et=l,ad.transition=h}}function Fg(){return ur().memoizedState}function dI(i,o,l){var h=ss(i);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Bg(i))jg(o,l);else if(l=yg(i,o,l,h),l!==null){var p=Sn();Dr(l,i,h,p),$g(l,o,h)}}function fI(i,o,l){var h=ss(i),p={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Bg(i))jg(o,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var w=o.lastRenderedState,N=y(w,l);if(p.hasEagerState=!0,p.eagerState=N,Ar(N,w)){var L=o.interleaved;L===null?(p.next=p,td(o)):(p.next=L.next,L.next=p),o.interleaved=p;return}}catch{}finally{}l=yg(i,o,p,h),l!==null&&(p=Sn(),Dr(l,i,h,p),$g(l,o,h))}}function Bg(i){var o=i.alternate;return i===Pt||o!==null&&o===Pt}function jg(i,o){Ya=xu=!0;var l=i.pending;l===null?o.next=o:(o.next=l.next,l.next=o),i.pending=o}function $g(i,o,l){if((l&4194240)!==0){var h=o.lanes;h&=i.pendingLanes,l|=h,o.lanes=l,Hi(i,l)}}var Vu={readContext:lr,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useInsertionEffect:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useMutableSource:fn,useSyncExternalStore:fn,useId:fn,unstable_isNewReconciler:!1},pI={readContext:lr,useCallback:function(i,o){return Gr().memoizedState=[i,o===void 0?null:o],i},useContext:lr,useEffect:Ng,useImperativeHandle:function(i,o,l){return l=l!=null?l.concat([i]):null,Lu(4194308,4,xg.bind(null,o,i),l)},useLayoutEffect:function(i,o){return Lu(4194308,4,i,o)},useInsertionEffect:function(i,o){return Lu(4,2,i,o)},useMemo:function(i,o){var l=Gr();return o=o===void 0?null:o,i=i(),l.memoizedState=[i,o],i},useReducer:function(i,o,l){var h=Gr();return o=l!==void 0?l(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=dI.bind(null,Pt,i),[h.memoizedState,i]},useRef:function(i){var o=Gr();return i={current:i},o.memoizedState=i},useState:kg,useDebugValue:pd,useDeferredValue:function(i){return Gr().memoizedState=i},useTransition:function(){var i=kg(!1),o=i[0];return i=hI.bind(null,i[1]),Gr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,l){var h=Pt,p=Gr();if(It){if(l===void 0)throw Error(t(407));l=l()}else{if(l=o(),Jt===null)throw Error(t(349));(Qs&30)!==0||Sg(h,o,l)}p.memoizedState=l;var y={value:l,getSnapshot:o};return p.queue=y,Ng(Rg.bind(null,h,y,i),[i]),h.flags|=2048,Za(9,Ag.bind(null,h,y,l,o),void 0,null),l},useId:function(){var i=Gr(),o=Jt.identifierPrefix;if(It){var l=mi,h=pi;l=(h&~(1<<32-Ge(h)-1)).toString(32)+l,o=":"+o+"R"+l,l=Ja++,0<l&&(o+="H"+l.toString(32)),o+=":"}else l=cI++,o=":"+o+"r"+l.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},mI={readContext:lr,useCallback:Mg,useContext:lr,useEffect:fd,useImperativeHandle:Lg,useInsertionEffect:bg,useLayoutEffect:Og,useMemo:Vg,useReducer:hd,useRef:Dg,useState:function(){return hd(Xa)},useDebugValue:pd,useDeferredValue:function(i){var o=ur();return Ug(o,Wt.memoizedState,i)},useTransition:function(){var i=hd(Xa)[0],o=ur().memoizedState;return[i,o]},useMutableSource:Tg,useSyncExternalStore:Ig,useId:Fg,unstable_isNewReconciler:!1},gI={readContext:lr,useCallback:Mg,useContext:lr,useEffect:fd,useImperativeHandle:Lg,useInsertionEffect:bg,useLayoutEffect:Og,useMemo:Vg,useReducer:dd,useRef:Dg,useState:function(){return dd(Xa)},useDebugValue:pd,useDeferredValue:function(i){var o=ur();return Wt===null?o.memoizedState=i:Ug(o,Wt.memoizedState,i)},useTransition:function(){var i=dd(Xa)[0],o=ur().memoizedState;return[i,o]},useMutableSource:Tg,useSyncExternalStore:Ig,useId:Fg,unstable_isNewReconciler:!1};function Cr(i,o){if(i&&i.defaultProps){o=he({},o),i=i.defaultProps;for(var l in i)o[l]===void 0&&(o[l]=i[l]);return o}return o}function md(i,o,l,h){o=i.memoizedState,l=l(h,o),l=l==null?o:he({},o,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Uu={isMounted:function(i){return(i=i._reactInternals)?ge(i)===i:!1},enqueueSetState:function(i,o,l){i=i._reactInternals;var h=Sn(),p=ss(i),y=yi(h,p);y.payload=o,l!=null&&(y.callback=l),o=ts(i,y,p),o!==null&&(Dr(o,i,p,h),Du(o,i,p))},enqueueReplaceState:function(i,o,l){i=i._reactInternals;var h=Sn(),p=ss(i),y=yi(h,p);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=ts(i,y,p),o!==null&&(Dr(o,i,p,h),Du(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var l=Sn(),h=ss(i),p=yi(l,h);p.tag=2,o!=null&&(p.callback=o),o=ts(i,p,h),o!==null&&(Dr(o,i,h,l),Du(o,i,h))}};function zg(i,o,l,h,p,y,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,w):o.prototype&&o.prototype.isPureReactComponent?!Fa(l,h)||!Fa(p,y):!0}function Hg(i,o,l){var h=!1,p=Xi,y=o.contextType;return typeof y=="object"&&y!==null?y=lr(y):(p=xn(o)?Hs:dn.current,h=o.contextTypes,y=(h=h!=null)?Wo(i,p):Xi),o=new o(l,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Uu,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=p,i.__reactInternalMemoizedMaskedChildContext=y),o}function Wg(i,o,l,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,h),o.state!==i&&Uu.enqueueReplaceState(o,o.state,null)}function gd(i,o,l,h){var p=i.stateNode;p.props=l,p.state=i.memoizedState,p.refs={},nd(i);var y=o.contextType;typeof y=="object"&&y!==null?p.context=lr(y):(y=xn(o)?Hs:dn.current,p.context=Wo(i,y)),p.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(md(i,o,y,l),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(o=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),o!==p.state&&Uu.enqueueReplaceState(p,p.state,null),Nu(i,l,p,h),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308)}function Zo(i,o){try{var l="",h=o;do l+=Pe(h),h=h.return;while(h);var p=l}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:p,digest:null}}function yd(i,o,l){return{value:i,source:null,stack:l??null,digest:o??null}}function _d(i,o){try{console.error(o.value)}catch(l){setTimeout(function(){throw l})}}var yI=typeof WeakMap=="function"?WeakMap:Map;function qg(i,o,l){l=yi(-1,l),l.tag=3,l.payload={element:null};var h=o.value;return l.callback=function(){Wu||(Wu=!0,Od=h),_d(i,o)},l}function Kg(i,o,l){l=yi(-1,l),l.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var p=o.value;l.payload=function(){return h(p)},l.callback=function(){_d(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){_d(i,o),typeof h!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})}),l}function Gg(i,o,l){var h=i.pingCache;if(h===null){h=i.pingCache=new yI;var p=new Set;h.set(o,p)}else p=h.get(o),p===void 0&&(p=new Set,h.set(o,p));p.has(l)||(p.add(l),i=NI.bind(null,i,o,l),o.then(i,i))}function Qg(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Yg(i,o,l,h,p){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(o=yi(-1,1),o.tag=2,ts(l,o,1))),l.lanes|=1),i):(i.flags|=65536,i.lanes=p,i)}var _I=J.ReactCurrentOwner,Ln=!1;function In(i,o,l,h){o.child=i===null?gg(o,null,l,h):Qo(o,i.child,l,h)}function Jg(i,o,l,h,p){l=l.render;var y=o.ref;return Jo(o,p),h=ud(i,o,l,h,y,p),l=cd(),i!==null&&!Ln?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,_i(i,o,p)):(It&&l&&qh(o),o.flags|=1,In(i,o,h,p),o.child)}function Xg(i,o,l,h,p){if(i===null){var y=l.type;return typeof y=="function"&&!Bd(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(o.tag=15,o.type=y,Zg(i,o,y,h,p)):(i=Ju(l.type,null,h,o,o.mode,p),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&p)===0){var w=y.memoizedProps;if(l=l.compare,l=l!==null?l:Fa,l(w,h)&&i.ref===o.ref)return _i(i,o,p)}return o.flags|=1,i=as(y,h),i.ref=o.ref,i.return=o,o.child=i}function Zg(i,o,l,h,p){if(i!==null){var y=i.memoizedProps;if(Fa(y,h)&&i.ref===o.ref)if(Ln=!1,o.pendingProps=h=y,(i.lanes&p)!==0)(i.flags&131072)!==0&&(Ln=!0);else return o.lanes=i.lanes,_i(i,o,p)}return vd(i,o,l,h,p)}function ey(i,o,l){var h=o.pendingProps,p=h.children,y=i!==null?i.memoizedState:null;if(h.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(ta,Jn),Jn|=l;else{if((l&1073741824)===0)return i=y!==null?y.baseLanes|l:l,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,gt(ta,Jn),Jn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,gt(ta,Jn),Jn|=h}else y!==null?(h=y.baseLanes|l,o.memoizedState=null):h=l,gt(ta,Jn),Jn|=h;return In(i,o,p,l),o.child}function ty(i,o){var l=o.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(o.flags|=512,o.flags|=2097152)}function vd(i,o,l,h,p){var y=xn(l)?Hs:dn.current;return y=Wo(o,y),Jo(o,p),l=ud(i,o,l,h,y,p),h=cd(),i!==null&&!Ln?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~p,_i(i,o,p)):(It&&h&&qh(o),o.flags|=1,In(i,o,l,p),o.child)}function ny(i,o,l,h,p){if(xn(l)){var y=!0;Tu(o)}else y=!1;if(Jo(o,p),o.stateNode===null)Bu(i,o),Hg(o,l,h),gd(o,l,h,p),h=!0;else if(i===null){var w=o.stateNode,N=o.memoizedProps;w.props=N;var L=w.context,q=l.contextType;typeof q=="object"&&q!==null?q=lr(q):(q=xn(l)?Hs:dn.current,q=Wo(o,q));var ie=l.getDerivedStateFromProps,ae=typeof ie=="function"||typeof w.getSnapshotBeforeUpdate=="function";ae||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==h||L!==q)&&Wg(o,w,h,q),es=!1;var re=o.memoizedState;w.state=re,Nu(o,h,w,p),L=o.memoizedState,N!==h||re!==L||On.current||es?(typeof ie=="function"&&(md(o,l,ie,h),L=o.memoizedState),(N=es||zg(o,l,N,h,re,L,q))?(ae||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=L),w.props=h,w.state=L,w.context=q,h=N):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{w=o.stateNode,_g(i,o),N=o.memoizedProps,q=o.type===o.elementType?N:Cr(o.type,N),w.props=q,ae=o.pendingProps,re=w.context,L=l.contextType,typeof L=="object"&&L!==null?L=lr(L):(L=xn(l)?Hs:dn.current,L=Wo(o,L));var pe=l.getDerivedStateFromProps;(ie=typeof pe=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==ae||re!==L)&&Wg(o,w,h,L),es=!1,re=o.memoizedState,w.state=re,Nu(o,h,w,p);var Ie=o.memoizedState;N!==ae||re!==Ie||On.current||es?(typeof pe=="function"&&(md(o,l,pe,h),Ie=o.memoizedState),(q=es||zg(o,l,q,h,re,Ie,L)||!1)?(ie||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,Ie,L),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,Ie,L)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||N===i.memoizedProps&&re===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&re===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=Ie),w.props=h,w.state=Ie,w.context=L,h=q):(typeof w.componentDidUpdate!="function"||N===i.memoizedProps&&re===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&re===i.memoizedState||(o.flags|=1024),h=!1)}return Ed(i,o,l,h,y,p)}function Ed(i,o,l,h,p,y){ty(i,o);var w=(o.flags&128)!==0;if(!h&&!w)return p&&ag(o,l,!1),_i(i,o,y);h=o.stateNode,_I.current=o;var N=w&&typeof l.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&w?(o.child=Qo(o,i.child,null,y),o.child=Qo(o,null,N,y)):In(i,o,N,y),o.memoizedState=h.state,p&&ag(o,l,!0),o.child}function ry(i){var o=i.stateNode;o.pendingContext?sg(i,o.pendingContext,o.pendingContext!==o.context):o.context&&sg(i,o.context,!1),rd(i,o.containerInfo)}function iy(i,o,l,h,p){return Go(),Yh(p),o.flags|=256,In(i,o,l,h),o.child}var wd={dehydrated:null,treeContext:null,retryLane:0};function Td(i){return{baseLanes:i,cachePool:null,transitions:null}}function sy(i,o,l){var h=o.pendingProps,p=Ct.current,y=!1,w=(o.flags&128)!==0,N;if((N=w)||(N=i!==null&&i.memoizedState===null?!1:(p&2)!==0),N?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(p|=1),gt(Ct,p&1),i===null)return Qh(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(w=h.children,i=h.fallback,y?(h=o.mode,y=o.child,w={mode:"hidden",children:w},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=w):y=Xu(w,h,0,null),i=eo(i,h,l,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Td(l),o.memoizedState=wd,i):Id(o,w));if(p=i.memoizedState,p!==null&&(N=p.dehydrated,N!==null))return vI(i,o,w,h,N,p,l);if(y){y=h.fallback,w=o.mode,p=i.child,N=p.sibling;var L={mode:"hidden",children:h.children};return(w&1)===0&&o.child!==p?(h=o.child,h.childLanes=0,h.pendingProps=L,o.deletions=null):(h=as(p,L),h.subtreeFlags=p.subtreeFlags&14680064),N!==null?y=as(N,y):(y=eo(y,w,l,null),y.flags|=2),y.return=o,h.return=o,h.sibling=y,o.child=h,h=y,y=o.child,w=i.child.memoizedState,w=w===null?Td(l):{baseLanes:w.baseLanes|l,cachePool:null,transitions:w.transitions},y.memoizedState=w,y.childLanes=i.childLanes&~l,o.memoizedState=wd,h}return y=i.child,i=y.sibling,h=as(y,{mode:"visible",children:h.children}),(o.mode&1)===0&&(h.lanes=l),h.return=o,h.sibling=null,i!==null&&(l=o.deletions,l===null?(o.deletions=[i],o.flags|=16):l.push(i)),o.child=h,o.memoizedState=null,h}function Id(i,o){return o=Xu({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Fu(i,o,l,h){return h!==null&&Yh(h),Qo(o,i.child,null,l),i=Id(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function vI(i,o,l,h,p,y,w){if(l)return o.flags&256?(o.flags&=-257,h=yd(Error(t(422))),Fu(i,o,w,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=h.fallback,p=o.mode,h=Xu({mode:"visible",children:h.children},p,0,null),y=eo(y,p,w,null),y.flags|=2,h.return=o,y.return=o,h.sibling=y,o.child=h,(o.mode&1)!==0&&Qo(o,i.child,null,w),o.child.memoizedState=Td(w),o.memoizedState=wd,y);if((o.mode&1)===0)return Fu(i,o,w,null);if(p.data==="$!"){if(h=p.nextSibling&&p.nextSibling.dataset,h)var N=h.dgst;return h=N,y=Error(t(419)),h=yd(y,h,void 0),Fu(i,o,w,h)}if(N=(w&i.childLanes)!==0,Ln||N){if(h=Jt,h!==null){switch(w&-w){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(h.suspendedLanes|w))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,gi(i,p),Dr(h,i,p,-1))}return Fd(),h=yd(Error(t(421))),Fu(i,o,w,h)}return p.data==="$?"?(o.flags|=128,o.child=i.child,o=bI.bind(null,i),p._reactRetry=o,null):(i=y.treeContext,Yn=Yi(p.nextSibling),Qn=o,It=!0,Rr=null,i!==null&&(or[ar++]=pi,or[ar++]=mi,or[ar++]=Ws,pi=i.id,mi=i.overflow,Ws=o),o=Id(o,h.children),o.flags|=4096,o)}function oy(i,o,l){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),ed(i.return,o,l)}function Sd(i,o,l,h,p){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:p}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=p)}function ay(i,o,l){var h=o.pendingProps,p=h.revealOrder,y=h.tail;if(In(i,o,h.children,l),h=Ct.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&oy(i,l,o);else if(i.tag===19)oy(i,l,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(gt(Ct,h),(o.mode&1)===0)o.memoizedState=null;else switch(p){case"forwards":for(l=o.child,p=null;l!==null;)i=l.alternate,i!==null&&bu(i)===null&&(p=l),l=l.sibling;l=p,l===null?(p=o.child,o.child=null):(p=l.sibling,l.sibling=null),Sd(o,!1,p,l,y);break;case"backwards":for(l=null,p=o.child,o.child=null;p!==null;){if(i=p.alternate,i!==null&&bu(i)===null){o.child=p;break}i=p.sibling,p.sibling=l,l=p,p=i}Sd(o,!0,l,null,y);break;case"together":Sd(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Bu(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function _i(i,o,l){if(i!==null&&(o.dependencies=i.dependencies),Ys|=o.lanes,(l&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,l=as(i,i.pendingProps),o.child=l,l.return=o;i.sibling!==null;)i=i.sibling,l=l.sibling=as(i,i.pendingProps),l.return=o;l.sibling=null}return o.child}function EI(i,o,l){switch(o.tag){case 3:ry(o),Go();break;case 5:wg(o);break;case 1:xn(o.type)&&Tu(o);break;case 4:rd(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,p=o.memoizedProps.value;gt(Pu,h._currentValue),h._currentValue=p;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(gt(Ct,Ct.current&1),o.flags|=128,null):(l&o.child.childLanes)!==0?sy(i,o,l):(gt(Ct,Ct.current&1),i=_i(i,o,l),i!==null?i.sibling:null);gt(Ct,Ct.current&1);break;case 19:if(h=(l&o.childLanes)!==0,(i.flags&128)!==0){if(h)return ay(i,o,l);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),gt(Ct,Ct.current),h)break;return null;case 22:case 23:return o.lanes=0,ey(i,o,l)}return _i(i,o,l)}var ly,Ad,uy,cy;ly=function(i,o){for(var l=o.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Ad=function(){},uy=function(i,o,l,h){var p=i.memoizedProps;if(p!==h){i=o.stateNode,Gs(Kr.current);var y=null;switch(l){case"input":p=xr(i,p),h=xr(i,h),y=[];break;case"select":p=he({},p,{value:void 0}),h=he({},h,{value:void 0}),y=[];break;case"textarea":p=bs(i,p),h=bs(i,h),y=[];break;default:typeof p.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=vu)}Ui(l,h);var w;l=null;for(q in p)if(!h.hasOwnProperty(q)&&p.hasOwnProperty(q)&&p[q]!=null)if(q==="style"){var N=p[q];for(w in N)N.hasOwnProperty(w)&&(l||(l={}),l[w]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(s.hasOwnProperty(q)?y||(y=[]):(y=y||[]).push(q,null));for(q in h){var L=h[q];if(N=p?.[q],h.hasOwnProperty(q)&&L!==N&&(L!=null||N!=null))if(q==="style")if(N){for(w in N)!N.hasOwnProperty(w)||L&&L.hasOwnProperty(w)||(l||(l={}),l[w]="");for(w in L)L.hasOwnProperty(w)&&N[w]!==L[w]&&(l||(l={}),l[w]=L[w])}else l||(y||(y=[]),y.push(q,l)),l=L;else q==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,N=N?N.__html:void 0,L!=null&&N!==L&&(y=y||[]).push(q,L)):q==="children"?typeof L!="string"&&typeof L!="number"||(y=y||[]).push(q,""+L):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(s.hasOwnProperty(q)?(L!=null&&q==="onScroll"&&yt("scroll",i),y||N===L||(y=[])):(y=y||[]).push(q,L))}l&&(y=y||[]).push("style",l);var q=y;(o.updateQueue=q)&&(o.flags|=4)}},cy=function(i,o,l,h){l!==h&&(o.flags|=4)};function el(i,o){if(!It)switch(i.tailMode){case"hidden":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function pn(i){var o=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(o)for(var p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags&14680064,h|=p.flags&14680064,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)l|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=l,o}function wI(i,o,l){var h=o.pendingProps;switch(Kh(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(o),null;case 1:return xn(o.type)&&wu(),pn(o),null;case 3:return h=o.stateNode,Xo(),_t(On),_t(dn),od(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(Ru(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Rr!==null&&(Md(Rr),Rr=null))),Ad(i,o),pn(o),null;case 5:id(o);var p=Gs(Qa.current);if(l=o.type,i!==null&&o.stateNode!=null)uy(i,o,l,h,p),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(t(166));return pn(o),null}if(i=Gs(Kr.current),Ru(o)){h=o.stateNode,l=o.type;var y=o.memoizedProps;switch(h[qr]=o,h[Ha]=y,i=(o.mode&1)!==0,l){case"dialog":yt("cancel",h),yt("close",h);break;case"iframe":case"object":case"embed":yt("load",h);break;case"video":case"audio":for(p=0;p<ja.length;p++)yt(ja[p],h);break;case"source":yt("error",h);break;case"img":case"image":case"link":yt("error",h),yt("load",h);break;case"details":yt("toggle",h);break;case"input":xi(h,y),yt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},yt("invalid",h);break;case"textarea":Li(h,y),yt("invalid",h)}Ui(l,y),p=null;for(var w in y)if(y.hasOwnProperty(w)){var N=y[w];w==="children"?typeof N=="string"?h.textContent!==N&&(y.suppressHydrationWarning!==!0&&_u(h.textContent,N,i),p=["children",N]):typeof N=="number"&&h.textContent!==""+N&&(y.suppressHydrationWarning!==!0&&_u(h.textContent,N,i),p=["children",""+N]):s.hasOwnProperty(w)&&N!=null&&w==="onScroll"&&yt("scroll",h)}switch(l){case"input":pr(h),Io(h,y,!0);break;case"textarea":pr(h),yr(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=vu)}h=p,o.updateQueue=h,h!==null&&(o.flags|=4)}else{w=p.nodeType===9?p:p.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Nt(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=w.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=w.createElement(l,{is:h.is}):(i=w.createElement(l),l==="select"&&(w=i,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):i=w.createElementNS(i,l),i[qr]=o,i[Ha]=h,ly(i,o,!1,!1),o.stateNode=i;e:{switch(w=Os(l,h),l){case"dialog":yt("cancel",i),yt("close",i),p=h;break;case"iframe":case"object":case"embed":yt("load",i),p=h;break;case"video":case"audio":for(p=0;p<ja.length;p++)yt(ja[p],i);p=h;break;case"source":yt("error",i),p=h;break;case"img":case"image":case"link":yt("error",i),yt("load",i),p=h;break;case"details":yt("toggle",i),p=h;break;case"input":xi(i,h),p=xr(i,h),yt("invalid",i);break;case"option":p=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},p=he({},h,{value:void 0}),yt("invalid",i);break;case"textarea":Li(i,h),p=bs(i,h),yt("invalid",i);break;default:p=h}Ui(l,p),N=p;for(y in N)if(N.hasOwnProperty(y)){var L=N[y];y==="style"?Mi(i,L):y==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&wn(i,L)):y==="children"?typeof L=="string"?(l!=="textarea"||L!=="")&&_r(i,L):typeof L=="number"&&_r(i,""+L):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?L!=null&&y==="onScroll"&&yt("scroll",i):L!=null&&Y(i,y,L,w))}switch(l){case"input":pr(i),Io(i,h,!1);break;case"textarea":pr(i),yr(i);break;case"option":h.value!=null&&i.setAttribute("value",""+Ve(h.value));break;case"select":i.multiple=!!h.multiple,y=h.value,y!=null?gr(i,!!h.multiple,y,!1):h.defaultValue!=null&&gr(i,!!h.multiple,h.defaultValue,!0);break;default:typeof p.onClick=="function"&&(i.onclick=vu)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return pn(o),null;case 6:if(i&&o.stateNode!=null)cy(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(t(166));if(l=Gs(Qa.current),Gs(Kr.current),Ru(o)){if(h=o.stateNode,l=o.memoizedProps,h[qr]=o,(y=h.nodeValue!==l)&&(i=Qn,i!==null))switch(i.tag){case 3:_u(h.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&_u(h.nodeValue,l,(i.mode&1)!==0)}y&&(o.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[qr]=o,o.stateNode=h}return pn(o),null;case 13:if(_t(Ct),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(It&&Yn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)fg(),Go(),o.flags|=98560,y=!1;else if(y=Ru(o),h!==null&&h.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[qr]=o}else Go(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;pn(o),y=!1}else Rr!==null&&(Md(Rr),Rr=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=l,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Ct.current&1)!==0?qt===0&&(qt=3):Fd())),o.updateQueue!==null&&(o.flags|=4),pn(o),null);case 4:return Xo(),Ad(i,o),i===null&&$a(o.stateNode.containerInfo),pn(o),null;case 10:return Zh(o.type._context),pn(o),null;case 17:return xn(o.type)&&wu(),pn(o),null;case 19:if(_t(Ct),y=o.memoizedState,y===null)return pn(o),null;if(h=(o.flags&128)!==0,w=y.rendering,w===null)if(h)el(y,!1);else{if(qt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(w=bu(i),w!==null){for(o.flags|=128,el(y,!1),h=w.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=l,l=o.child;l!==null;)y=l,i=h,y.flags&=14680066,w=y.alternate,w===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=w.childLanes,y.lanes=w.lanes,y.child=w.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=w.memoizedProps,y.memoizedState=w.memoizedState,y.updateQueue=w.updateQueue,y.type=w.type,i=w.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return gt(Ct,Ct.current&1|2),o.child}i=i.sibling}y.tail!==null&&qe()>na&&(o.flags|=128,h=!0,el(y,!1),o.lanes=4194304)}else{if(!h)if(i=bu(w),i!==null){if(o.flags|=128,h=!0,l=i.updateQueue,l!==null&&(o.updateQueue=l,o.flags|=4),el(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!It)return pn(o),null}else 2*qe()-y.renderingStartTime>na&&l!==1073741824&&(o.flags|=128,h=!0,el(y,!1),o.lanes=4194304);y.isBackwards?(w.sibling=o.child,o.child=w):(l=y.last,l!==null?l.sibling=w:o.child=w,y.last=w)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=qe(),o.sibling=null,l=Ct.current,gt(Ct,h?l&1|2:l&1),o):(pn(o),null);case 22:case 23:return Ud(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&(o.mode&1)!==0?(Jn&1073741824)!==0&&(pn(o),o.subtreeFlags&6&&(o.flags|=8192)):pn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function TI(i,o){switch(Kh(o),o.tag){case 1:return xn(o.type)&&wu(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Xo(),_t(On),_t(dn),od(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return id(o),null;case 13:if(_t(Ct),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Go()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return _t(Ct),null;case 4:return Xo(),null;case 10:return Zh(o.type._context),null;case 22:case 23:return Ud(),null;case 24:return null;default:return null}}var ju=!1,mn=!1,II=typeof WeakSet=="function"?WeakSet:Set,Te=null;function ea(i,o){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){Ot(i,o,h)}else l.current=null}function Rd(i,o,l){try{l()}catch(h){Ot(i,o,h)}}var hy=!1;function SI(i,o){if(Uh=Ki,i=zm(),Dh(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var w=0,N=-1,L=-1,q=0,ie=0,ae=i,re=null;t:for(;;){for(var pe;ae!==l||p!==0&&ae.nodeType!==3||(N=w+p),ae!==y||h!==0&&ae.nodeType!==3||(L=w+h),ae.nodeType===3&&(w+=ae.nodeValue.length),(pe=ae.firstChild)!==null;)re=ae,ae=pe;for(;;){if(ae===i)break t;if(re===l&&++q===p&&(N=w),re===y&&++ie===h&&(L=w),(pe=ae.nextSibling)!==null)break;ae=re,re=ae.parentNode}ae=pe}l=N===-1||L===-1?null:{start:N,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(Fh={focusedElem:i,selectionRange:l},Ki=!1,Te=o;Te!==null;)if(o=Te,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Te=i;else for(;Te!==null;){o=Te;try{var Ie=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Ie!==null){var Se=Ie.memoizedProps,Mt=Ie.memoizedState,$=o.stateNode,U=$.getSnapshotBeforeUpdate(o.elementType===o.type?Se:Cr(o.type,Se),Mt);$.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var z=o.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(le){Ot(o,o.return,le)}if(i=o.sibling,i!==null){i.return=o.return,Te=i;break}Te=o.return}return Ie=hy,hy=!1,Ie}function tl(i,o,l){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var p=h=h.next;do{if((p.tag&i)===i){var y=p.destroy;p.destroy=void 0,y!==void 0&&Rd(o,l,y)}p=p.next}while(p!==h)}}function $u(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&i)===i){var h=l.create;l.destroy=h()}l=l.next}while(l!==o)}}function Cd(i){var o=i.ref;if(o!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof o=="function"?o(i):o.current=i}}function dy(i){var o=i.alternate;o!==null&&(i.alternate=null,dy(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[qr],delete o[Ha],delete o[zh],delete o[oI],delete o[aI])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function fy(i){return i.tag===5||i.tag===3||i.tag===4}function py(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||fy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Pd(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.nodeType===8?l.parentNode.insertBefore(i,o):l.insertBefore(i,o):(l.nodeType===8?(o=l.parentNode,o.insertBefore(i,l)):(o=l,o.appendChild(i)),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=vu));else if(h!==4&&(i=i.child,i!==null))for(Pd(i,o,l),i=i.sibling;i!==null;)Pd(i,o,l),i=i.sibling}function kd(i,o,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?l.insertBefore(i,o):l.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(kd(i,o,l),i=i.sibling;i!==null;)kd(i,o,l),i=i.sibling}var rn=null,Pr=!1;function ns(i,o,l){for(l=l.child;l!==null;)my(i,o,l),l=l.sibling}function my(i,o,l){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(lt,l)}catch{}switch(l.tag){case 5:mn||ea(l,o);case 6:var h=rn,p=Pr;rn=null,ns(i,o,l),rn=h,Pr=p,rn!==null&&(Pr?(i=rn,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):rn.removeChild(l.stateNode));break;case 18:rn!==null&&(Pr?(i=rn,l=l.stateNode,i.nodeType===8?$h(i.parentNode,l):i.nodeType===1&&$h(i,l),Ir(i)):$h(rn,l.stateNode));break;case 4:h=rn,p=Pr,rn=l.stateNode.containerInfo,Pr=!0,ns(i,o,l),rn=h,Pr=p;break;case 0:case 11:case 14:case 15:if(!mn&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){p=h=h.next;do{var y=p,w=y.destroy;y=y.tag,w!==void 0&&((y&2)!==0||(y&4)!==0)&&Rd(l,o,w),p=p.next}while(p!==h)}ns(i,o,l);break;case 1:if(!mn&&(ea(l,o),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(N){Ot(l,o,N)}ns(i,o,l);break;case 21:ns(i,o,l);break;case 22:l.mode&1?(mn=(h=mn)||l.memoizedState!==null,ns(i,o,l),mn=h):ns(i,o,l);break;default:ns(i,o,l)}}function gy(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new II),o.forEach(function(h){var p=OI.bind(null,i,h);l.has(h)||(l.add(h),h.then(p,p))})}}function kr(i,o){var l=o.deletions;if(l!==null)for(var h=0;h<l.length;h++){var p=l[h];try{var y=i,w=o,N=w;e:for(;N!==null;){switch(N.tag){case 5:rn=N.stateNode,Pr=!1;break e;case 3:rn=N.stateNode.containerInfo,Pr=!0;break e;case 4:rn=N.stateNode.containerInfo,Pr=!0;break e}N=N.return}if(rn===null)throw Error(t(160));my(y,w,p),rn=null,Pr=!1;var L=p.alternate;L!==null&&(L.return=null),p.return=null}catch(q){Ot(p,o,q)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)yy(o,i),o=o.sibling}function yy(i,o){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(kr(o,i),Qr(i),h&4){try{tl(3,i,i.return),$u(3,i)}catch(Se){Ot(i,i.return,Se)}try{tl(5,i,i.return)}catch(Se){Ot(i,i.return,Se)}}break;case 1:kr(o,i),Qr(i),h&512&&l!==null&&ea(l,l.return);break;case 5:if(kr(o,i),Qr(i),h&512&&l!==null&&ea(l,l.return),i.flags&32){var p=i.stateNode;try{_r(p,"")}catch(Se){Ot(i,i.return,Se)}}if(h&4&&(p=i.stateNode,p!=null)){var y=i.memoizedProps,w=l!==null?l.memoizedProps:y,N=i.type,L=i.updateQueue;if(i.updateQueue=null,L!==null)try{N==="input"&&y.type==="radio"&&y.name!=null&&$n(p,y),Os(N,w);var q=Os(N,y);for(w=0;w<L.length;w+=2){var ie=L[w],ae=L[w+1];ie==="style"?Mi(p,ae):ie==="dangerouslySetInnerHTML"?wn(p,ae):ie==="children"?_r(p,ae):Y(p,ie,ae,q)}switch(N){case"input":Ns(p,y);break;case"textarea":Cn(p,y);break;case"select":var re=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var pe=y.value;pe!=null?gr(p,!!y.multiple,pe,!1):re!==!!y.multiple&&(y.defaultValue!=null?gr(p,!!y.multiple,y.defaultValue,!0):gr(p,!!y.multiple,y.multiple?[]:"",!1))}p[Ha]=y}catch(Se){Ot(i,i.return,Se)}}break;case 6:if(kr(o,i),Qr(i),h&4){if(i.stateNode===null)throw Error(t(162));p=i.stateNode,y=i.memoizedProps;try{p.nodeValue=y}catch(Se){Ot(i,i.return,Se)}}break;case 3:if(kr(o,i),Qr(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Ir(o.containerInfo)}catch(Se){Ot(i,i.return,Se)}break;case 4:kr(o,i),Qr(i);break;case 13:kr(o,i),Qr(i),p=i.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(bd=qe())),h&4&&gy(i);break;case 22:if(ie=l!==null&&l.memoizedState!==null,i.mode&1?(mn=(q=mn)||ie,kr(o,i),mn=q):kr(o,i),Qr(i),h&8192){if(q=i.memoizedState!==null,(i.stateNode.isHidden=q)&&!ie&&(i.mode&1)!==0)for(Te=i,ie=i.child;ie!==null;){for(ae=Te=ie;Te!==null;){switch(re=Te,pe=re.child,re.tag){case 0:case 11:case 14:case 15:tl(4,re,re.return);break;case 1:ea(re,re.return);var Ie=re.stateNode;if(typeof Ie.componentWillUnmount=="function"){h=re,l=re.return;try{o=h,Ie.props=o.memoizedProps,Ie.state=o.memoizedState,Ie.componentWillUnmount()}catch(Se){Ot(h,l,Se)}}break;case 5:ea(re,re.return);break;case 22:if(re.memoizedState!==null){Ey(ae);continue}}pe!==null?(pe.return=re,Te=pe):Ey(ae)}ie=ie.sibling}e:for(ie=null,ae=i;;){if(ae.tag===5){if(ie===null){ie=ae;try{p=ae.stateNode,q?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(N=ae.stateNode,L=ae.memoizedProps.style,w=L!=null&&L.hasOwnProperty("display")?L.display:null,N.style.display=Pn("display",w))}catch(Se){Ot(i,i.return,Se)}}}else if(ae.tag===6){if(ie===null)try{ae.stateNode.nodeValue=q?"":ae.memoizedProps}catch(Se){Ot(i,i.return,Se)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===i)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===i)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===i)break e;ie===ae&&(ie=null),ae=ae.return}ie===ae&&(ie=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:kr(o,i),Qr(i),h&4&&gy(i);break;case 21:break;default:kr(o,i),Qr(i)}}function Qr(i){var o=i.flags;if(o&2){try{e:{for(var l=i.return;l!==null;){if(fy(l)){var h=l;break e}l=l.return}throw Error(t(160))}switch(h.tag){case 5:var p=h.stateNode;h.flags&32&&(_r(p,""),h.flags&=-33);var y=py(i);kd(i,y,p);break;case 3:case 4:var w=h.stateNode.containerInfo,N=py(i);Pd(i,N,w);break;default:throw Error(t(161))}}catch(L){Ot(i,i.return,L)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function AI(i,o,l){Te=i,_y(i)}function _y(i,o,l){for(var h=(i.mode&1)!==0;Te!==null;){var p=Te,y=p.child;if(p.tag===22&&h){var w=p.memoizedState!==null||ju;if(!w){var N=p.alternate,L=N!==null&&N.memoizedState!==null||mn;N=ju;var q=mn;if(ju=w,(mn=L)&&!q)for(Te=p;Te!==null;)w=Te,L=w.child,w.tag===22&&w.memoizedState!==null?wy(p):L!==null?(L.return=w,Te=L):wy(p);for(;y!==null;)Te=y,_y(y),y=y.sibling;Te=p,ju=N,mn=q}vy(i)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,Te=y):vy(i)}}function vy(i){for(;Te!==null;){var o=Te;if((o.flags&8772)!==0){var l=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:mn||$u(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!mn)if(l===null)h.componentDidMount();else{var p=o.elementType===o.type?l.memoizedProps:Cr(o.type,l.memoizedProps);h.componentDidUpdate(p,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&Eg(o,y,h);break;case 3:var w=o.updateQueue;if(w!==null){if(l=null,o.child!==null)switch(o.child.tag){case 5:l=o.child.stateNode;break;case 1:l=o.child.stateNode}Eg(o,w,l)}break;case 5:var N=o.stateNode;if(l===null&&o.flags&4){l=N;var L=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&l.focus();break;case"img":L.src&&(l.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var q=o.alternate;if(q!==null){var ie=q.memoizedState;if(ie!==null){var ae=ie.dehydrated;ae!==null&&Ir(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}mn||o.flags&512&&Cd(o)}catch(re){Ot(o,o.return,re)}}if(o===i){Te=null;break}if(l=o.sibling,l!==null){l.return=o.return,Te=l;break}Te=o.return}}function Ey(i){for(;Te!==null;){var o=Te;if(o===i){Te=null;break}var l=o.sibling;if(l!==null){l.return=o.return,Te=l;break}Te=o.return}}function wy(i){for(;Te!==null;){var o=Te;try{switch(o.tag){case 0:case 11:case 15:var l=o.return;try{$u(4,o)}catch(L){Ot(o,l,L)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var p=o.return;try{h.componentDidMount()}catch(L){Ot(o,p,L)}}var y=o.return;try{Cd(o)}catch(L){Ot(o,y,L)}break;case 5:var w=o.return;try{Cd(o)}catch(L){Ot(o,w,L)}}}catch(L){Ot(o,o.return,L)}if(o===i){Te=null;break}var N=o.sibling;if(N!==null){N.return=o.return,Te=N;break}Te=o.return}}var RI=Math.ceil,zu=J.ReactCurrentDispatcher,Dd=J.ReactCurrentOwner,cr=J.ReactCurrentBatchConfig,rt=0,Jt=null,Bt=null,sn=0,Jn=0,ta=Ji(0),qt=0,nl=null,Ys=0,Hu=0,Nd=0,rl=null,Mn=null,bd=0,na=1/0,vi=null,Wu=!1,Od=null,rs=null,qu=!1,is=null,Ku=0,il=0,xd=null,Gu=-1,Qu=0;function Sn(){return(rt&6)!==0?qe():Gu!==-1?Gu:Gu=qe()}function ss(i){return(i.mode&1)===0?1:(rt&2)!==0&&sn!==0?sn&-sn:uI.transition!==null?(Qu===0&&(Qu=Us()),Qu):(i=et,i!==0||(i=window.event,i=i===void 0?16:ba(i.type)),i)}function Dr(i,o,l,h){if(50<il)throw il=0,xd=null,Error(t(185));zi(i,l,h),((rt&2)===0||i!==Jt)&&(i===Jt&&((rt&2)===0&&(Hu|=l),qt===4&&os(i,sn)),Vn(i,h),l===1&&rt===0&&(o.mode&1)===0&&(na=qe()+500,Iu&&Zi()))}function Vn(i,o){var l=i.callbackNode;ai(i,o);var h=Vs(i,i===Jt?sn:0);if(h===0)l!==null&&nr(l),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(l!=null&&nr(l),o===1)i.tag===0?lI(Iy.bind(null,i)):lg(Iy.bind(null,i)),iI(function(){(rt&6)===0&&Zi()}),l=null;else{switch(Wi(h)){case 1:l=Wn;break;case 4:l=hn;break;case 16:l=en;break;case 536870912:l=Ke;break;default:l=en}l=Ny(l,Ty.bind(null,i))}i.callbackPriority=o,i.callbackNode=l}}function Ty(i,o){if(Gu=-1,Qu=0,(rt&6)!==0)throw Error(t(327));var l=i.callbackNode;if(ra()&&i.callbackNode!==l)return null;var h=Vs(i,i===Jt?sn:0);if(h===0)return null;if((h&30)!==0||(h&i.expiredLanes)!==0||o)o=Yu(i,h);else{o=h;var p=rt;rt|=2;var y=Ay();(Jt!==i||sn!==o)&&(vi=null,na=qe()+500,Xs(i,o));do try{kI();break}catch(N){Sy(i,N)}while(!0);Xh(),zu.current=y,rt=p,Bt!==null?o=0:(Jt=null,sn=0,o=qt)}if(o!==0){if(o===2&&(p=qn(i),p!==0&&(h=p,o=Ld(i,p))),o===1)throw l=nl,Xs(i,0),os(i,h),Vn(i,qe()),l;if(o===6)os(i,h);else{if(p=i.current.alternate,(h&30)===0&&!CI(p)&&(o=Yu(i,h),o===2&&(y=qn(i),y!==0&&(h=y,o=Ld(i,y))),o===1))throw l=nl,Xs(i,0),os(i,h),Vn(i,qe()),l;switch(i.finishedWork=p,i.finishedLanes=h,o){case 0:case 1:throw Error(t(345));case 2:Zs(i,Mn,vi);break;case 3:if(os(i,h),(h&130023424)===h&&(o=bd+500-qe(),10<o)){if(Vs(i,0)!==0)break;if(p=i.suspendedLanes,(p&h)!==h){Sn(),i.pingedLanes|=i.suspendedLanes&p;break}i.timeoutHandle=jh(Zs.bind(null,i,Mn,vi),o);break}Zs(i,Mn,vi);break;case 4:if(os(i,h),(h&4194240)===h)break;for(o=i.eventTimes,p=-1;0<h;){var w=31-Ge(h);y=1<<w,w=o[w],w>p&&(p=w),h&=~y}if(h=p,h=qe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*RI(h/1960))-h,10<h){i.timeoutHandle=jh(Zs.bind(null,i,Mn,vi),h);break}Zs(i,Mn,vi);break;case 5:Zs(i,Mn,vi);break;default:throw Error(t(329))}}}return Vn(i,qe()),i.callbackNode===l?Ty.bind(null,i):null}function Ld(i,o){var l=rl;return i.current.memoizedState.isDehydrated&&(Xs(i,o).flags|=256),i=Yu(i,o),i!==2&&(o=Mn,Mn=l,o!==null&&Md(o)),i}function Md(i){Mn===null?Mn=i:Mn.push.apply(Mn,i)}function CI(i){for(var o=i;;){if(o.flags&16384){var l=o.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var p=l[h],y=p.getSnapshot;p=p.value;try{if(!Ar(y(),p))return!1}catch{return!1}}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function os(i,o){for(o&=~Nd,o&=~Hu,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var l=31-Ge(o),h=1<<l;i[l]=-1,o&=~h}}function Iy(i){if((rt&6)!==0)throw Error(t(327));ra();var o=Vs(i,0);if((o&1)===0)return Vn(i,qe()),null;var l=Yu(i,o);if(i.tag!==0&&l===2){var h=qn(i);h!==0&&(o=h,l=Ld(i,h))}if(l===1)throw l=nl,Xs(i,0),os(i,o),Vn(i,qe()),l;if(l===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Zs(i,Mn,vi),Vn(i,qe()),null}function Vd(i,o){var l=rt;rt|=1;try{return i(o)}finally{rt=l,rt===0&&(na=qe()+500,Iu&&Zi())}}function Js(i){is!==null&&is.tag===0&&(rt&6)===0&&ra();var o=rt;rt|=1;var l=cr.transition,h=et;try{if(cr.transition=null,et=1,i)return i()}finally{et=h,cr.transition=l,rt=o,(rt&6)===0&&Zi()}}function Ud(){Jn=ta.current,_t(ta)}function Xs(i,o){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,rI(l)),Bt!==null)for(l=Bt.return;l!==null;){var h=l;switch(Kh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&wu();break;case 3:Xo(),_t(On),_t(dn),od();break;case 5:id(h);break;case 4:Xo();break;case 13:_t(Ct);break;case 19:_t(Ct);break;case 10:Zh(h.type._context);break;case 22:case 23:Ud()}l=l.return}if(Jt=i,Bt=i=as(i.current,null),sn=Jn=o,qt=0,nl=null,Nd=Hu=Ys=0,Mn=rl=null,Ks!==null){for(o=0;o<Ks.length;o++)if(l=Ks[o],h=l.interleaved,h!==null){l.interleaved=null;var p=h.next,y=l.pending;if(y!==null){var w=y.next;y.next=p,h.next=w}l.pending=h}Ks=null}return i}function Sy(i,o){do{var l=Bt;try{if(Xh(),Ou.current=Vu,xu){for(var h=Pt.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}xu=!1}if(Qs=0,Yt=Wt=Pt=null,Ya=!1,Ja=0,Dd.current=null,l===null||l.return===null){qt=1,nl=o,Bt=null;break}e:{var y=i,w=l.return,N=l,L=o;if(o=sn,N.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var q=L,ie=N,ae=ie.tag;if((ie.mode&1)===0&&(ae===0||ae===11||ae===15)){var re=ie.alternate;re?(ie.updateQueue=re.updateQueue,ie.memoizedState=re.memoizedState,ie.lanes=re.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var pe=Qg(w);if(pe!==null){pe.flags&=-257,Yg(pe,w,N,y,o),pe.mode&1&&Gg(y,q,o),o=pe,L=q;var Ie=o.updateQueue;if(Ie===null){var Se=new Set;Se.add(L),o.updateQueue=Se}else Ie.add(L);break e}else{if((o&1)===0){Gg(y,q,o),Fd();break e}L=Error(t(426))}}else if(It&&N.mode&1){var Mt=Qg(w);if(Mt!==null){(Mt.flags&65536)===0&&(Mt.flags|=256),Yg(Mt,w,N,y,o),Yh(Zo(L,N));break e}}y=L=Zo(L,N),qt!==4&&(qt=2),rl===null?rl=[y]:rl.push(y),y=w;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var $=qg(y,L,o);vg(y,$);break e;case 1:N=L;var U=y.type,z=y.stateNode;if((y.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(rs===null||!rs.has(z)))){y.flags|=65536,o&=-o,y.lanes|=o;var le=Kg(y,N,o);vg(y,le);break e}}y=y.return}while(y!==null)}Cy(l)}catch(Ce){o=Ce,Bt===l&&l!==null&&(Bt=l=l.return);continue}break}while(!0)}function Ay(){var i=zu.current;return zu.current=Vu,i===null?Vu:i}function Fd(){(qt===0||qt===3||qt===2)&&(qt=4),Jt===null||(Ys&268435455)===0&&(Hu&268435455)===0||os(Jt,sn)}function Yu(i,o){var l=rt;rt|=2;var h=Ay();(Jt!==i||sn!==o)&&(vi=null,Xs(i,o));do try{PI();break}catch(p){Sy(i,p)}while(!0);if(Xh(),rt=l,zu.current=h,Bt!==null)throw Error(t(261));return Jt=null,sn=0,qt}function PI(){for(;Bt!==null;)Ry(Bt)}function kI(){for(;Bt!==null&&!Ur();)Ry(Bt)}function Ry(i){var o=Dy(i.alternate,i,Jn);i.memoizedProps=i.pendingProps,o===null?Cy(i):Bt=o,Dd.current=null}function Cy(i){var o=i;do{var l=o.alternate;if(i=o.return,(o.flags&32768)===0){if(l=wI(l,o,Jn),l!==null){Bt=l;return}}else{if(l=TI(l,o),l!==null){l.flags&=32767,Bt=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{qt=6,Bt=null;return}}if(o=o.sibling,o!==null){Bt=o;return}Bt=o=i}while(o!==null);qt===0&&(qt=5)}function Zs(i,o,l){var h=et,p=cr.transition;try{cr.transition=null,et=1,DI(i,o,l,h)}finally{cr.transition=p,et=h}return null}function DI(i,o,l,h){do ra();while(is!==null);if((rt&6)!==0)throw Error(t(327));l=i.finishedWork;var p=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=l.lanes|l.childLanes;if(pt(i,y),i===Jt&&(Bt=Jt=null,sn=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||qu||(qu=!0,Ny(en,function(){return ra(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=cr.transition,cr.transition=null;var w=et;et=1;var N=rt;rt|=4,Dd.current=null,SI(i,l),yy(l,i),YT(Fh),Ki=!!Uh,Fh=Uh=null,i.current=l,AI(l),Hn(),rt=N,et=w,cr.transition=y}else i.current=l;if(qu&&(qu=!1,is=i,Ku=p),y=i.pendingLanes,y===0&&(rs=null),Br(l.stateNode),Vn(i,qe()),o!==null)for(h=i.onRecoverableError,l=0;l<o.length;l++)p=o[l],h(p.value,{componentStack:p.stack,digest:p.digest});if(Wu)throw Wu=!1,i=Od,Od=null,i;return(Ku&1)!==0&&i.tag!==0&&ra(),y=i.pendingLanes,(y&1)!==0?i===xd?il++:(il=0,xd=i):il=0,Zi(),null}function ra(){if(is!==null){var i=Wi(Ku),o=cr.transition,l=et;try{if(cr.transition=null,et=16>i?16:i,is===null)var h=!1;else{if(i=is,is=null,Ku=0,(rt&6)!==0)throw Error(t(331));var p=rt;for(rt|=4,Te=i.current;Te!==null;){var y=Te,w=y.child;if((Te.flags&16)!==0){var N=y.deletions;if(N!==null){for(var L=0;L<N.length;L++){var q=N[L];for(Te=q;Te!==null;){var ie=Te;switch(ie.tag){case 0:case 11:case 15:tl(8,ie,y)}var ae=ie.child;if(ae!==null)ae.return=ie,Te=ae;else for(;Te!==null;){ie=Te;var re=ie.sibling,pe=ie.return;if(dy(ie),ie===q){Te=null;break}if(re!==null){re.return=pe,Te=re;break}Te=pe}}}var Ie=y.alternate;if(Ie!==null){var Se=Ie.child;if(Se!==null){Ie.child=null;do{var Mt=Se.sibling;Se.sibling=null,Se=Mt}while(Se!==null)}}Te=y}}if((y.subtreeFlags&2064)!==0&&w!==null)w.return=y,Te=w;else e:for(;Te!==null;){if(y=Te,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:tl(9,y,y.return)}var $=y.sibling;if($!==null){$.return=y.return,Te=$;break e}Te=y.return}}var U=i.current;for(Te=U;Te!==null;){w=Te;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,Te=z;else e:for(w=U;Te!==null;){if(N=Te,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:$u(9,N)}}catch(Ce){Ot(N,N.return,Ce)}if(N===w){Te=null;break e}var le=N.sibling;if(le!==null){le.return=N.return,Te=le;break e}Te=N.return}}if(rt=p,Zi(),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(lt,i)}catch{}h=!0}return h}finally{et=l,cr.transition=o}}return!1}function Py(i,o,l){o=Zo(l,o),o=qg(i,o,1),i=ts(i,o,1),o=Sn(),i!==null&&(zi(i,1,o),Vn(i,o))}function Ot(i,o,l){if(i.tag===3)Py(i,i,l);else for(;o!==null;){if(o.tag===3){Py(o,i,l);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(rs===null||!rs.has(h))){i=Zo(l,i),i=Kg(o,i,1),o=ts(o,i,1),i=Sn(),o!==null&&(zi(o,1,i),Vn(o,i));break}}o=o.return}}function NI(i,o,l){var h=i.pingCache;h!==null&&h.delete(o),o=Sn(),i.pingedLanes|=i.suspendedLanes&l,Jt===i&&(sn&l)===l&&(qt===4||qt===3&&(sn&130023424)===sn&&500>qe()-bd?Xs(i,0):Nd|=l),Vn(i,o)}function ky(i,o){o===0&&((i.mode&1)===0?o=1:(o=Ro,Ro<<=1,(Ro&130023424)===0&&(Ro=4194304)));var l=Sn();i=gi(i,o),i!==null&&(zi(i,o,l),Vn(i,l))}function bI(i){var o=i.memoizedState,l=0;o!==null&&(l=o.retryLane),ky(i,l)}function OI(i,o){var l=0;switch(i.tag){case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(l=p.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(o),ky(i,l)}var Dy;Dy=function(i,o,l){if(i!==null)if(i.memoizedProps!==o.pendingProps||On.current)Ln=!0;else{if((i.lanes&l)===0&&(o.flags&128)===0)return Ln=!1,EI(i,o,l);Ln=(i.flags&131072)!==0}else Ln=!1,It&&(o.flags&1048576)!==0&&ug(o,Au,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;Bu(i,o),i=o.pendingProps;var p=Wo(o,dn.current);Jo(o,l),p=ud(null,o,h,i,p,l);var y=cd();return o.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,xn(h)?(y=!0,Tu(o)):y=!1,o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,nd(o),p.updater=Uu,o.stateNode=p,p._reactInternals=o,gd(o,h,i,l),o=Ed(null,o,h,!0,y,l)):(o.tag=0,It&&y&&qh(o),In(null,o,p,l),o=o.child),o;case 16:h=o.elementType;e:{switch(Bu(i,o),i=o.pendingProps,p=h._init,h=p(h._payload),o.type=h,p=o.tag=LI(h),i=Cr(h,i),p){case 0:o=vd(null,o,h,i,l);break e;case 1:o=ny(null,o,h,i,l);break e;case 11:o=Jg(null,o,h,i,l);break e;case 14:o=Xg(null,o,h,Cr(h.type,i),l);break e}throw Error(t(306,h,""))}return o;case 0:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Cr(h,p),vd(i,o,h,p,l);case 1:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Cr(h,p),ny(i,o,h,p,l);case 3:e:{if(ry(o),i===null)throw Error(t(387));h=o.pendingProps,y=o.memoizedState,p=y.element,_g(i,o),Nu(o,h,null,l);var w=o.memoizedState;if(h=w.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){p=Zo(Error(t(423)),o),o=iy(i,o,h,l,p);break e}else if(h!==p){p=Zo(Error(t(424)),o),o=iy(i,o,h,l,p);break e}else for(Yn=Yi(o.stateNode.containerInfo.firstChild),Qn=o,It=!0,Rr=null,l=gg(o,null,h,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Go(),h===p){o=_i(i,o,l);break e}In(i,o,h,l)}o=o.child}return o;case 5:return wg(o),i===null&&Qh(o),h=o.type,p=o.pendingProps,y=i!==null?i.memoizedProps:null,w=p.children,Bh(h,p)?w=null:y!==null&&Bh(h,y)&&(o.flags|=32),ty(i,o),In(i,o,w,l),o.child;case 6:return i===null&&Qh(o),null;case 13:return sy(i,o,l);case 4:return rd(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=Qo(o,null,h,l):In(i,o,h,l),o.child;case 11:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Cr(h,p),Jg(i,o,h,p,l);case 7:return In(i,o,o.pendingProps,l),o.child;case 8:return In(i,o,o.pendingProps.children,l),o.child;case 12:return In(i,o,o.pendingProps.children,l),o.child;case 10:e:{if(h=o.type._context,p=o.pendingProps,y=o.memoizedProps,w=p.value,gt(Pu,h._currentValue),h._currentValue=w,y!==null)if(Ar(y.value,w)){if(y.children===p.children&&!On.current){o=_i(i,o,l);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var N=y.dependencies;if(N!==null){w=y.child;for(var L=N.firstContext;L!==null;){if(L.context===h){if(y.tag===1){L=yi(-1,l&-l),L.tag=2;var q=y.updateQueue;if(q!==null){q=q.shared;var ie=q.pending;ie===null?L.next=L:(L.next=ie.next,ie.next=L),q.pending=L}}y.lanes|=l,L=y.alternate,L!==null&&(L.lanes|=l),ed(y.return,l,o),N.lanes|=l;break}L=L.next}}else if(y.tag===10)w=y.type===o.type?null:y.child;else if(y.tag===18){if(w=y.return,w===null)throw Error(t(341));w.lanes|=l,N=w.alternate,N!==null&&(N.lanes|=l),ed(w,l,o),w=y.sibling}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===o){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}In(i,o,p.children,l),o=o.child}return o;case 9:return p=o.type,h=o.pendingProps.children,Jo(o,l),p=lr(p),h=h(p),o.flags|=1,In(i,o,h,l),o.child;case 14:return h=o.type,p=Cr(h,o.pendingProps),p=Cr(h.type,p),Xg(i,o,h,p,l);case 15:return Zg(i,o,o.type,o.pendingProps,l);case 17:return h=o.type,p=o.pendingProps,p=o.elementType===h?p:Cr(h,p),Bu(i,o),o.tag=1,xn(h)?(i=!0,Tu(o)):i=!1,Jo(o,l),Hg(o,h,p),gd(o,h,p,l),Ed(null,o,h,!0,i,l);case 19:return ay(i,o,l);case 22:return ey(i,o,l)}throw Error(t(156,o.tag))};function Ny(i,o){return ut(i,o)}function xI(i,o,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(i,o,l,h){return new xI(i,o,l,h)}function Bd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function LI(i){if(typeof i=="function")return Bd(i)?1:0;if(i!=null){if(i=i.$$typeof,i===b)return 11;if(i===Je)return 14}return 2}function as(i,o){var l=i.alternate;return l===null?(l=hr(i.tag,o,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=o,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,o=i.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function Ju(i,o,l,h,p,y){var w=2;if(h=i,typeof i=="function")Bd(i)&&(w=1);else if(typeof i=="string")w=5;else e:switch(i){case T:return eo(l.children,p,y,o);case A:w=8,p|=8;break;case I:return i=hr(12,l,o,p|2),i.elementType=I,i.lanes=y,i;case k:return i=hr(13,l,o,p),i.elementType=k,i.lanes=y,i;case de:return i=hr(19,l,o,p),i.elementType=de,i.lanes=y,i;case Xe:return Xu(l,p,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case C:w=10;break e;case D:w=9;break e;case b:w=11;break e;case Je:w=14;break e;case ft:w=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=hr(w,l,o,p),o.elementType=i,o.type=h,o.lanes=y,o}function eo(i,o,l,h){return i=hr(7,i,h,o),i.lanes=l,i}function Xu(i,o,l,h){return i=hr(22,i,h,o),i.elementType=Xe,i.lanes=l,i.stateNode={isHidden:!1},i}function jd(i,o,l){return i=hr(6,i,null,o),i.lanes=l,i}function $d(i,o,l){return o=hr(4,i.children!==null?i.children:[],i.key,o),o.lanes=l,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function MI(i,o,l,h,p){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$i(0),this.expirationTimes=$i(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$i(0),this.identifierPrefix=h,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function zd(i,o,l,h,p,y,w,N,L){return i=new MI(i,o,l,N,L),o===1?(o=1,y===!0&&(o|=8)):o=0,y=hr(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},nd(y),i}function VI(i,o,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:te,key:h==null?null:""+h,children:i,containerInfo:o,implementation:l}}function by(i){if(!i)return Xi;i=i._reactInternals;e:{if(ge(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(xn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var l=i.type;if(xn(l))return og(i,l,o)}return o}function Oy(i,o,l,h,p,y,w,N,L){return i=zd(l,h,!0,i,p,y,w,N,L),i.context=by(null),l=i.current,h=Sn(),p=ss(l),y=yi(h,p),y.callback=o??null,ts(l,y,p),i.current.lanes=p,zi(i,p,h),Vn(i,h),i}function Zu(i,o,l,h){var p=o.current,y=Sn(),w=ss(p);return l=by(l),o.context===null?o.context=l:o.pendingContext=l,o=yi(y,w),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=ts(p,o,w),i!==null&&(Dr(i,p,w,y),Du(i,p,w)),w}function ec(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function xy(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<o?l:o}}function Hd(i,o){xy(i,o),(i=i.alternate)&&xy(i,o)}function UI(){return null}var Ly=typeof reportError=="function"?reportError:function(i){console.error(i)};function Wd(i){this._internalRoot=i}tc.prototype.render=Wd.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Zu(i,o,null,null)},tc.prototype.unmount=Wd.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Js(function(){Zu(null,i,null,null)}),o[di]=null}};function tc(i){this._internalRoot=i}tc.prototype.unstable_scheduleHydration=function(i){if(i){var o=tu();i={blockedOn:null,target:i,priority:o};for(var l=0;l<$r.length&&o!==0&&o<$r[l].priority;l++);$r.splice(l,0,i),l===0&&iu(i)}};function qd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function nc(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function My(){}function FI(i,o,l,h,p){if(p){if(typeof h=="function"){var y=h;h=function(){var q=ec(w);y.call(q)}}var w=Oy(o,h,i,0,null,!1,!1,"",My);return i._reactRootContainer=w,i[di]=w.current,$a(i.nodeType===8?i.parentNode:i),Js(),w}for(;p=i.lastChild;)i.removeChild(p);if(typeof h=="function"){var N=h;h=function(){var q=ec(L);N.call(q)}}var L=zd(i,0,!1,null,null,!1,!1,"",My);return i._reactRootContainer=L,i[di]=L.current,$a(i.nodeType===8?i.parentNode:i),Js(function(){Zu(o,L,l,h)}),L}function rc(i,o,l,h,p){var y=l._reactRootContainer;if(y){var w=y;if(typeof p=="function"){var N=p;p=function(){var L=ec(w);N.call(L)}}Zu(o,w,i,p)}else w=FI(l,o,i,p,h);return ec(w)}Zl=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var l=ji(o.pendingLanes);l!==0&&(Hi(o,l|1),Vn(o,qe()),(rt&6)===0&&(na=qe()+500,Zi()))}break;case 13:Js(function(){var h=gi(i,1);if(h!==null){var p=Sn();Dr(h,i,1,p)}}),Hd(i,1)}},Co=function(i){if(i.tag===13){var o=gi(i,134217728);if(o!==null){var l=Sn();Dr(o,i,134217728,l)}Hd(i,134217728)}},eu=function(i){if(i.tag===13){var o=ss(i),l=gi(i,o);if(l!==null){var h=Sn();Dr(l,i,o,h)}Hd(i,o)}},tu=function(){return et},nu=function(i,o){var l=et;try{return et=i,o()}finally{et=l}},oi=function(i,o,l){switch(o){case"input":if(Ns(i,l),o=l.name,l.type==="radio"&&o!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<l.length;o++){var h=l[o];if(h!==i&&h.form===i.form){var p=Eu(h);if(!p)throw Error(t(90));Dt(h),Ns(h,p)}}}break;case"textarea":Cn(i,l);break;case"select":o=l.value,o!=null&&gr(i,!!l.multiple,o,!1)}},Mr=Vd,Vr=Js;var BI={usingClientEntryPoint:!1,Events:[Wa,zo,Eu,zn,xs,Vd]},sl={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jI={bundleType:sl.bundleType,version:sl.version,rendererPackageName:sl.rendererPackageName,rendererConfig:sl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=st(i),i===null?null:i.stateNode},findFiberByHostInstance:sl.findFiberByHostInstance||UI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{lt=ic.inject(jI),Ut=ic}catch{}}return Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BI,Un.createPortal=function(i,o){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qd(o))throw Error(t(200));return VI(i,o,null,l)},Un.createRoot=function(i,o){if(!qd(i))throw Error(t(299));var l=!1,h="",p=Ly;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(p=o.onRecoverableError)),o=zd(i,1,!1,null,null,l,!1,h,p),i[di]=o.current,$a(i.nodeType===8?i.parentNode:i),new Wd(o)},Un.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=st(o),i=i===null?null:i.stateNode,i},Un.flushSync=function(i){return Js(i)},Un.hydrate=function(i,o,l){if(!nc(o))throw Error(t(200));return rc(null,i,o,!0,l)},Un.hydrateRoot=function(i,o,l){if(!qd(i))throw Error(t(405));var h=l!=null&&l.hydratedSources||null,p=!1,y="",w=Ly;if(l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),o=Oy(o,null,i,1,l??null,p,!1,y,w),i[di]=o.current,$a(i),h)for(i=0;i<h.length;i++)l=h[i],p=l._getVersion,p=p(l._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[l,p]:o.mutableSourceEagerHydrationData.push(l,p);return new tc(o)},Un.render=function(i,o,l){if(!nc(o))throw Error(t(200));return rc(null,i,o,!1,l)},Un.unmountComponentAtNode=function(i){if(!nc(i))throw Error(t(40));return i._reactRootContainer?(Js(function(){rc(null,null,i,!1,function(){i._reactRootContainer=null,i[di]=null})}),!0):!1},Un.unstable_batchedUpdates=Vd,Un.unstable_renderSubtreeIntoContainer=function(i,o,l,h){if(!nc(l))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return rc(i,o,l,!1,h)},Un.version="18.3.1-next-f1338f8080-20240426",Un}var Hy;function DE(){if(Hy)return Qd.exports;Hy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qd.exports=YI(),Qd.exports}var Wy;function JI(){if(Wy)return sc;Wy=1;var n=DE();return sc.createRoot=n.createRoot,sc.hydrateRoot=n.hydrateRoot,sc}var XI=JI(),NE=DE();const ZI=kE(NE),eS=PE({__proto__:null,default:ZI},[NE]);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function St(){return St=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},St.apply(this,arguments)}var $t;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})($t||($t={}));const qy="popstate";function tS(n){n===void 0&&(n={});function e(r,s){let{pathname:a,search:u,hash:d}=r.location;return Al("",{pathname:a,search:u,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:co(s)}return rS(e,t,null,n)}function Qe(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ma(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nS(){return Math.random().toString(36).substr(2,8)}function Ky(n,e){return{usr:n.state,key:n.key,idx:e}}function Al(n,e,t,r){return t===void 0&&(t=null),St({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Cs(e):e,{state:t,key:e&&e.key||r||nS()})}function co(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Cs(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function rS(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,u=s.history,d=$t.Pop,f=null,m=_();m==null&&(m=0,u.replaceState(St({},u.state,{idx:m}),""));function _(){return(u.state||{idx:null}).idx}function E(){d=$t.Pop;let V=_(),Q=V==null?null:V-m;m=V,f&&f({action:d,location:M.location,delta:Q})}function S(V,Q){d=$t.Push;let K=Al(M.location,V,Q);m=_()+1;let Y=Ky(K,m),J=M.createHref(K);try{u.pushState(Y,"",J)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;s.location.assign(J)}a&&f&&f({action:d,location:M.location,delta:1})}function P(V,Q){d=$t.Replace;let K=Al(M.location,V,Q);m=_();let Y=Ky(K,m),J=M.createHref(K);u.replaceState(Y,"",J),a&&f&&f({action:d,location:M.location,delta:0})}function x(V){let Q=s.location.origin!=="null"?s.location.origin:s.location.href,K=typeof V=="string"?V:co(V);return K=K.replace(/ $/,"%20"),Qe(Q,"No window.location.(origin|href) available to create URL for href: "+K),new URL(K,Q)}let M={get action(){return d},get location(){return n(s,u)},listen(V){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(qy,E),f=V,()=>{s.removeEventListener(qy,E),f=null}},createHref(V){return e(s,V)},createURL:x,encodeLocation(V){let Q=x(V);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:S,replace:P,go(V){return u.go(V)}};return M}var ht;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(ht||(ht={}));const iS=new Set(["lazy","caseSensitive","path","id","index","children"]);function sS(n){return n.index===!0}function Rc(n,e,t,r){return t===void 0&&(t=[]),r===void 0&&(r={}),n.map((s,a)=>{let u=[...t,String(a)],d=typeof s.id=="string"?s.id:u.join("-");if(Qe(s.index!==!0||!s.children,"Cannot specify children on an index route"),Qe(!r[d],'Found a route id collision on id "'+d+`".  Route id's must be globally unique within Data Router usages`),sS(s)){let f=St({},s,e(s),{id:d});return r[d]=f,f}else{let f=St({},s,e(s),{id:d,children:void 0});return r[d]=f,s.children&&(f.children=Rc(s.children,e,u,r)),f}})}function no(n,e,t){return t===void 0&&(t="/"),gc(n,e,t,!1)}function gc(n,e,t,r){let s=typeof e=="string"?Cs(e):e,a=Sa(s.pathname||"/",t);if(a==null)return null;let u=bE(n);aS(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let m=_S(a);d=gS(u[f],m,r)}return d}function oS(n,e){let{route:t,pathname:r,params:s}=n;return{id:t.id,pathname:r,params:s,data:e[t.id],handle:t.handle}}function bE(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(a,u,d)=>{let f={relativePath:d===void 0?a.path||"":d,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};f.relativePath.startsWith("/")&&(Qe(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let m=Ri([r,f.relativePath]),_=t.concat(f);a.children&&a.children.length>0&&(Qe(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),bE(a.children,e,_,m)),!(a.path==null&&!a.index)&&e.push({path:m,score:pS(m,a.index),routesMeta:_})};return n.forEach((a,u)=>{var d;if(a.path===""||!((d=a.path)!=null&&d.includes("?")))s(a,u);else for(let f of OE(a.path))s(a,u,f)}),e}function OE(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let u=OE(r.join("/")),d=[];return d.push(...u.map(f=>f===""?a:[a,f].join("/"))),s&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function aS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:mS(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const lS=/^:[\w-]+$/,uS=3,cS=2,hS=1,dS=10,fS=-2,Gy=n=>n==="*";function pS(n,e){let t=n.split("/"),r=t.length;return t.some(Gy)&&(r+=fS),e&&(r+=cS),t.filter(s=>!Gy(s)).reduce((s,a)=>s+(lS.test(a)?uS:a===""?hS:dS),r)}function mS(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function gS(n,e,t){t===void 0&&(t=!1);let{routesMeta:r}=n,s={},a="/",u=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,_=a==="/"?e:e.slice(a.length)||"/",E=Qy({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},_),S=f.route;if(!E&&m&&t&&!r[r.length-1].route.index&&(E=Qy({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},_)),!E)return null;Object.assign(s,E.params),u.push({params:s,pathname:Ri([a,E.pathname]),pathnameBase:wS(Ri([a,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(a=Ri([a,E.pathnameBase]))}return u}function Qy(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=yS(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((m,_,E)=>{let{paramName:S,isOptional:P}=_;if(S==="*"){let M=d[E]||"";u=a.slice(0,a.length-M.length).replace(/(.)\/+$/,"$1")}const x=d[E];return P&&!x?m[S]=void 0:m[S]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:u,pattern:n}}function yS(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),ma(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function _S(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ma(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Sa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function vS(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Cs(n):n;return{pathname:t?t.startsWith("/")?t:ES(t,e):e,search:TS(r),hash:IS(s)}}function ES(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Xd(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xE(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function yp(n,e){let t=xE(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function _p(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=Cs(n):(s=St({},n),Qe(!s.pathname||!s.pathname.includes("?"),Xd("?","pathname","search",s)),Qe(!s.pathname||!s.pathname.includes("#"),Xd("#","pathname","hash",s)),Qe(!s.search||!s.search.includes("#"),Xd("#","search","hash",s)));let a=n===""||s.pathname==="",u=a?"/":s.pathname,d;if(u==null)d=t;else{let E=e.length-1;if(!r&&u.startsWith("..")){let S=u.split("/");for(;S[0]==="..";)S.shift(),E-=1;s.pathname=S.join("/")}d=E>=0?e[E]:"/"}let f=vS(s,d),m=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||_)&&(f.pathname+="/"),f}const Ri=n=>n.join("/").replace(/\/\/+/g,"/"),wS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),TS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,IS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class Cc{constructor(e,t,r,s){s===void 0&&(s=!1),this.status=e,this.statusText=t||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Rl(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const LE=["post","put","patch","delete"],SS=new Set(LE),AS=["get",...LE],RS=new Set(AS),CS=new Set([301,302,303,307,308]),PS=new Set([307,308]),Zd={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},kS={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},al={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},vp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DS=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),ME="remix-router-transitions";function NS(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!t;Qe(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(n.mapRouteProperties)s=n.mapRouteProperties;else if(n.detectErrorBoundary){let O=n.detectErrorBoundary;s=B=>({hasErrorBoundary:O(B)})}else s=DS;let a={},u=Rc(n.routes,s,void 0,a),d,f=n.basename||"/",m=n.dataStrategy||LS,_=n.patchRoutesOnNavigation,E=St({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),S=null,P=new Set,x=null,M=null,V=null,Q=n.hydrationData!=null,K=no(u,n.history.location,f),Y=!1,J=null;if(K==null&&!_){let O=Fn(404,{pathname:n.history.location.pathname}),{matches:B,route:W}=o_(u);K=B,J={[W.id]:O}}K&&!n.hydrationData&&Vr(K,u,n.history.location.pathname).active&&(K=null);let fe;if(K)if(K.some(O=>O.route.lazy))fe=!1;else if(!K.some(O=>O.route.loader))fe=!0;else if(E.v7_partialHydration){let O=n.hydrationData?n.hydrationData.loaderData:null,B=n.hydrationData?n.hydrationData.errors:null;if(B){let W=K.findIndex(ne=>B[ne.route.id]!==void 0);fe=K.slice(0,W+1).every(ne=>!Bf(ne.route,O,B))}else fe=K.every(W=>!Bf(W.route,O,B))}else fe=n.hydrationData!=null;else if(fe=!1,K=[],E.v7_partialHydration){let O=Vr(null,u,n.history.location.pathname);O.active&&O.matches&&(Y=!0,K=O.matches)}let te,T={historyAction:n.history.action,location:n.history.location,matches:K,initialized:fe,navigation:Zd,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||J,fetchers:new Map,blockers:new Map},A=$t.Pop,I=!1,C,D=!1,b=new Map,k=null,de=!1,Je=!1,ft=[],Xe=new Set,se=new Map,Re=0,he=-1,F=new Map,X=new Set,_e=new Map,Le=new Map,Pe=new Set,je=new Map,Oe=new Map,Ve;function Ze(){if(S=n.history.listen(O=>{let{action:B,location:W,delta:ne}=O;if(Ve){Ve(),Ve=void 0;return}ma(Oe.size===0||ne!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ce=oi({currentLocation:T.location,nextLocation:W,historyAction:B});if(ce&&ne!=null){let Ee=new Promise(De=>{Ve=De});n.history.go(ne*-1),vr(ce,{state:"blocked",location:W,proceed(){vr(ce,{state:"proceeding",proceed:void 0,reset:void 0,location:W}),Ee.then(()=>n.history.go(ne))},reset(){let De=new Map(T.blockers);De.set(ce,al),Dt({blockers:De})}});return}return $n(B,W)}),t){QS(e,b);let O=()=>YS(e,b);e.addEventListener("pagehide",O),k=()=>e.removeEventListener("pagehide",O)}return T.initialized||$n($t.Pop,T.location,{initialHydration:!0}),te}function wt(){S&&S(),k&&k(),P.clear(),C&&C.abort(),T.fetchers.forEach((O,B)=>tr(B)),T.blockers.forEach((O,B)=>Lr(B))}function pr(O){return P.add(O),()=>P.delete(O)}function Dt(O,B){B===void 0&&(B={}),T=St({},T,O);let W=[],ne=[];E.v7_fetcherPersist&&T.fetchers.forEach((ce,Ee)=>{ce.state==="idle"&&(Pe.has(Ee)?ne.push(Ee):W.push(Ee))}),Pe.forEach(ce=>{!T.fetchers.has(ce)&&!se.has(ce)&&ne.push(ce)}),[...P].forEach(ce=>ce(T,{deletedFetchers:ne,viewTransitionOpts:B.viewTransitionOpts,flushSync:B.flushSync===!0})),E.v7_fetcherPersist?(W.forEach(ce=>T.fetchers.delete(ce)),ne.forEach(ce=>tr(ce))):ne.forEach(ce=>Pe.delete(ce))}function En(O,B,W){var ne,ce;let{flushSync:Ee}=W===void 0?{}:W,De=T.actionData!=null&&T.navigation.formMethod!=null&&Nr(T.navigation.formMethod)&&T.navigation.state==="loading"&&((ne=O.state)==null?void 0:ne._isRedirect)!==!0,we;B.actionData?Object.keys(B.actionData).length>0?we=B.actionData:we=null:De?we=T.actionData:we=null;let ve=B.loaderData?i_(T.loaderData,B.loaderData,B.matches||[],B.errors):T.loaderData,me=T.blockers;me.size>0&&(me=new Map(me),me.forEach((Ue,bt)=>me.set(bt,al)));let ge=I===!0||T.navigation.formMethod!=null&&Nr(T.navigation.formMethod)&&((ce=O.state)==null?void 0:ce._isRedirect)!==!0;d&&(u=d,d=void 0),de||A===$t.Pop||(A===$t.Push?n.history.push(O,O.state):A===$t.Replace&&n.history.replace(O,O.state));let xe;if(A===$t.Pop){let Ue=b.get(T.location.pathname);Ue&&Ue.has(O.pathname)?xe={currentLocation:T.location,nextLocation:O}:b.has(O.pathname)&&(xe={currentLocation:O,nextLocation:T.location})}else if(D){let Ue=b.get(T.location.pathname);Ue?Ue.add(O.pathname):(Ue=new Set([O.pathname]),b.set(T.location.pathname,Ue)),xe={currentLocation:T.location,nextLocation:O}}Dt(St({},B,{actionData:we,loaderData:ve,historyAction:A,location:O,initialized:!0,navigation:Zd,revalidation:"idle",restoreScrollPosition:Mr(O,B.matches||T.matches),preventScrollReset:ge,blockers:me}),{viewTransitionOpts:xe,flushSync:Ee===!0}),A=$t.Pop,I=!1,D=!1,de=!1,Je=!1,ft=[]}async function xr(O,B){if(typeof O=="number"){n.history.go(O);return}let W=Ff(T.location,T.matches,f,E.v7_prependBasename,O,E.v7_relativeSplatPath,B?.fromRouteId,B?.relative),{path:ne,submission:ce,error:Ee}=Yy(E.v7_normalizeFormMethod,!1,W,B),De=T.location,we=Al(T.location,ne,B&&B.state);we=St({},we,n.history.encodeLocation(we));let ve=B&&B.replace!=null?B.replace:void 0,me=$t.Push;ve===!0?me=$t.Replace:ve===!1||ce!=null&&Nr(ce.formMethod)&&ce.formAction===T.location.pathname+T.location.search&&(me=$t.Replace);let ge=B&&"preventScrollReset"in B?B.preventScrollReset===!0:void 0,xe=(B&&B.flushSync)===!0,Ue=oi({currentLocation:De,nextLocation:we,historyAction:me});if(Ue){vr(Ue,{state:"blocked",location:we,proceed(){vr(Ue,{state:"proceeding",proceed:void 0,reset:void 0,location:we}),xr(O,B)},reset(){let bt=new Map(T.blockers);bt.set(Ue,al),Dt({blockers:bt})}});return}return await $n(me,we,{submission:ce,pendingError:Ee,preventScrollReset:ge,replace:B&&B.replace,enableViewTransition:B&&B.viewTransition,flushSync:xe})}function xi(){if(At(),Dt({revalidation:"loading"}),T.navigation.state!=="submitting"){if(T.navigation.state==="idle"){$n(T.historyAction,T.location,{startUninterruptedRevalidation:!0});return}$n(A||T.historyAction,T.navigation.location,{overrideNavigation:T.navigation,enableViewTransition:D===!0})}}async function $n(O,B,W){C&&C.abort(),C=null,A=O,de=(W&&W.startUninterruptedRevalidation)===!0,xs(T.location,T.matches),I=(W&&W.preventScrollReset)===!0,D=(W&&W.enableViewTransition)===!0;let ne=d||u,ce=W&&W.overrideNavigation,Ee=W!=null&&W.initialHydration&&T.matches&&T.matches.length>0&&!Y?T.matches:no(ne,B,f),De=(W&&W.flushSync)===!0;if(Ee&&T.initialized&&!Je&&jS(T.location,B)&&!(W&&W.submission&&Nr(W.submission.formMethod))){En(B,{matches:Ee},{flushSync:De});return}let we=Vr(Ee,ne,B.pathname);if(we.active&&we.matches&&(Ee=we.matches),!Ee){let{error:st,notFoundMatches:He,route:ut}=cn(B.pathname);En(B,{matches:He,loaderData:{},errors:{[ut.id]:st}},{flushSync:De});return}C=new AbortController;let ve=ia(n.history,B,C.signal,W&&W.submission),me;if(W&&W.pendingError)me=[ro(Ee).route.id,{type:ht.error,error:W.pendingError}];else if(W&&W.submission&&Nr(W.submission.formMethod)){let st=await Ns(ve,B,W.submission,Ee,we.active,{replace:W.replace,flushSync:De});if(st.shortCircuited)return;if(st.pendingActionResult){let[He,ut]=st.pendingActionResult;if(Xn(ut)&&Rl(ut.error)&&ut.error.status===404){C=null,En(B,{matches:st.matches,loaderData:{},errors:{[He]:ut.error}});return}}Ee=st.matches||Ee,me=st.pendingActionResult,ce=ef(B,W.submission),De=!1,we.active=!1,ve=ia(n.history,ve.url,ve.signal)}let{shortCircuited:ge,matches:xe,loaderData:Ue,errors:bt}=await Io(ve,B,Ee,we.active,ce,W&&W.submission,W&&W.fetcherSubmission,W&&W.replace,W&&W.initialHydration===!0,De,me);ge||(C=null,En(B,St({matches:xe||Ee},s_(me),{loaderData:Ue,errors:bt})))}async function Ns(O,B,W,ne,ce,Ee){Ee===void 0&&(Ee={}),At();let De=KS(B,W);if(Dt({navigation:De},{flushSync:Ee.flushSync===!0}),ce){let me=await Dn(ne,B.pathname,O.signal);if(me.type==="aborted")return{shortCircuited:!0};if(me.type==="error"){let ge=ro(me.partialMatches).route.id;return{matches:me.partialMatches,pendingActionResult:[ge,{type:ht.error,error:me.error}]}}else if(me.matches)ne=me.matches;else{let{notFoundMatches:ge,error:xe,route:Ue}=cn(B.pathname);return{matches:ge,pendingActionResult:[Ue.id,{type:ht.error,error:xe}]}}}let we,ve=fl(ne,B);if(!ve.route.action&&!ve.route.lazy)we={type:ht.error,error:Fn(405,{method:O.method,pathname:B.pathname,routeId:ve.route.id})};else if(we=(await yr("action",T,O,[ve],ne,null))[ve.route.id],O.signal.aborted)return{shortCircuited:!0};if(io(we)){let me;return Ee&&Ee.replace!=null?me=Ee.replace:me=t_(we.response.headers.get("Location"),new URL(O.url),f)===T.location.pathname+T.location.search,await Cn(O,we,!0,{submission:W,replace:me}),{shortCircuited:!0}}if(_s(we))throw Fn(400,{type:"defer-action"});if(Xn(we)){let me=ro(ne,ve.route.id);return(Ee&&Ee.replace)!==!0&&(A=$t.Push),{matches:ne,pendingActionResult:[me.route.id,we]}}return{matches:ne,pendingActionResult:[ve.route.id,we]}}async function Io(O,B,W,ne,ce,Ee,De,we,ve,me,ge){let xe=ce||ef(B,Ee),Ue=Ee||De||l_(xe),bt=!de&&(!E.v7_partialHydration||!ve);if(ne){if(bt){let lt=ii(ge);Dt(St({navigation:xe},lt!==void 0?{actionData:lt}:{}),{flushSync:me})}let Ke=await Dn(W,B.pathname,O.signal);if(Ke.type==="aborted")return{shortCircuited:!0};if(Ke.type==="error"){let lt=ro(Ke.partialMatches).route.id;return{matches:Ke.partialMatches,loaderData:{},errors:{[lt]:Ke.error}}}else if(Ke.matches)W=Ke.matches;else{let{error:lt,notFoundMatches:Ut,route:Br}=cn(B.pathname);return{matches:Ut,loaderData:{},errors:{[Br.id]:lt}}}}let st=d||u,[He,ut]=Xy(n.history,T,W,Ue,B,E.v7_partialHydration&&ve===!0,E.v7_skipActionErrorRevalidation,Je,ft,Xe,Pe,_e,X,st,f,ge);if(kn(Ke=>!(W&&W.some(lt=>lt.route.id===Ke))||He&&He.some(lt=>lt.route.id===Ke)),he=++Re,He.length===0&&ut.length===0){let Ke=Vi();return En(B,St({matches:W,loaderData:{},errors:ge&&Xn(ge[1])?{[ge[0]]:ge[1].error}:null},s_(ge),Ke?{fetchers:new Map(T.fetchers)}:{}),{flushSync:me}),{shortCircuited:!0}}if(bt){let Ke={};if(!ne){Ke.navigation=xe;let lt=ii(ge);lt!==void 0&&(Ke.actionData=lt)}ut.length>0&&(Ke.fetchers=mr(ut)),Dt(Ke,{flushSync:me})}ut.forEach(Ke=>{Pn(Ke.key),Ke.controller&&se.set(Ke.key,Ke.controller)});let nr=()=>ut.forEach(Ke=>Pn(Ke.key));C&&C.signal.addEventListener("abort",nr);let{loaderResults:Ur,fetcherResults:Hn}=await Nt(T,W,He,ut,O);if(O.signal.aborted)return{shortCircuited:!0};C&&C.signal.removeEventListener("abort",nr),ut.forEach(Ke=>se.delete(Ke.key));let qe=oc(Ur);if(qe)return await Cn(O,qe.result,!0,{replace:we}),{shortCircuited:!0};if(qe=oc(Hn),qe)return X.add(qe.key),await Cn(O,qe.result,!0,{replace:we}),{shortCircuited:!0};let{loaderData:Bi,errors:Wn}=r_(T,W,Ur,ge,ut,Hn,je);je.forEach((Ke,lt)=>{Ke.subscribe(Ut=>{(Ut||Ke.done)&&je.delete(lt)})}),E.v7_partialHydration&&ve&&T.errors&&(Wn=St({},T.errors,Wn));let hn=Vi(),en=Ui(he),Fr=hn||en||ut.length>0;return St({matches:W,loaderData:Bi,errors:Wn},Fr?{fetchers:new Map(T.fetchers)}:{})}function ii(O){if(O&&!Xn(O[1]))return{[O[0]]:O[1].data};if(T.actionData)return Object.keys(T.actionData).length===0?null:T.actionData}function mr(O){return O.forEach(B=>{let W=T.fetchers.get(B.key),ne=ll(void 0,W?W.data:void 0);T.fetchers.set(B.key,ne)}),new Map(T.fetchers)}function gr(O,B,W,ne){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Pn(O);let ce=(ne&&ne.flushSync)===!0,Ee=d||u,De=Ff(T.location,T.matches,f,E.v7_prependBasename,W,E.v7_relativeSplatPath,B,ne?.relative),we=no(Ee,De,f),ve=Vr(we,Ee,De);if(ve.active&&ve.matches&&(we=ve.matches),!we){wn(O,B,Fn(404,{pathname:De}),{flushSync:ce});return}let{path:me,submission:ge,error:xe}=Yy(E.v7_normalizeFormMethod,!0,De,ne);if(xe){wn(O,B,xe,{flushSync:ce});return}let Ue=fl(we,me),bt=(ne&&ne.preventScrollReset)===!0;if(ge&&Nr(ge.formMethod)){bs(O,B,me,Ue,we,ve.active,ce,bt,ge);return}_e.set(O,{routeId:B,path:me}),Li(O,B,me,Ue,we,ve.active,ce,bt,ge)}async function bs(O,B,W,ne,ce,Ee,De,we,ve){At(),_e.delete(O);function me(Ge){if(!Ge.route.action&&!Ge.route.lazy){let rr=Fn(405,{method:ve.formMethod,pathname:W,routeId:B});return wn(O,B,rr,{flushSync:De}),!0}return!1}if(!Ee&&me(ne))return;let ge=T.fetchers.get(O);Gt(O,GS(ve,ge),{flushSync:De});let xe=new AbortController,Ue=ia(n.history,W,xe.signal,ve);if(Ee){let Ge=await Dn(ce,new URL(Ue.url).pathname,Ue.signal,O);if(Ge.type==="aborted")return;if(Ge.type==="error"){wn(O,B,Ge.error,{flushSync:De});return}else if(Ge.matches){if(ce=Ge.matches,ne=fl(ce,W),me(ne))return}else{wn(O,B,Fn(404,{pathname:W}),{flushSync:De});return}}se.set(O,xe);let bt=Re,He=(await yr("action",T,Ue,[ne],ce,O))[ne.route.id];if(Ue.signal.aborted){se.get(O)===xe&&se.delete(O);return}if(E.v7_fetcherPersist&&Pe.has(O)){if(io(He)||Xn(He)){Gt(O,hs(void 0));return}}else{if(io(He))if(se.delete(O),he>bt){Gt(O,hs(void 0));return}else return X.add(O),Gt(O,ll(ve)),Cn(Ue,He,!1,{fetcherSubmission:ve,preventScrollReset:we});if(Xn(He)){wn(O,B,He.error);return}}if(_s(He))throw Fn(400,{type:"defer-action"});let ut=T.navigation.location||T.location,nr=ia(n.history,ut,xe.signal),Ur=d||u,Hn=T.navigation.state!=="idle"?no(Ur,T.navigation.location,f):T.matches;Qe(Hn,"Didn't find any matches after fetcher action");let qe=++Re;F.set(O,qe);let Bi=ll(ve,He.data);T.fetchers.set(O,Bi);let[Wn,hn]=Xy(n.history,T,Hn,ve,ut,!1,E.v7_skipActionErrorRevalidation,Je,ft,Xe,Pe,_e,X,Ur,f,[ne.route.id,He]);hn.filter(Ge=>Ge.key!==O).forEach(Ge=>{let rr=Ge.key,Ms=T.fetchers.get(rr),So=ll(void 0,Ms?Ms.data:void 0);T.fetchers.set(rr,So),Pn(rr),Ge.controller&&se.set(rr,Ge.controller)}),Dt({fetchers:new Map(T.fetchers)});let en=()=>hn.forEach(Ge=>Pn(Ge.key));xe.signal.addEventListener("abort",en);let{loaderResults:Fr,fetcherResults:Ke}=await Nt(T,Hn,Wn,hn,nr);if(xe.signal.aborted)return;xe.signal.removeEventListener("abort",en),F.delete(O),se.delete(O),hn.forEach(Ge=>se.delete(Ge.key));let lt=oc(Fr);if(lt)return Cn(nr,lt.result,!1,{preventScrollReset:we});if(lt=oc(Ke),lt)return X.add(lt.key),Cn(nr,lt.result,!1,{preventScrollReset:we});let{loaderData:Ut,errors:Br}=r_(T,Hn,Fr,void 0,hn,Ke,je);if(T.fetchers.has(O)){let Ge=hs(He.data);T.fetchers.set(O,Ge)}Ui(qe),T.navigation.state==="loading"&&qe>he?(Qe(A,"Expected pending action"),C&&C.abort(),En(T.navigation.location,{matches:Hn,loaderData:Ut,errors:Br,fetchers:new Map(T.fetchers)})):(Dt({errors:Br,loaderData:i_(T.loaderData,Ut,Hn,Br),fetchers:new Map(T.fetchers)}),Je=!1)}async function Li(O,B,W,ne,ce,Ee,De,we,ve){let me=T.fetchers.get(O);Gt(O,ll(ve,me?me.data:void 0),{flushSync:De});let ge=new AbortController,xe=ia(n.history,W,ge.signal);if(Ee){let He=await Dn(ce,new URL(xe.url).pathname,xe.signal,O);if(He.type==="aborted")return;if(He.type==="error"){wn(O,B,He.error,{flushSync:De});return}else if(He.matches)ce=He.matches,ne=fl(ce,W);else{wn(O,B,Fn(404,{pathname:W}),{flushSync:De});return}}se.set(O,ge);let Ue=Re,st=(await yr("loader",T,xe,[ne],ce,O))[ne.route.id];if(_s(st)&&(st=await Ep(st,xe.signal,!0)||st),se.get(O)===ge&&se.delete(O),!xe.signal.aborted){if(Pe.has(O)){Gt(O,hs(void 0));return}if(io(st))if(he>Ue){Gt(O,hs(void 0));return}else{X.add(O),await Cn(xe,st,!1,{preventScrollReset:we});return}if(Xn(st)){wn(O,B,st.error);return}Qe(!_s(st),"Unhandled fetcher deferred data"),Gt(O,hs(st.data))}}async function Cn(O,B,W,ne){let{submission:ce,fetcherSubmission:Ee,preventScrollReset:De,replace:we}=ne===void 0?{}:ne;B.response.headers.has("X-Remix-Revalidate")&&(Je=!0);let ve=B.response.headers.get("Location");Qe(ve,"Expected a Location header on the redirect Response"),ve=t_(ve,new URL(O.url),f);let me=Al(T.location,ve,{_isRedirect:!0});if(t){let He=!1;if(B.response.headers.has("X-Remix-Reload-Document"))He=!0;else if(vp.test(ve)){const ut=n.history.createURL(ve);He=ut.origin!==e.location.origin||Sa(ut.pathname,f)==null}if(He){we?e.location.replace(ve):e.location.assign(ve);return}}C=null;let ge=we===!0||B.response.headers.has("X-Remix-Replace")?$t.Replace:$t.Push,{formMethod:xe,formAction:Ue,formEncType:bt}=T.navigation;!ce&&!Ee&&xe&&Ue&&bt&&(ce=l_(T.navigation));let st=ce||Ee;if(PS.has(B.response.status)&&st&&Nr(st.formMethod))await $n(ge,me,{submission:St({},st,{formAction:ve}),preventScrollReset:De||I,enableViewTransition:W?D:void 0});else{let He=ef(me,ce);await $n(ge,me,{overrideNavigation:He,fetcherSubmission:Ee,preventScrollReset:De||I,enableViewTransition:W?D:void 0})}}async function yr(O,B,W,ne,ce,Ee){let De,we={};try{De=await MS(m,O,B,W,ne,ce,Ee,a,s)}catch(ve){return ne.forEach(me=>{we[me.route.id]={type:ht.error,error:ve}}),we}for(let[ve,me]of Object.entries(De))if($S(me)){let ge=me.result;we[ve]={type:ht.redirect,response:FS(ge,W,ve,ce,f,E.v7_relativeSplatPath)}}else we[ve]=await US(me);return we}async function Nt(O,B,W,ne,ce){let Ee=O.matches,De=yr("loader",O,ce,W,B,null),we=Promise.all(ne.map(async ge=>{if(ge.matches&&ge.match&&ge.controller){let Ue=(await yr("loader",O,ia(n.history,ge.path,ge.controller.signal),[ge.match],ge.matches,ge.key))[ge.match.route.id];return{[ge.key]:Ue}}else return Promise.resolve({[ge.key]:{type:ht.error,error:Fn(404,{pathname:ge.path})}})})),ve=await De,me=(await we).reduce((ge,xe)=>Object.assign(ge,xe),{});return await Promise.all([WS(B,ve,ce.signal,Ee,O.loaderData),qS(B,me,ne)]),{loaderResults:ve,fetcherResults:me}}function At(){Je=!0,ft.push(...kn()),_e.forEach((O,B)=>{se.has(B)&&Xe.add(B),Pn(B)})}function Gt(O,B,W){W===void 0&&(W={}),T.fetchers.set(O,B),Dt({fetchers:new Map(T.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function wn(O,B,W,ne){ne===void 0&&(ne={});let ce=ro(T.matches,B);tr(O),Dt({errors:{[ce.route.id]:W},fetchers:new Map(T.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function _r(O){return Le.set(O,(Le.get(O)||0)+1),Pe.has(O)&&Pe.delete(O),T.fetchers.get(O)||kS}function tr(O){let B=T.fetchers.get(O);se.has(O)&&!(B&&B.state==="loading"&&F.has(O))&&Pn(O),_e.delete(O),F.delete(O),X.delete(O),E.v7_fetcherPersist&&Pe.delete(O),Xe.delete(O),T.fetchers.delete(O)}function si(O){let B=(Le.get(O)||0)-1;B<=0?(Le.delete(O),Pe.add(O),E.v7_fetcherPersist||tr(O)):Le.set(O,B),Dt({fetchers:new Map(T.fetchers)})}function Pn(O){let B=se.get(O);B&&(B.abort(),se.delete(O))}function Mi(O){for(let B of O){let W=_r(B),ne=hs(W.data);T.fetchers.set(B,ne)}}function Vi(){let O=[],B=!1;for(let W of X){let ne=T.fetchers.get(W);Qe(ne,"Expected fetcher: "+W),ne.state==="loading"&&(X.delete(W),O.push(W),B=!0)}return Mi(O),B}function Ui(O){let B=[];for(let[W,ne]of F)if(ne<O){let ce=T.fetchers.get(W);Qe(ce,"Expected fetcher: "+W),ce.state==="loading"&&(Pn(W),F.delete(W),B.push(W))}return Mi(B),B.length>0}function Os(O,B){let W=T.blockers.get(O)||al;return Oe.get(O)!==B&&Oe.set(O,B),W}function Lr(O){T.blockers.delete(O),Oe.delete(O)}function vr(O,B){let W=T.blockers.get(O)||al;Qe(W.state==="unblocked"&&B.state==="blocked"||W.state==="blocked"&&B.state==="blocked"||W.state==="blocked"&&B.state==="proceeding"||W.state==="blocked"&&B.state==="unblocked"||W.state==="proceeding"&&B.state==="unblocked","Invalid blocker state transition: "+W.state+" -> "+B.state);let ne=new Map(T.blockers);ne.set(O,B),Dt({blockers:ne})}function oi(O){let{currentLocation:B,nextLocation:W,historyAction:ne}=O;if(Oe.size===0)return;Oe.size>1&&ma(!1,"A router only supports one blocker at a time");let ce=Array.from(Oe.entries()),[Ee,De]=ce[ce.length-1],we=T.blockers.get(Ee);if(!(we&&we.state==="proceeding")&&De({currentLocation:B,nextLocation:W,historyAction:ne}))return Ee}function cn(O){let B=Fn(404,{pathname:O}),W=d||u,{matches:ne,route:ce}=o_(W);return kn(),{notFoundMatches:ne,route:ce,error:B}}function kn(O){let B=[];return je.forEach((W,ne)=>{(!O||O(ne))&&(W.cancel(),B.push(ne),je.delete(ne))}),B}function Fi(O,B,W){if(x=O,V=B,M=W||null,!Q&&T.navigation===Zd){Q=!0;let ne=Mr(T.location,T.matches);ne!=null&&Dt({restoreScrollPosition:ne})}return()=>{x=null,V=null,M=null}}function zn(O,B){return M&&M(O,B.map(ne=>oS(ne,T.loaderData)))||O.key}function xs(O,B){if(x&&V){let W=zn(O,B);x[W]=V()}}function Mr(O,B){if(x){let W=zn(O,B),ne=x[W];if(typeof ne=="number")return ne}return null}function Vr(O,B,W){if(_)if(O){if(Object.keys(O[0].params).length>0)return{active:!0,matches:gc(B,W,f,!0)}}else return{active:!0,matches:gc(B,W,f,!0)||[]};return{active:!1,matches:null}}async function Dn(O,B,W,ne){if(!_)return{type:"success",matches:O};let ce=O;for(;;){let Ee=d==null,De=d||u,we=a;try{await _({signal:W,path:B,matches:ce,fetcherKey:ne,patch:(ge,xe)=>{W.aborted||e_(ge,xe,De,we,s)}})}catch(ge){return{type:"error",error:ge,partialMatches:ce}}finally{Ee&&!W.aborted&&(u=[...u])}if(W.aborted)return{type:"aborted"};let ve=no(De,B,f);if(ve)return{type:"success",matches:ve};let me=gc(De,B,f,!0);if(!me||ce.length===me.length&&ce.every((ge,xe)=>ge.route.id===me[xe].route.id))return{type:"success",matches:null};ce=me}}function Ls(O){a={},d=Rc(O,s,void 0,a)}function Rt(O,B){let W=d==null;e_(O,B,d||u,a,s),W&&(u=[...u],Dt({}))}return te={get basename(){return f},get future(){return E},get state(){return T},get routes(){return u},get window(){return e},initialize:Ze,subscribe:pr,enableScrollRestoration:Fi,navigate:xr,fetch:gr,revalidate:xi,createHref:O=>n.history.createHref(O),encodeLocation:O=>n.history.encodeLocation(O),getFetcher:_r,deleteFetcher:si,dispose:wt,getBlocker:Os,deleteBlocker:Lr,patchRoutes:Rt,_internalFetchControllers:se,_internalActiveDeferreds:je,_internalSetRoutes:Ls},te}function bS(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Ff(n,e,t,r,s,a,u,d){let f,m;if(u){f=[];for(let E of e)if(f.push(E),E.route.id===u){m=E;break}}else f=e,m=e[e.length-1];let _=_p(s||".",yp(f,a),Sa(n.pathname,t)||n.pathname,d==="path");if(s==null&&(_.search=n.search,_.hash=n.hash),(s==null||s===""||s===".")&&m){let E=wp(_.search);if(m.route.index&&!E)_.search=_.search?_.search.replace(/^\?/,"?index&"):"?index";else if(!m.route.index&&E){let S=new URLSearchParams(_.search),P=S.getAll("index");S.delete("index"),P.filter(M=>M).forEach(M=>S.append("index",M));let x=S.toString();_.search=x?"?"+x:""}}return r&&t!=="/"&&(_.pathname=_.pathname==="/"?t:Ri([t,_.pathname])),co(_)}function Yy(n,e,t,r){if(!r||!bS(r))return{path:t};if(r.formMethod&&!HS(r.formMethod))return{path:t,error:Fn(405,{method:r.formMethod})};let s=()=>({path:t,error:Fn(400,{type:"invalid-body"})}),a=r.formMethod||"get",u=n?a.toUpperCase():a.toLowerCase(),d=FE(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Nr(u))return s();let S=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((P,x)=>{let[M,V]=x;return""+P+M+"="+V+`
`},""):String(r.body);return{path:t,submission:{formMethod:u,formAction:d,formEncType:r.formEncType,formData:void 0,json:void 0,text:S}}}else if(r.formEncType==="application/json"){if(!Nr(u))return s();try{let S=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:u,formAction:d,formEncType:r.formEncType,formData:void 0,json:S,text:void 0}}}catch{return s()}}}Qe(typeof FormData=="function","FormData is not available in this environment");let f,m;if(r.formData)f=jf(r.formData),m=r.formData;else if(r.body instanceof FormData)f=jf(r.body),m=r.body;else if(r.body instanceof URLSearchParams)f=r.body,m=n_(f);else if(r.body==null)f=new URLSearchParams,m=new FormData;else try{f=new URLSearchParams(r.body),m=n_(f)}catch{return s()}let _={formMethod:u,formAction:d,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(Nr(_.formMethod))return{path:t,submission:_};let E=Cs(t);return e&&E.search&&wp(E.search)&&f.append("index",""),E.search="?"+f,{path:co(E),submission:_}}function Jy(n,e,t){t===void 0&&(t=!1);let r=n.findIndex(s=>s.route.id===e);return r>=0?n.slice(0,t?r+1:r):n}function Xy(n,e,t,r,s,a,u,d,f,m,_,E,S,P,x,M){let V=M?Xn(M[1])?M[1].error:M[1].data:void 0,Q=n.createURL(e.location),K=n.createURL(s),Y=t;a&&e.errors?Y=Jy(t,Object.keys(e.errors)[0],!0):M&&Xn(M[1])&&(Y=Jy(t,M[0]));let J=M?M[1].statusCode:void 0,fe=u&&J&&J>=400,te=Y.filter((A,I)=>{let{route:C}=A;if(C.lazy)return!0;if(C.loader==null)return!1;if(a)return Bf(C,e.loaderData,e.errors);if(OS(e.loaderData,e.matches[I],A)||f.some(k=>k===A.route.id))return!0;let D=e.matches[I],b=A;return Zy(A,St({currentUrl:Q,currentParams:D.params,nextUrl:K,nextParams:b.params},r,{actionResult:V,actionStatus:J,defaultShouldRevalidate:fe?!1:d||Q.pathname+Q.search===K.pathname+K.search||Q.search!==K.search||VE(D,b)}))}),T=[];return E.forEach((A,I)=>{if(a||!t.some(de=>de.route.id===A.routeId)||_.has(I))return;let C=no(P,A.path,x);if(!C){T.push({key:I,routeId:A.routeId,path:A.path,matches:null,match:null,controller:null});return}let D=e.fetchers.get(I),b=fl(C,A.path),k=!1;S.has(I)?k=!1:m.has(I)?(m.delete(I),k=!0):D&&D.state!=="idle"&&D.data===void 0?k=d:k=Zy(b,St({currentUrl:Q,currentParams:e.matches[e.matches.length-1].params,nextUrl:K,nextParams:t[t.length-1].params},r,{actionResult:V,actionStatus:J,defaultShouldRevalidate:fe?!1:d})),k&&T.push({key:I,routeId:A.routeId,path:A.path,matches:C,match:b,controller:new AbortController})}),[te,T]}function Bf(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let r=e!=null&&e[n.id]!==void 0,s=t!=null&&t[n.id]!==void 0;return!r&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!s}function OS(n,e,t){let r=!e||t.route.id!==e.route.id,s=n[t.route.id]===void 0;return r||s}function VE(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Zy(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function e_(n,e,t,r,s){var a;let u;if(n){let m=r[n];Qe(m,"No route found to patch children into: routeId = "+n),m.children||(m.children=[]),u=m.children}else u=t;let d=e.filter(m=>!u.some(_=>UE(m,_))),f=Rc(d,s,[n||"_","patch",String(((a=u)==null?void 0:a.length)||"0")],r);u.push(...f)}function UE(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var s;return(s=e.children)==null?void 0:s.some(a=>UE(t,a))}):!1}async function xS(n,e,t){if(!n.lazy)return;let r=await n.lazy();if(!n.lazy)return;let s=t[n.id];Qe(s,"No route found in manifest");let a={};for(let u in r){let f=s[u]!==void 0&&u!=="hasErrorBoundary";ma(!f,'Route "'+s.id+'" has a static property "'+u+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+u+'" will be ignored.')),!f&&!iS.has(u)&&(a[u]=r[u])}Object.assign(s,a),Object.assign(s,St({},e(s),{lazy:void 0}))}async function LS(n){let{matches:e}=n,t=e.filter(s=>s.shouldLoad);return(await Promise.all(t.map(s=>s.resolve()))).reduce((s,a,u)=>Object.assign(s,{[t[u].route.id]:a}),{})}async function MS(n,e,t,r,s,a,u,d,f,m){let _=a.map(P=>P.route.lazy?xS(P.route,f,d):void 0),E=a.map((P,x)=>{let M=_[x],V=s.some(K=>K.route.id===P.route.id);return St({},P,{shouldLoad:V,resolve:async K=>(K&&r.method==="GET"&&(P.route.lazy||P.route.loader)&&(V=!0),V?VS(e,r,P,M,K,m):Promise.resolve({type:ht.data,result:void 0}))})}),S=await n({matches:E,request:r,params:a[0].params,fetcherKey:u,context:m});try{await Promise.all(_)}catch{}return S}async function VS(n,e,t,r,s,a){let u,d,f=m=>{let _,E=new Promise((x,M)=>_=M);d=()=>_(),e.signal.addEventListener("abort",d);let S=x=>typeof m!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):m({request:e,params:t.params,context:a},...x!==void 0?[x]:[]),P=(async()=>{try{return{type:"data",result:await(s?s(M=>S(M)):S())}}catch(x){return{type:"error",result:x}}})();return Promise.race([P,E])};try{let m=t.route[n];if(r)if(m){let _,[E]=await Promise.all([f(m).catch(S=>{_=S}),r]);if(_!==void 0)throw _;u=E}else if(await r,m=t.route[n],m)u=await f(m);else if(n==="action"){let _=new URL(e.url),E=_.pathname+_.search;throw Fn(405,{method:e.method,pathname:E,routeId:t.route.id})}else return{type:ht.data,result:void 0};else if(m)u=await f(m);else{let _=new URL(e.url),E=_.pathname+_.search;throw Fn(404,{pathname:E})}Qe(u.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(m){return{type:ht.error,result:m}}finally{d&&e.signal.removeEventListener("abort",d)}return u}async function US(n){let{result:e,type:t}=n;if(BE(e)){let E;try{let S=e.headers.get("Content-Type");S&&/\bapplication\/json\b/.test(S)?e.body==null?E=null:E=await e.json():E=await e.text()}catch(S){return{type:ht.error,error:S}}return t===ht.error?{type:ht.error,error:new Cc(e.status,e.statusText,E),statusCode:e.status,headers:e.headers}:{type:ht.data,data:E,statusCode:e.status,headers:e.headers}}if(t===ht.error){if(a_(e)){var r,s;if(e.data instanceof Error){var a,u;return{type:ht.error,error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}}return{type:ht.error,error:new Cc(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:Rl(e)?e.status:void 0,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:ht.error,error:e,statusCode:Rl(e)?e.status:void 0}}if(zS(e)){var d,f;return{type:ht.deferred,deferredData:e,statusCode:(d=e.init)==null?void 0:d.status,headers:((f=e.init)==null?void 0:f.headers)&&new Headers(e.init.headers)}}if(a_(e)){var m,_;return{type:ht.data,data:e.data,statusCode:(m=e.init)==null?void 0:m.status,headers:(_=e.init)!=null&&_.headers?new Headers(e.init.headers):void 0}}return{type:ht.data,data:e}}function FS(n,e,t,r,s,a){let u=n.headers.get("Location");if(Qe(u,"Redirects returned/thrown from loaders/actions must have a Location header"),!vp.test(u)){let d=r.slice(0,r.findIndex(f=>f.route.id===t)+1);u=Ff(new URL(e.url),d,s,!0,u,a),n.headers.set("Location",u)}return n}function t_(n,e,t){if(vp.test(n)){let r=n,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),a=Sa(s.pathname,t)!=null;if(s.origin===e.origin&&a)return s.pathname+s.search+s.hash}return n}function ia(n,e,t,r){let s=n.createURL(FE(e)).toString(),a={signal:t};if(r&&Nr(r.formMethod)){let{formMethod:u,formEncType:d}=r;a.method=u.toUpperCase(),d==="application/json"?(a.headers=new Headers({"Content-Type":d}),a.body=JSON.stringify(r.json)):d==="text/plain"?a.body=r.text:d==="application/x-www-form-urlencoded"&&r.formData?a.body=jf(r.formData):a.body=r.formData}return new Request(s,a)}function jf(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function n_(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function BS(n,e,t,r,s){let a={},u=null,d,f=!1,m={},_=t&&Xn(t[1])?t[1].error:void 0;return n.forEach(E=>{if(!(E.route.id in e))return;let S=E.route.id,P=e[S];if(Qe(!io(P),"Cannot handle redirect results in processLoaderData"),Xn(P)){let x=P.error;_!==void 0&&(x=_,_=void 0),u=u||{};{let M=ro(n,S);u[M.route.id]==null&&(u[M.route.id]=x)}a[S]=void 0,f||(f=!0,d=Rl(P.error)?P.error.status:500),P.headers&&(m[S]=P.headers)}else _s(P)?(r.set(S,P.deferredData),a[S]=P.deferredData.data,P.statusCode!=null&&P.statusCode!==200&&!f&&(d=P.statusCode),P.headers&&(m[S]=P.headers)):(a[S]=P.data,P.statusCode&&P.statusCode!==200&&!f&&(d=P.statusCode),P.headers&&(m[S]=P.headers))}),_!==void 0&&t&&(u={[t[0]]:_},a[t[0]]=void 0),{loaderData:a,errors:u,statusCode:d||200,loaderHeaders:m}}function r_(n,e,t,r,s,a,u){let{loaderData:d,errors:f}=BS(e,t,r,u);return s.forEach(m=>{let{key:_,match:E,controller:S}=m,P=a[_];if(Qe(P,"Did not find corresponding fetcher result"),!(S&&S.signal.aborted))if(Xn(P)){let x=ro(n.matches,E?.route.id);f&&f[x.route.id]||(f=St({},f,{[x.route.id]:P.error})),n.fetchers.delete(_)}else if(io(P))Qe(!1,"Unhandled fetcher revalidation redirect");else if(_s(P))Qe(!1,"Unhandled fetcher deferred data");else{let x=hs(P.data);n.fetchers.set(_,x)}}),{loaderData:d,errors:f}}function i_(n,e,t,r){let s=St({},e);for(let a of t){let u=a.route.id;if(e.hasOwnProperty(u)?e[u]!==void 0&&(s[u]=e[u]):n[u]!==void 0&&a.route.loader&&(s[u]=n[u]),r&&r.hasOwnProperty(u))break}return s}function s_(n){return n?Xn(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function ro(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function o_(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Fn(n,e){let{pathname:t,routeId:r,method:s,type:a,message:u}=e===void 0?{}:e,d="Unknown Server Error",f="Unknown @remix-run/router error";return n===400?(d="Bad Request",s&&t&&r?f="You made a "+s+' request to "'+t+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":a==="defer-action"?f="defer() is not supported in actions":a==="invalid-body"&&(f="Unable to encode submission body")):n===403?(d="Forbidden",f='Route "'+r+'" does not match URL "'+t+'"'):n===404?(d="Not Found",f='No route matches URL "'+t+'"'):n===405&&(d="Method Not Allowed",s&&t&&r?f="You made a "+s.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":s&&(f='Invalid request method "'+s.toUpperCase()+'"')),new Cc(n||500,d,new Error(f),!0)}function oc(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,s]=e[t];if(io(s))return{key:r,result:s}}}function FE(n){let e=typeof n=="string"?Cs(n):n;return co(St({},e,{hash:""}))}function jS(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function $S(n){return BE(n.result)&&CS.has(n.result.status)}function _s(n){return n.type===ht.deferred}function Xn(n){return n.type===ht.error}function io(n){return(n&&n.type)===ht.redirect}function a_(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function zS(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function BE(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function HS(n){return RS.has(n.toLowerCase())}function Nr(n){return SS.has(n.toLowerCase())}async function WS(n,e,t,r,s){let a=Object.entries(e);for(let u=0;u<a.length;u++){let[d,f]=a[u],m=n.find(S=>S?.route.id===d);if(!m)continue;let _=r.find(S=>S.route.id===m.route.id),E=_!=null&&!VE(_,m)&&(s&&s[m.route.id])!==void 0;_s(f)&&E&&await Ep(f,t,!1).then(S=>{S&&(e[d]=S)})}}async function qS(n,e,t){for(let r=0;r<t.length;r++){let{key:s,routeId:a,controller:u}=t[r],d=e[s];n.find(m=>m?.route.id===a)&&_s(d)&&(Qe(u,"Expected an AbortController for revalidating fetcher deferred result"),await Ep(d,u.signal,!0).then(m=>{m&&(e[s]=m)}))}}async function Ep(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:ht.data,data:n.deferredData.unwrappedData}}catch(s){return{type:ht.error,error:s}}return{type:ht.data,data:n.deferredData.data}}}function wp(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function fl(n,e){let t=typeof e=="string"?Cs(e).search:e.search;if(n[n.length-1].route.index&&wp(t||""))return n[n.length-1];let r=xE(n);return r[r.length-1]}function l_(n){let{formMethod:e,formAction:t,formEncType:r,text:s,formData:a,json:u}=n;if(!(!e||!t||!r)){if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:s};if(a!=null)return{formMethod:e,formAction:t,formEncType:r,formData:a,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:u,text:void 0}}}function ef(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function KS(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function ll(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function GS(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function hs(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function QS(n,e){try{let t=n.sessionStorage.getItem(ME);if(t){let r=JSON.parse(t);for(let[s,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(s,new Set(a||[]))}}catch{}}function YS(n,e){if(e.size>0){let t={};for(let[r,s]of e)t[r]=[...s];try{n.sessionStorage.setItem(ME,JSON.stringify(t))}catch(r){ma(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pc(){return Pc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Pc.apply(this,arguments)}const Wc=Z.createContext(null),jE=Z.createContext(null),yo=Z.createContext(null),Tp=Z.createContext(null),Oi=Z.createContext({outlet:null,matches:[],isDataRoute:!1}),$E=Z.createContext(null);function JS(n,e){let{relative:t}=e===void 0?{}:e;Fl()||Qe(!1);let{basename:r,navigator:s}=Z.useContext(yo),{hash:a,pathname:u,search:d}=HE(n,{relative:t}),f=u;return r!=="/"&&(f=u==="/"?r:Ri([r,u])),s.createHref({pathname:f,search:d,hash:a})}function Fl(){return Z.useContext(Tp)!=null}function qc(){return Fl()||Qe(!1),Z.useContext(Tp).location}function zE(n){Z.useContext(yo).static||Z.useLayoutEffect(n)}function XS(){let{isDataRoute:n}=Z.useContext(Oi);return n?fA():ZS()}function ZS(){Fl()||Qe(!1);let n=Z.useContext(Wc),{basename:e,future:t,navigator:r}=Z.useContext(yo),{matches:s}=Z.useContext(Oi),{pathname:a}=qc(),u=JSON.stringify(yp(s,t.v7_relativeSplatPath)),d=Z.useRef(!1);return zE(()=>{d.current=!0}),Z.useCallback(function(m,_){if(_===void 0&&(_={}),!d.current)return;if(typeof m=="number"){r.go(m);return}let E=_p(m,JSON.parse(u),a,_.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Ri([e,E.pathname])),(_.replace?r.replace:r.push)(E,_.state,_)},[e,r,u,a,n])}const eA=Z.createContext(null);function tA(n){let e=Z.useContext(Oi).outlet;return e&&Z.createElement(eA.Provider,{value:n},e)}function nA(){let{matches:n}=Z.useContext(Oi),e=n[n.length-1];return e?e.params:{}}function HE(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=Z.useContext(yo),{matches:s}=Z.useContext(Oi),{pathname:a}=qc(),u=JSON.stringify(yp(s,r.v7_relativeSplatPath));return Z.useMemo(()=>_p(n,JSON.parse(u),a,t==="path"),[n,u,a,t])}function rA(n,e,t,r){Fl()||Qe(!1);let{navigator:s}=Z.useContext(yo),{matches:a}=Z.useContext(Oi),u=a[a.length-1],d=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let m=qc(),_;_=m;let E=_.pathname||"/",S=E;if(f!=="/"){let M=f.replace(/^\//,"").split("/");S="/"+E.replace(/^\//,"").split("/").slice(M.length).join("/")}let P=no(n,{pathname:S});return lA(P&&P.map(M=>Object.assign({},M,{params:Object.assign({},d,M.params),pathname:Ri([f,s.encodeLocation?s.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?f:Ri([f,s.encodeLocation?s.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),a,t,r)}function iA(){let n=dA(),e=Rl(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},e),t?Z.createElement("pre",{style:s},t):null,null)}const sA=Z.createElement(iA,null);class oA extends Z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Z.createElement(Oi.Provider,{value:this.props.routeContext},Z.createElement($E.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function aA(n){let{routeContext:e,match:t,children:r}=n,s=Z.useContext(Wc);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),Z.createElement(Oi.Provider,{value:e},r)}function lA(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var a;if(!t)return null;if(t.errors)n=t.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let u=n,d=(s=t)==null?void 0:s.errors;if(d!=null){let _=u.findIndex(E=>E.route.id&&d?.[E.route.id]!==void 0);_>=0||Qe(!1),u=u.slice(0,Math.min(u.length,_+1))}let f=!1,m=-1;if(t&&r&&r.v7_partialHydration)for(let _=0;_<u.length;_++){let E=u[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=_),E.route.id){let{loaderData:S,errors:P}=t,x=E.route.loader&&S[E.route.id]===void 0&&(!P||P[E.route.id]===void 0);if(E.route.lazy||x){f=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((_,E,S)=>{let P,x=!1,M=null,V=null;t&&(P=d&&E.route.id?d[E.route.id]:void 0,M=E.route.errorElement||sA,f&&(m<0&&S===0?(pA("route-fallback"),x=!0,V=null):m===S&&(x=!0,V=E.route.hydrateFallbackElement||null)));let Q=e.concat(u.slice(0,S+1)),K=()=>{let Y;return P?Y=M:x?Y=V:E.route.Component?Y=Z.createElement(E.route.Component,null):E.route.element?Y=E.route.element:Y=_,Z.createElement(aA,{match:E,routeContext:{outlet:_,matches:Q,isDataRoute:t!=null},children:Y})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?Z.createElement(oA,{location:t.location,revalidation:t.revalidation,component:M,error:P,children:K(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):K()},null)}var WE=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(WE||{}),qE=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(qE||{});function uA(n){let e=Z.useContext(Wc);return e||Qe(!1),e}function cA(n){let e=Z.useContext(jE);return e||Qe(!1),e}function hA(n){let e=Z.useContext(Oi);return e||Qe(!1),e}function KE(n){let e=hA(),t=e.matches[e.matches.length-1];return t.route.id||Qe(!1),t.route.id}function dA(){var n;let e=Z.useContext($E),t=cA(qE.UseRouteError),r=KE();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function fA(){let{router:n}=uA(WE.UseNavigateStable),e=KE(),t=Z.useRef(!1);return zE(()=>{t.current=!0}),Z.useCallback(function(s,a){a===void 0&&(a={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Pc({fromRouteId:e},a)))},[n,e])}const u_={};function pA(n,e,t){u_[n]||(u_[n]=!0)}function mA(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function gA(n){return tA(n.context)}function yA(n){let{basename:e="/",children:t=null,location:r,navigationType:s=$t.Pop,navigator:a,static:u=!1,future:d}=n;Fl()&&Qe(!1);let f=e.replace(/^\/*/,"/"),m=Z.useMemo(()=>({basename:f,navigator:a,static:u,future:Pc({v7_relativeSplatPath:!1},d)}),[f,d,a,u]);typeof r=="string"&&(r=Cs(r));let{pathname:_="/",search:E="",hash:S="",state:P=null,key:x="default"}=r,M=Z.useMemo(()=>{let V=Sa(_,f);return V==null?null:{location:{pathname:V,search:E,hash:S,state:P,key:x},navigationType:s}},[f,_,E,S,P,x,s]);return M==null?null:Z.createElement(yo.Provider,{value:m},Z.createElement(Tp.Provider,{children:t,value:M}))}new Promise(()=>{});function _A(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:Z.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:Z.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:Z.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cl(){return Cl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Cl.apply(this,arguments)}function vA(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function EA(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function wA(n,e){return n.button===0&&(!e||e==="_self")&&!EA(n)}const TA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IA="6";try{window.__reactRouterVersion=IA}catch{}function SA(n,e){return NS({basename:void 0,future:Cl({},void 0,{v7_prependBasename:!0}),history:tS({window:void 0}),hydrationData:AA(),routes:n,mapRouteProperties:_A,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function AA(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=Cl({},e,{errors:RA(e.errors)})),e}function RA(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")t[r]=new Cc(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let a=window[s.__subType];if(typeof a=="function")try{let u=new a(s.message);u.stack="",t[r]=u}catch{}}if(t[r]==null){let a=new Error(s.message);a.stack="",t[r]=a}}else t[r]=s;return t}const CA=Z.createContext({isTransitioning:!1}),PA=Z.createContext(new Map),kA="startTransition",c_=KI[kA],DA="flushSync",h_=eS[DA];function NA(n){c_?c_(n):n()}function ul(n){h_?h_(n):n()}let bA=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function OA(n){let{fallbackElement:e,router:t,future:r}=n,[s,a]=Z.useState(t.state),[u,d]=Z.useState(),[f,m]=Z.useState({isTransitioning:!1}),[_,E]=Z.useState(),[S,P]=Z.useState(),[x,M]=Z.useState(),V=Z.useRef(new Map),{v7_startTransition:Q}=r||{},K=Z.useCallback(A=>{Q?NA(A):A()},[Q]),Y=Z.useCallback((A,I)=>{let{deletedFetchers:C,flushSync:D,viewTransitionOpts:b}=I;A.fetchers.forEach((de,Je)=>{de.data!==void 0&&V.current.set(Je,de.data)}),C.forEach(de=>V.current.delete(de));let k=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!b||k){D?ul(()=>a(A)):K(()=>a(A));return}if(D){ul(()=>{S&&(_&&_.resolve(),S.skipTransition()),m({isTransitioning:!0,flushSync:!0,currentLocation:b.currentLocation,nextLocation:b.nextLocation})});let de=t.window.document.startViewTransition(()=>{ul(()=>a(A))});de.finished.finally(()=>{ul(()=>{E(void 0),P(void 0),d(void 0),m({isTransitioning:!1})})}),ul(()=>P(de));return}S?(_&&_.resolve(),S.skipTransition(),M({state:A,currentLocation:b.currentLocation,nextLocation:b.nextLocation})):(d(A),m({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}))},[t.window,S,_,V,K]);Z.useLayoutEffect(()=>t.subscribe(Y),[t,Y]),Z.useEffect(()=>{f.isTransitioning&&!f.flushSync&&E(new bA)},[f]),Z.useEffect(()=>{if(_&&u&&t.window){let A=u,I=_.promise,C=t.window.document.startViewTransition(async()=>{K(()=>a(A)),await I});C.finished.finally(()=>{E(void 0),P(void 0),d(void 0),m({isTransitioning:!1})}),P(C)}},[K,u,_,t.window]),Z.useEffect(()=>{_&&u&&s.location.key===u.location.key&&_.resolve()},[_,S,s.location,u]),Z.useEffect(()=>{!f.isTransitioning&&x&&(d(x.state),m({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),M(void 0))},[f.isTransitioning,x]),Z.useEffect(()=>{},[]);let J=Z.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:A=>t.navigate(A),push:(A,I,C)=>t.navigate(A,{state:I,preventScrollReset:C?.preventScrollReset}),replace:(A,I,C)=>t.navigate(A,{replace:!0,state:I,preventScrollReset:C?.preventScrollReset})}),[t]),fe=t.basename||"/",te=Z.useMemo(()=>({router:t,navigator:J,static:!1,basename:fe}),[t,J,fe]),T=Z.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return Z.useEffect(()=>mA(r,t.future),[r,t.future]),Z.createElement(Z.Fragment,null,Z.createElement(Wc.Provider,{value:te},Z.createElement(jE.Provider,{value:s},Z.createElement(PA.Provider,{value:V.current},Z.createElement(CA.Provider,{value:f},Z.createElement(yA,{basename:fe,location:s.location,navigationType:s.historyAction,navigator:J,future:T},s.initialized||t.future.v7_partialHydration?Z.createElement(xA,{routes:t.routes,future:t.future,state:s}):e))))),null)}const xA=Z.memo(LA);function LA(n){let{routes:e,future:t,state:r}=n;return rA(e,void 0,r,t)}const MA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ds=Z.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:a,replace:u,state:d,target:f,to:m,preventScrollReset:_,viewTransition:E}=e,S=vA(e,TA),{basename:P}=Z.useContext(yo),x,M=!1;if(typeof m=="string"&&VA.test(m)&&(x=m,MA))try{let Y=new URL(window.location.href),J=m.startsWith("//")?new URL(Y.protocol+m):new URL(m),fe=Sa(J.pathname,P);J.origin===Y.origin&&fe!=null?m=fe+J.search+J.hash:M=!0}catch{}let V=JS(m,{relative:s}),Q=UA(m,{replace:u,state:d,target:f,preventScrollReset:_,relative:s,viewTransition:E});function K(Y){r&&r(Y),Y.defaultPrevented||Q(Y)}return Z.createElement("a",Cl({},S,{href:x||V,onClick:M||a?r:K,ref:t,target:f}))});var d_;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(d_||(d_={}));var f_;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(f_||(f_={}));function UA(n,e){let{target:t,replace:r,state:s,preventScrollReset:a,relative:u,viewTransition:d}=e===void 0?{}:e,f=XS(),m=qc(),_=HE(n,{relative:u});return Z.useCallback(E=>{if(wA(E,t)){E.preventDefault();let S=r!==void 0?r:co(m)===co(_);f(n,{replace:S,state:s,preventScrollReset:a,relative:u,viewTransition:d})}},[m,f,_,r,s,t,n,a,u,d])}function FA(){return H.jsxs("div",{style:{maxWidth:980,margin:"0 auto"},children:[H.jsxs("nav",{style:{display:"flex",gap:12,padding:16},children:[H.jsx(ds,{to:"/",children:"Inicio"}),H.jsx(ds,{to:"/dashboard",children:"Dashboard"}),H.jsx(ds,{to:"/vets",children:"Veterinarias"}),H.jsx(ds,{to:"/premium",children:"Premium"}),H.jsx(ds,{to:"/vet",children:"Vet IA"}),H.jsx(ds,{to:"/diet",children:"Dieta"})]}),H.jsx(gA,{})]})}var p_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},BA=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},QE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,d=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,_=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|m>>6,P=m&63;f||(P=64,u||(S=64)),r.push(t[_],t[E],t[S],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(GE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||m==null||E==null)throw new jA;const S=a<<2|d>>4;if(r.push(S),m!==64){const P=d<<4&240|m>>2;if(r.push(P),E!==64){const x=m<<6&192|E;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};let jA=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};const $A=function(n){const e=GE(n);return QE.encodeByteArray(e,!0)},YE=function(n){return $A(n).replace(/\./g,"")},zA=function(n){try{return QE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=()=>HA().__FIREBASE_DEFAULTS__,qA=()=>{if(typeof process>"u"||typeof p_>"u")return;const n=p_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},KA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&zA(n[1]);return e&&JSON.parse(e)},GA=()=>{try{return WA()||qA()||KA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},JE=()=>{var n;return(n=GA())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function YA(){try{return typeof indexedDB=="object"}catch{return!1}}function JA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="FirebaseError";let Ip=class XE extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=XA,Object.setPrototypeOf(this,XE.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ZE.prototype.create)}},ZE=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?ZA(a,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new Ip(s,d,r)}};function ZA(n,e){return n.replace(eR,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const eR=/\{\$([^}]+)}/g;function $f(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],u=e[s];if(m_(a)&&m_(u)){if(!$f(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function m_(n){return n!==null&&typeof n=="object"}let kc=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new QA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rR(e))try{this.getOrInitializeService({instanceIdentifier:to})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=to){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=to){return this.instances.has(e)}getOptions(e=to){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=to){return this.component?this.component.multipleInstances?e:to:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nR(n){return n===to?void 0:n}function rR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(vt||(vt={}));const sR={debug:vt.DEBUG,verbose:vt.VERBOSE,info:vt.INFO,warn:vt.WARN,error:vt.ERROR,silent:vt.SILENT},oR=vt.INFO,aR={[vt.DEBUG]:"log",[vt.VERBOSE]:"log",[vt.INFO]:"info",[vt.WARN]:"warn",[vt.ERROR]:"error"},lR=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=aR[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let uR=class{constructor(e){this.name=e,this._logLevel=oR,this._logHandler=lR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,vt.DEBUG,...e),this._logHandler(this,vt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,vt.VERBOSE,...e),this._logHandler(this,vt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,vt.INFO,...e),this._logHandler(this,vt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,vt.WARN,...e),this._logHandler(this,vt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,vt.ERROR,...e),this._logHandler(this,vt.ERROR,...e)}};const cR=(n,e)=>e.some(t=>n instanceof t);let g_,y_;function hR(){return g_||(g_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dR(){return y_||(y_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ew=new WeakMap,zf=new WeakMap,tw=new WeakMap,tf=new WeakMap,Sp=new WeakMap;function fR(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(Es(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&ew.set(t,n)}).catch(()=>{}),Sp.set(e,n),e}function pR(n){if(zf.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});zf.set(n,e)}let Hf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return zf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||tw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Es(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function mR(n){Hf=n(Hf)}function gR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(nf(this),e,...t);return tw.set(r,e.sort?e.sort():[e]),Es(r)}:dR().includes(n)?function(...e){return n.apply(nf(this),e),Es(ew.get(this))}:function(...e){return Es(n.apply(nf(this),e))}}function yR(n){return typeof n=="function"?gR(n):(n instanceof IDBTransaction&&pR(n),cR(n,hR())?new Proxy(n,Hf):n)}function Es(n){if(n instanceof IDBRequest)return fR(n);if(tf.has(n))return tf.get(n);const e=yR(n);return e!==n&&(tf.set(n,e),Sp.set(e,n)),e}const nf=n=>Sp.get(n);function _R(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const u=indexedDB.open(n,e),d=Es(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Es(u.result),f.oldVersion,f.newVersion,Es(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const vR=["get","getKey","getAll","getAllKeys","count"],ER=["put","add","delete","clear"],rf=new Map;function __(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(rf.get(e))return rf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=ER.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||vR.includes(t)))return;const a=async function(u,...d){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),s&&f.done]))[0]};return rf.set(e,a),a}mR(n=>({...n,get:(e,t,r)=>__(e,t)||n.get(e,t,r),has:(e,t)=>!!__(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function TR(n){const e=n.getComponent();return e?.type==="VERSION"}const Wf="@firebase/app",v_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=new uR("@firebase/app"),IR="@firebase/app-compat",SR="@firebase/analytics-compat",AR="@firebase/analytics",RR="@firebase/app-check-compat",CR="@firebase/app-check",PR="@firebase/auth",kR="@firebase/auth-compat",DR="@firebase/database",NR="@firebase/data-connect",bR="@firebase/database-compat",OR="@firebase/functions",xR="@firebase/functions-compat",LR="@firebase/installations",MR="@firebase/installations-compat",VR="@firebase/messaging",UR="@firebase/messaging-compat",FR="@firebase/performance",BR="@firebase/performance-compat",jR="@firebase/remote-config",$R="@firebase/remote-config-compat",zR="@firebase/storage",HR="@firebase/storage-compat",WR="@firebase/firestore",qR="@firebase/vertexai-preview",KR="@firebase/firestore-compat",GR="firebase",QR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="[DEFAULT]",YR={[Wf]:"fire-core",[IR]:"fire-core-compat",[AR]:"fire-analytics",[SR]:"fire-analytics-compat",[CR]:"fire-app-check",[RR]:"fire-app-check-compat",[PR]:"fire-auth",[kR]:"fire-auth-compat",[DR]:"fire-rtdb",[NR]:"fire-data-connect",[bR]:"fire-rtdb-compat",[OR]:"fire-fn",[xR]:"fire-fn-compat",[LR]:"fire-iid",[MR]:"fire-iid-compat",[VR]:"fire-fcm",[UR]:"fire-fcm-compat",[FR]:"fire-perf",[BR]:"fire-perf-compat",[jR]:"fire-rc",[$R]:"fire-rc-compat",[zR]:"fire-gcs",[HR]:"fire-gcs-compat",[WR]:"fire-fst",[KR]:"fire-fst-compat",[qR]:"fire-vertex","fire-js":"fire-js",[GR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=new Map,JR=new Map,Kf=new Map;function E_(n,e){try{n.container.addComponent(e)}catch(t){Pi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Is(n){const e=n.name;if(Kf.has(e))return Pi.debug(`There were multiple attempts to register component ${e}.`),!1;Kf.set(e,n);for(const t of Dc.values())E_(t,n);for(const t of JR.values())E_(t,n);return!0}function Bl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ti(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ws=new ZE("app","Firebase",XR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ws.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=QR;function nw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qf,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ws.create("bad-app-name",{appName:String(s)});if(t||(t=JE()),!t)throw ws.create("no-options");const a=Dc.get(s);if(a){if($f(t,a.options)&&$f(r,a.config))return a;throw ws.create("duplicate-app",{appName:s})}const u=new iR(s);for(const f of Kf.values())u.addComponent(f);const d=new ZR(t,r,u);return Dc.set(s,d),d}function Kc(n=qf){const e=Dc.get(n);if(!e&&n===qf&&JE())return nw();if(!e)throw ws.create("no-app",{appName:n});return e}function dr(n,e,t){var r;let s=(r=YR[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){const d=[`Unable to register library "${s}" with version "${e}":`];a&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pi.warn(d.join(" "));return}Is(new kc(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="firebase-heartbeat-database",t1=1,Pl="firebase-heartbeat-store";let sf=null;function rw(){return sf||(sf=_R(e1,t1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Pl)}catch(t){console.warn(t)}}}}).catch(n=>{throw ws.create("idb-open",{originalErrorMessage:n.message})})),sf}async function n1(n){try{const t=(await rw()).transaction(Pl),r=await t.objectStore(Pl).get(iw(n));return await t.done,r}catch(e){if(e instanceof Ip)Pi.warn(e.message);else{const t=ws.create("idb-get",{originalErrorMessage:e?.message});Pi.warn(t.message)}}}async function w_(n,e){try{const r=(await rw()).transaction(Pl,"readwrite");await r.objectStore(Pl).put(e,iw(n)),await r.done}catch(t){if(t instanceof Ip)Pi.warn(t.message);else{const r=ws.create("idb-set",{originalErrorMessage:t?.message});Pi.warn(r.message)}}}function iw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=1024,i1=720*60*60*1e3;class s1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new a1(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=T_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const d=new Date(u.date).valueOf();return Date.now()-d<=i1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Pi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=T_(),{heartbeatsToSend:r,unsentEntries:s}=o1(this._heartbeatsCache.heartbeats),a=YE(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Pi.warn(t),""}}}function T_(){return new Date().toISOString().substring(0,10)}function o1(n,e=r1){const t=[];let r=n.slice();for(const s of n){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),I_(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),I_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class a1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YA()?JA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await n1(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return w_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return w_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function I_(n){return YE(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(n){Is(new kc("platform-logger",e=>new wR(e),"PRIVATE")),Is(new kc("heartbeat",e=>new s1(e),"PRIVATE")),dr(Wf,v_,n),dr(Wf,v_,"esm2017"),dr("fire-js","")}l1("");var u1="firebase",c1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr(u1,c1,"app");var S_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},d1=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},f1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,d=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,_=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|m>>6,P=m&63;f||(P=64,u||(S=64)),r.push(t[_],t[E],t[S],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(h1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):d1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||m==null||E==null)throw new p1;const S=a<<2|d>>4;if(r.push(S),m!==64){const P=d<<4&240|m>>2;if(r.push(P),E!==64){const x=m<<6&192|E;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};let p1=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};const sw=function(n){try{return f1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=()=>m1().__FIREBASE_DEFAULTS__,y1=()=>{if(typeof process>"u"||typeof S_>"u")return;const n=S_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},_1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&sw(n[1]);return e&&JSON.parse(e)},ow=()=>{try{return g1()||y1()||_1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},v1=n=>{var e,t;return(t=(e=ow())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},aw=n=>{var e;return(e=ow())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function E1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())}function w1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function T1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function I1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function S1(){const n=Rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="FirebaseError";let Gc=class lw extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=A1,Object.setPrototypeOf(this,lw.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qc.prototype.create)}},Qc=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?R1(a,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new Gc(s,d,r)}};function R1(n,e){return n.replace(C1,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const C1=/\{\$([^}]+)}/g;function P1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function uw(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],u=e[s];if(A_(a)&&A_(u)){if(!uw(a,u))return!1}else if(a!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function A_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function k1(n,e){const t=new D1(n,e);return t.subscribe.bind(t)}class D1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");N1(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=of),s.error===void 0&&(s.error=of),s.complete===void 0&&(s.complete=of);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function N1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function of(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(n){return n&&n._delegate?n._delegate:n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(mt||(mt={}));const b1={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},O1=mt.INFO,x1={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},L1=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=x1[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let M1=class{constructor(e){this.name=e,this._logLevel=O1,this._logHandler=L1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?b1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...e),this._logHandler(this,mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...e),this._logHandler(this,mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...e),this._logHandler(this,mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...e),this._logHandler(this,mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...e),this._logHandler(this,mt.ERROR,...e)}};function Ap(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}let R_=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};function cw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const V1=cw,hw=new Qc("auth","Firebase",cw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=new M1("@firebase/auth");function U1(n,...e){Nc.logLevel<=mt.WARN&&Nc.warn(`Auth (${_o}): ${n}`,...e)}function yc(n,...e){Nc.logLevel<=mt.ERROR&&Nc.error(`Auth (${_o}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(n,...e){throw Cp(n,...e)}function br(n,...e){return Cp(n,...e)}function Rp(n,e,t){const r=Object.assign(Object.assign({},V1()),{[e]:t});return new Qc("auth","Firebase",r).create(e,{appName:n.name})}function ao(n){return Rp(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function F1(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ti(n,"argument-error"),Rp(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cp(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return hw.create(n,...e)}function Fe(n,e,...t){if(!n)throw Cp(e,...t)}function Ii(n){const e="INTERNAL ASSERTION FAILED: "+n;throw yc(e),new Error(e)}function ki(n,e){n||Ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function B1(){return C_()==="http:"||C_()==="https:"}function C_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B1()||T1()||"connection"in navigator)?navigator.onLine:!0}function $1(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,t){this.shortDelay=e,this.longDelay=t,ki(t>e,"Short delay should be less than long delay!"),this.isMobile=E1()||I1()}get(){return j1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(n,e){ki(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=new $l(3e4,6e4);function kp(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Aa(n,e,t,r,s={}){return fw(n,s,async()=>{let a={},u={};r&&(e==="GET"?u=r:a={body:JSON.stringify(r)});const d=jl(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},a);return w1()||(m.referrerPolicy="no-referrer"),dw.fetch()(pw(n,n.config.apiHost,t,d),m)})}async function fw(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},z1),e);try{const s=new q1(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw ac(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw ac(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw ac(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw ac(n,"user-disabled",u);const _=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Rp(n,_,m);ti(n,_)}}catch(s){if(s instanceof Gc)throw s;ti(n,"network-request-failed",{message:String(s)})}}async function W1(n,e,t,r,s={}){const a=await Aa(n,e,t,r,s);return"mfaPendingCredential"in a&&ti(n,"multi-factor-auth-required",{_serverResponse:a}),a}function pw(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?Pp(n.config,s):`${n.config.apiScheme}://${s}`}class q1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(br(this.auth,"network-request-failed")),H1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ac(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=br(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(n,e){return Aa(n,"POST","/v1/accounts:delete",e)}async function mw(n,e){return Aa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function G1(n,e=!1){const t=Ps(n),r=await t.getIdToken(e),s=Dp(r);Fe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a?.sign_in_provider;return{claims:s,token:r,authTime:vl(af(s.auth_time)),issuedAtTime:vl(af(s.iat)),expirationTime:vl(af(s.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}}function af(n){return Number(n)*1e3}function Dp(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return yc("JWT malformed, contained fewer than 3 sections"),null;try{const s=sw(t);return s?JSON.parse(s):(yc("Failed to decode base64 JWT payload"),null)}catch(s){return yc("Caught error parsing JWT payload as JSON",s?.toString()),null}}function P_(n){const e=Dp(n);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Gc&&Q1(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Q1({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=vl(this.lastLoginAt),this.creationTime=vl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bc(n){var e;const t=n.auth,r=await n.getIdToken(),s=await kl(n,mw(t,{idToken:r}));Fe(s?.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?gw(a.providerUserInfo):[],d=X1(n.providerData,u),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!d?.length,_=f?m:!1,E={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:d,metadata:new Qf(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,E)}async function J1(n){const e=Ps(n);await bc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function X1(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function gw(n){return n.map(e=>{var{providerId:t}=e,r=Ap(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z1(n,e){const t=await fw(n,{},async()=>{const r=jl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=pw(n,s,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",dw.fetch()(u,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function eC(n,e){return Aa(n,"POST","/v2/accounts:revokeToken",kp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):P_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const t=P_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await Z1(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,u=new ca;return r&&(Fe(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Fe(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(Fe(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ca,this.toJSON())}_performRefresh(){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(n,e){Fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Si{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=Ap(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Y1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Qf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await kl(this,this.stsTokenManager.getToken(this.auth,e));return Fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return G1(this,e)}reload(){return J1(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Si(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await bc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ti(this.auth.app))return Promise.reject(ao(this.auth));const e=await this.getIdToken();return await kl(this,K1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,u,d,f,m,_;const E=(r=t.displayName)!==null&&r!==void 0?r:void 0,S=(s=t.email)!==null&&s!==void 0?s:void 0,P=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,x=(u=t.photoURL)!==null&&u!==void 0?u:void 0,M=(d=t.tenantId)!==null&&d!==void 0?d:void 0,V=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,Q=(m=t.createdAt)!==null&&m!==void 0?m:void 0,K=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:Y,emailVerified:J,isAnonymous:fe,providerData:te,stsTokenManager:T}=t;Fe(Y&&T,e,"internal-error");const A=ca.fromJSON(this.name,T);Fe(typeof Y=="string",e,"internal-error"),us(E,e.name),us(S,e.name),Fe(typeof J=="boolean",e,"internal-error"),Fe(typeof fe=="boolean",e,"internal-error"),us(P,e.name),us(x,e.name),us(M,e.name),us(V,e.name),us(Q,e.name),us(K,e.name);const I=new Si({uid:Y,auth:e,email:S,emailVerified:J,displayName:E,isAnonymous:fe,photoURL:x,phoneNumber:P,tenantId:M,stsTokenManager:A,createdAt:Q,lastLoginAt:K});return te&&Array.isArray(te)&&(I.providerData=te.map(C=>Object.assign({},C))),V&&(I._redirectEventId=V),I}static async _fromIdTokenResponse(e,t,r=!1){const s=new ca;s.updateFromServerResponse(t);const a=new Si({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await bc(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Fe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?gw(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!a?.length,d=new ca;d.updateFromIdToken(r);const f=new Si({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Qf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=new Map;function Ai(n){ki(n instanceof Function,"Expected a class definition");let e=k_.get(n);return e?(ki(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,k_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yw.type="NONE";const D_=yw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(n,e,t){return`firebase:${n}:${e}:${t}`}class ha{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=_c(this.userKey,s.apiKey,a),this.fullPersistenceKey=_c("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Si._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ha(Ai(D_),e,r);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=s[0]||Ai(D_);const u=_c(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const _=await m._get(u);if(_){const E=Si._fromJSON(e,_);m!==a&&(d=E),a=m;break}}catch{}const f=s.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new ha(a,e,r):(a=f[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(u)}catch{}})),new ha(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ww(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_w(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Iw(e))return"Blackberry";if(Sw(e))return"Webos";if(vw(e))return"Safari";if((e.includes("chrome/")||Ew(e))&&!e.includes("edge/"))return"Chrome";if(Tw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function _w(n=Rn()){return/firefox\//i.test(n)}function vw(n=Rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ew(n=Rn()){return/crios\//i.test(n)}function ww(n=Rn()){return/iemobile/i.test(n)}function Tw(n=Rn()){return/android/i.test(n)}function Iw(n=Rn()){return/blackberry/i.test(n)}function Sw(n=Rn()){return/webos/i.test(n)}function Np(n=Rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function tC(n=Rn()){var e;return Np(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nC(){return S1()&&document.documentMode===10}function Aw(n=Rn()){return Np(n)||Tw(n)||Sw(n)||Iw(n)||/windows phone/i.test(n)||ww(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(n,e=[]){let t;switch(n){case"Browser":t=N_(Rn());break;case"Worker":t=`${N_(Rn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_o}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((u,d)=>{try{const f=e(a);u(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iC(n,e={}){return Aa(n,"GET","/v2/passwordPolicy",kp(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=6;class oC{constructor(e){var t,r,s,a;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:sC,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b_(this),this.idTokenSubscription=new b_(this),this.beforeStateQueue=new rC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ai(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ha.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await mw(this,{idToken:e}),r=await Si._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ti(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&f?.user&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await bc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ti(this.app))return Promise.reject(ao(this));const t=e?Ps(e):null;return t&&Fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ti(this.app)?Promise.reject(ao(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ti(this.app)?Promise.reject(ao(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iC(this),t=new oC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await eC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ai(e)||this._popupRedirectResolver;Fe(t,this,"argument-error"),this.redirectPersistenceManager=await ha.create(this,[Ai(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&U1(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Yc(n){return Ps(n)}class b_{constructor(e){this.auth=e,this.observer=null,this.addObserver=k1(t=>this.observer=t)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lC(n){bp=n}function uC(n){return bp.loadJS(n)}function cC(){return bp.gapiScript}function hC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(n,e){const t=Bl(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(uw(a,e??{}))return s;ti(s,"already-initialized")}return t.initialize({options:e})}function fC(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ai);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function pC(n,e,t){const r=Yc(n);Fe(r._canInitEmulator,r,"emulator-config-failed"),Fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=Cw(e),{host:u,port:d}=mC(e),f=d===null?"":`:${d}`;r.config.emulator={url:`${a}//${u}${f}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),gC()}function Cw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function mC(n){const e=Cw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:O_(r.substr(a.length+1))}}else{const[a,u]=r.split(":");return{host:a,port:O_(u)}}}function O_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function gC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ii("not implemented")}_getIdTokenResponse(e){return Ii("not implemented")}_linkToIdToken(e,t){return Ii("not implemented")}_getReauthenticationResolver(e){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(n,e){return W1(n,"POST","/v1/accounts:signInWithIdp",kp(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC="http://localhost";class ho extends Pw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ho(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ti("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=Ap(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new ho(r,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return da(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,da(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,da(e,t)}buildRequest(){const e={requestUri:yC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=jl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl extends Op{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends zl{constructor(){super("facebook.com")}static credential(e){return ho._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends zl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ho._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return wi.credential(t,r)}catch{return null}}}wi.GOOGLE_SIGN_IN_METHOD="google.com";wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends zl{constructor(){super("github.com")}static credential(e){return ho._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.GITHUB_SIGN_IN_METHOD="github.com";ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends zl{constructor(){super("twitter.com")}static credential(e,t){return ho._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ms.credential(t,r)}catch{return null}}}ms.TWITTER_SIGN_IN_METHOD="twitter.com";ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await Si._fromIdTokenResponse(e,r,s),u=x_(r);return new ga({user:a,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=x_(r);return new ga({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function x_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends Gc{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Oc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Oc(e,t,r,s)}}function kw(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Oc._fromErrorAndOperation(n,a,e,r):a})}async function _C(n,e,t=!1){const r=await kl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ga._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vC(n,e,t=!1){const{auth:r}=n;if(Ti(r.app))return Promise.reject(ao(r));const s="reauthenticate";try{const a=await kl(n,kw(r,s,e,n),t);Fe(a.idToken,r,"internal-error");const u=Dp(a.idToken);Fe(u,r,"internal-error");const{sub:d}=u;return Fe(n.uid===d,r,"user-mismatch"),ga._forOperation(n,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&ti(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EC(n,e,t=!1){if(Ti(n.app))return Promise.reject(ao(n));const r="signIn",s=await kw(n,r,e),a=await ga._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}function wC(n,e,t,r){return Ps(n).onIdTokenChanged(e,t,r)}function TC(n,e,t){return Ps(n).beforeAuthStateChanged(e,t)}function IC(n,e,t,r){return Ps(n).onAuthStateChanged(e,t,r)}function SC(n){return Ps(n).signOut()}const xc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xc,"1"),this.storage.removeItem(xc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=1e3,RC=10;class Nw extends Dw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Aw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},a=this.storage.getItem(r);nC()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,RC):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},AC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nw.type="LOCAL";const CC=Nw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw extends Dw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}bw.type="SESSION";const Ow=bw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Jc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,u=this.handlersMap[s];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(u).map(async m=>m(t.origin,a)),f=await PC(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((d,f)=>{const m=xp("",20);s.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(E){const S=E;if(S.data.eventId===m)switch(S.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(_),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(){return window}function DC(n){Xr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(){return typeof Xr().WorkerGlobalScope<"u"&&typeof Xr().importScripts=="function"}async function NC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bC(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function OC(){return xw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="firebaseLocalStorageDb",xC=1,Lc="firebaseLocalStorage",Mw="fbase_key";class Hl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xc(n,e){return n.transaction([Lc],e?"readwrite":"readonly").objectStore(Lc)}function LC(){const n=indexedDB.deleteDatabase(Lw);return new Hl(n).toPromise()}function Yf(){const n=indexedDB.open(Lw,xC);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Lc,{keyPath:Mw})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Lc)?e(r):(r.close(),await LC(),e(await Yf()))})})}async function L_(n,e,t){const r=Xc(n,!0).put({[Mw]:e,value:t});return new Hl(r).toPromise()}async function MC(n,e){const t=Xc(n,!1).get(e),r=await new Hl(t).toPromise();return r===void 0?null:r.value}function M_(n,e){const t=Xc(n,!0).delete(e);return new Hl(t).toPromise()}const VC=800,UC=3;class Vw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>UC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jc._getInstance(OC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await NC(),!this.activeServiceWorker)return;this.sender=new kC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yf();return await L_(e,xc,"1"),await M_(e,xc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>L_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>MC(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>M_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Xc(s,!1).getAll();return new Hl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Vw.type="LOCAL";const FC=Vw;new $l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(n,e){return e?Ai(e):(Fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp extends Pw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return da(e,this._buildIdpRequest())}_linkToIdToken(e,t){return da(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return da(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function BC(n){return EC(n.auth,new Lp(n),n.bypassAuthState)}function jC(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),vC(t,new Lp(n),n.bypassAuthState)}async function $C(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),_C(t,new Lp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BC;case"linkViaPopup":case"linkViaRedirect":return $C;case"reauthViaPopup":case"reauthViaRedirect":return jC;default:ti(this.auth,"internal-error")}}resolve(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=new $l(2e3,1e4);async function HC(n,e,t){if(Ti(n.app))return Promise.reject(br(n,"operation-not-supported-in-this-environment"));const r=Yc(n);F1(n,e,Op);const s=Uw(r,t);return new so(r,"signInViaPopup",e,s).executeNotNull()}class so extends Fw{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,so.currentPopupAction&&so.currentPopupAction.cancel(),so.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){ki(this.filter.length===1,"Popup operations only handle one event");const e=xp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,so.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zC.get())};e()}}so.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="pendingRedirect",vc=new Map;class qC extends Fw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=vc.get(this.auth._key());if(!e){try{const r=await KC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}vc.set(this.auth._key(),e)}return this.bypassAuthState||vc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KC(n,e){const t=YC(e),r=QC(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function GC(n,e){vc.set(n._key(),e)}function QC(n){return Ai(n._redirectPersistence)}function YC(n){return _c(WC,n.config.apiKey,n.name)}async function JC(n,e,t=!1){if(Ti(n.app))return Promise.reject(ao(n));const r=Yc(n),s=Uw(r,e),u=await new qC(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=600*1e3;class ZC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Bw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(br(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XC&&this.cachedEventUids.clear(),this.cachedEventUids.has(V_(e))}saveEventToCache(e){this.cachedEventUids.add(V_(e)),this.lastProcessedEventTime=Date.now()}}function V_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Bw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function eP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tP(n,e={}){return Aa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rP=/^https?/;async function iP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await tP(n);for(const t of e)try{if(sP(t))return}catch{}ti(n,"unauthorized-domain")}function sP(n){const e=Gf(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!rP.test(t))return!1;if(nP.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=new $l(3e4,6e4);function U_(){const n=Xr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function aP(n){return new Promise((e,t)=>{var r,s,a;function u(){U_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{U_(),t(br(n,"network-request-failed"))},timeout:oP.get()})}if(!((s=(r=Xr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Xr().gapi)===null||a===void 0)&&a.load)u();else{const d=hC("iframefcb");return Xr()[d]=()=>{gapi.load?u():t(br(n,"network-request-failed"))},uC(`${cC()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw Ec=null,e})}let Ec=null;function lP(n){return Ec=Ec||aP(n),Ec}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=new $l(5e3,15e3),cP="__/auth/iframe",hP="emulator/auth/iframe",dP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pP(n){const e=n.config;Fe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Pp(e,hP):`https://${n.config.authDomain}/${cP}`,r={apiKey:e.apiKey,appName:n.name,v:_o},s=fP.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${jl(r).slice(1)}`}async function mP(n){const e=await lP(n),t=Xr().gapi;return Fe(t,n,"internal-error"),e.open({where:document.body,url:pP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dP,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const u=br(n,"network-request-failed"),d=Xr().setTimeout(()=>{a(u)},uP.get());function f(){Xr().clearTimeout(d),s(r)}r.ping(f).then(f,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yP=500,_P=600,vP="_blank",EP="http://localhost";class F_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wP(n,e,t,r=yP,s=_P){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f=Object.assign(Object.assign({},gP),{width:r.toString(),height:s.toString(),top:a,left:u}),m=Rn().toLowerCase();t&&(d=Ew(m)?vP:t),_w(m)&&(e=e||EP,f.scrollbars="yes");const _=Object.entries(f).reduce((S,[P,x])=>`${S}${P}=${x},`,"");if(tC(m)&&d!=="_self")return TP(e||"",d),new F_(null);const E=window.open(e||"",d,_);Fe(E,n,"popup-blocked");try{E.focus()}catch{}return new F_(E)}function TP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP="__/auth/handler",SP="emulator/auth/handler",AP=encodeURIComponent("fac");async function B_(n,e,t,r,s,a){Fe(n.config.authDomain,n,"auth-domain-config-required"),Fe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:_o,eventId:s};if(e instanceof Op){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",P1(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof zl){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const f=await n._getAppCheckToken(),m=f?`#${AP}=${encodeURIComponent(f)}`:"";return`${RP(n)}?${jl(d).slice(1)}${m}`}function RP({config:n}){return n.emulator?Pp(n,SP):`https://${n.authDomain}/${IP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="webStorageSupport";class CP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ow,this._completeRedirectFn=JC,this._overrideRedirectResult=GC}async _openPopup(e,t,r,s){var a;ki((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const u=await B_(e,t,r,Gf(),s);return wP(e,u,xp())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await B_(e,t,r,Gf(),s);return DC(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(ki(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await mP(e),r=new ZC(e);return t.register("authEvent",s=>(Fe(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(lf,{type:lf},s=>{var a;const u=(a=s?.[0])===null||a===void 0?void 0:a[lf];u!==void 0&&t(!!u),ti(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Aw()||vw()||Np()}}const PP=CP;var j_="@firebase/auth",$_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NP(n){Is(new R_("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;Fe(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rw(n)},m=new aC(r,s,a,f);return fC(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Is(new R_("auth-internal",e=>{const t=Yc(e.getProvider("auth").getImmediate());return(r=>new kP(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),dr(j_,$_,DP(n)),dr(j_,$_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=300,OP=aw("authIdTokenMaxAge")||bP;let z_=null;const xP=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>OP)return;const s=t?.token;z_!==s&&(z_=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function LP(n=Kc()){const e=Bl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=dC(n,{popupRedirectResolver:PP,persistence:[FC,CC,Ow]}),r=aw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const u=xP(a.toString());TC(t,u,()=>u(t.currentUser)),wC(t,d=>u(d))}}const s=v1("auth");return s&&pC(t,`http://${s}`),t}function MP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}lC({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=br("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",MP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NP("Browser");var H_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},VP=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},$w={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,d=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,_=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|m>>6,P=m&63;f||(P=64,u||(S=64)),r.push(t[_],t[E],t[S],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(jw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):VP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||m==null||E==null)throw new UP;const S=a<<2|d>>4;if(r.push(S),m!==64){const P=d<<4&240|m>>2;if(r.push(P),E!==64){const x=m<<6&192|E;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};let UP=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};const FP=function(n){const e=jw(n);return $w.encodeByteArray(e,!0)},W_=function(n){return FP(n).replace(/\./g,"")},BP=function(n){try{return $w.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=()=>jP().__FIREBASE_DEFAULTS__,zP=()=>{if(typeof process>"u"||typeof H_>"u")return;const n=H_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},HP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&BP(n[1]);return e&&JSON.parse(e)},zw=()=>{try{return $P()||zP()||HP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},WP=n=>{var e,t;return(t=(e=zw())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},qP=n=>{const e=WP(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[W_(JSON.stringify(t)),W_(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QP(){var n;const e=(n=zw())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YP(){return!QP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="FirebaseError";let Hw=class Ww extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=JP,Object.setPrototypeOf(this,Ww.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,XP.prototype.create)}},XP=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?ZP(a,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new Hw(s,d,r)}};function ZP(n,e){return n.replace(ek,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const ek=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(n){return n&&n._delegate?n._delegate:n}let tk=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(it||(it={}));const nk={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},rk=it.INFO,ik={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},sk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=ik[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ok{constructor(e){this.name=e,this._logLevel=rk,this._logHandler=sk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}var q_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lo,qw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,A){function I(){}I.prototype=A.prototype,T.D=A.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(C,D,b){for(var k=Array(arguments.length-2),de=2;de<arguments.length;de++)k[de-2]=arguments[de];return A.prototype[D].apply(C,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,A,I){I||(I=0);var C=Array(16);if(typeof A=="string")for(var D=0;16>D;++D)C[D]=A.charCodeAt(I++)|A.charCodeAt(I++)<<8|A.charCodeAt(I++)<<16|A.charCodeAt(I++)<<24;else for(D=0;16>D;++D)C[D]=A[I++]|A[I++]<<8|A[I++]<<16|A[I++]<<24;A=T.g[0],I=T.g[1],D=T.g[2];var b=T.g[3],k=A+(b^I&(D^b))+C[0]+3614090360&4294967295;A=I+(k<<7&4294967295|k>>>25),k=b+(D^A&(I^D))+C[1]+3905402710&4294967295,b=A+(k<<12&4294967295|k>>>20),k=D+(I^b&(A^I))+C[2]+606105819&4294967295,D=b+(k<<17&4294967295|k>>>15),k=I+(A^D&(b^A))+C[3]+3250441966&4294967295,I=D+(k<<22&4294967295|k>>>10),k=A+(b^I&(D^b))+C[4]+4118548399&4294967295,A=I+(k<<7&4294967295|k>>>25),k=b+(D^A&(I^D))+C[5]+1200080426&4294967295,b=A+(k<<12&4294967295|k>>>20),k=D+(I^b&(A^I))+C[6]+2821735955&4294967295,D=b+(k<<17&4294967295|k>>>15),k=I+(A^D&(b^A))+C[7]+4249261313&4294967295,I=D+(k<<22&4294967295|k>>>10),k=A+(b^I&(D^b))+C[8]+1770035416&4294967295,A=I+(k<<7&4294967295|k>>>25),k=b+(D^A&(I^D))+C[9]+2336552879&4294967295,b=A+(k<<12&4294967295|k>>>20),k=D+(I^b&(A^I))+C[10]+4294925233&4294967295,D=b+(k<<17&4294967295|k>>>15),k=I+(A^D&(b^A))+C[11]+2304563134&4294967295,I=D+(k<<22&4294967295|k>>>10),k=A+(b^I&(D^b))+C[12]+1804603682&4294967295,A=I+(k<<7&4294967295|k>>>25),k=b+(D^A&(I^D))+C[13]+4254626195&4294967295,b=A+(k<<12&4294967295|k>>>20),k=D+(I^b&(A^I))+C[14]+2792965006&4294967295,D=b+(k<<17&4294967295|k>>>15),k=I+(A^D&(b^A))+C[15]+1236535329&4294967295,I=D+(k<<22&4294967295|k>>>10),k=A+(D^b&(I^D))+C[1]+4129170786&4294967295,A=I+(k<<5&4294967295|k>>>27),k=b+(I^D&(A^I))+C[6]+3225465664&4294967295,b=A+(k<<9&4294967295|k>>>23),k=D+(A^I&(b^A))+C[11]+643717713&4294967295,D=b+(k<<14&4294967295|k>>>18),k=I+(b^A&(D^b))+C[0]+3921069994&4294967295,I=D+(k<<20&4294967295|k>>>12),k=A+(D^b&(I^D))+C[5]+3593408605&4294967295,A=I+(k<<5&4294967295|k>>>27),k=b+(I^D&(A^I))+C[10]+38016083&4294967295,b=A+(k<<9&4294967295|k>>>23),k=D+(A^I&(b^A))+C[15]+3634488961&4294967295,D=b+(k<<14&4294967295|k>>>18),k=I+(b^A&(D^b))+C[4]+3889429448&4294967295,I=D+(k<<20&4294967295|k>>>12),k=A+(D^b&(I^D))+C[9]+568446438&4294967295,A=I+(k<<5&4294967295|k>>>27),k=b+(I^D&(A^I))+C[14]+3275163606&4294967295,b=A+(k<<9&4294967295|k>>>23),k=D+(A^I&(b^A))+C[3]+4107603335&4294967295,D=b+(k<<14&4294967295|k>>>18),k=I+(b^A&(D^b))+C[8]+1163531501&4294967295,I=D+(k<<20&4294967295|k>>>12),k=A+(D^b&(I^D))+C[13]+2850285829&4294967295,A=I+(k<<5&4294967295|k>>>27),k=b+(I^D&(A^I))+C[2]+4243563512&4294967295,b=A+(k<<9&4294967295|k>>>23),k=D+(A^I&(b^A))+C[7]+1735328473&4294967295,D=b+(k<<14&4294967295|k>>>18),k=I+(b^A&(D^b))+C[12]+2368359562&4294967295,I=D+(k<<20&4294967295|k>>>12),k=A+(I^D^b)+C[5]+4294588738&4294967295,A=I+(k<<4&4294967295|k>>>28),k=b+(A^I^D)+C[8]+2272392833&4294967295,b=A+(k<<11&4294967295|k>>>21),k=D+(b^A^I)+C[11]+1839030562&4294967295,D=b+(k<<16&4294967295|k>>>16),k=I+(D^b^A)+C[14]+4259657740&4294967295,I=D+(k<<23&4294967295|k>>>9),k=A+(I^D^b)+C[1]+2763975236&4294967295,A=I+(k<<4&4294967295|k>>>28),k=b+(A^I^D)+C[4]+1272893353&4294967295,b=A+(k<<11&4294967295|k>>>21),k=D+(b^A^I)+C[7]+4139469664&4294967295,D=b+(k<<16&4294967295|k>>>16),k=I+(D^b^A)+C[10]+3200236656&4294967295,I=D+(k<<23&4294967295|k>>>9),k=A+(I^D^b)+C[13]+681279174&4294967295,A=I+(k<<4&4294967295|k>>>28),k=b+(A^I^D)+C[0]+3936430074&4294967295,b=A+(k<<11&4294967295|k>>>21),k=D+(b^A^I)+C[3]+3572445317&4294967295,D=b+(k<<16&4294967295|k>>>16),k=I+(D^b^A)+C[6]+76029189&4294967295,I=D+(k<<23&4294967295|k>>>9),k=A+(I^D^b)+C[9]+3654602809&4294967295,A=I+(k<<4&4294967295|k>>>28),k=b+(A^I^D)+C[12]+3873151461&4294967295,b=A+(k<<11&4294967295|k>>>21),k=D+(b^A^I)+C[15]+530742520&4294967295,D=b+(k<<16&4294967295|k>>>16),k=I+(D^b^A)+C[2]+3299628645&4294967295,I=D+(k<<23&4294967295|k>>>9),k=A+(D^(I|~b))+C[0]+4096336452&4294967295,A=I+(k<<6&4294967295|k>>>26),k=b+(I^(A|~D))+C[7]+1126891415&4294967295,b=A+(k<<10&4294967295|k>>>22),k=D+(A^(b|~I))+C[14]+2878612391&4294967295,D=b+(k<<15&4294967295|k>>>17),k=I+(b^(D|~A))+C[5]+4237533241&4294967295,I=D+(k<<21&4294967295|k>>>11),k=A+(D^(I|~b))+C[12]+1700485571&4294967295,A=I+(k<<6&4294967295|k>>>26),k=b+(I^(A|~D))+C[3]+2399980690&4294967295,b=A+(k<<10&4294967295|k>>>22),k=D+(A^(b|~I))+C[10]+4293915773&4294967295,D=b+(k<<15&4294967295|k>>>17),k=I+(b^(D|~A))+C[1]+2240044497&4294967295,I=D+(k<<21&4294967295|k>>>11),k=A+(D^(I|~b))+C[8]+1873313359&4294967295,A=I+(k<<6&4294967295|k>>>26),k=b+(I^(A|~D))+C[15]+4264355552&4294967295,b=A+(k<<10&4294967295|k>>>22),k=D+(A^(b|~I))+C[6]+2734768916&4294967295,D=b+(k<<15&4294967295|k>>>17),k=I+(b^(D|~A))+C[13]+1309151649&4294967295,I=D+(k<<21&4294967295|k>>>11),k=A+(D^(I|~b))+C[4]+4149444226&4294967295,A=I+(k<<6&4294967295|k>>>26),k=b+(I^(A|~D))+C[11]+3174756917&4294967295,b=A+(k<<10&4294967295|k>>>22),k=D+(A^(b|~I))+C[2]+718787259&4294967295,D=b+(k<<15&4294967295|k>>>17),k=I+(b^(D|~A))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+A&4294967295,T.g[1]=T.g[1]+(D+(k<<21&4294967295|k>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+b&4294967295}r.prototype.u=function(T,A){A===void 0&&(A=T.length);for(var I=A-this.blockSize,C=this.B,D=this.h,b=0;b<A;){if(D==0)for(;b<=I;)s(this,T,b),b+=this.blockSize;if(typeof T=="string"){for(;b<A;)if(C[D++]=T.charCodeAt(b++),D==this.blockSize){s(this,C),D=0;break}}else for(;b<A;)if(C[D++]=T[b++],D==this.blockSize){s(this,C),D=0;break}}this.h=D,this.o+=A},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var A=1;A<T.length-8;++A)T[A]=0;var I=8*this.o;for(A=T.length-8;A<T.length;++A)T[A]=I&255,I/=256;for(this.u(T),T=Array(16),A=I=0;4>A;++A)for(var C=0;32>C;C+=8)T[I++]=this.g[A]>>>C&255;return T};function a(T,A){var I=d;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=A(T)}function u(T,A){this.h=A;for(var I=[],C=!0,D=T.length-1;0<=D;D--){var b=T[D]|0;C&&b==A||(I[D]=b,C=!1)}this.g=I}var d={};function f(T){return-128<=T&&128>T?a(T,function(A){return new u([A|0],0>A?-1:0)}):new u([T|0],0>T?-1:0)}function m(T){if(isNaN(T)||!isFinite(T))return E;if(0>T)return V(m(-T));for(var A=[],I=1,C=0;T>=I;C++)A[C]=T/I|0,I*=4294967296;return new u(A,0)}function _(T,A){if(T.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T.charAt(0)=="-")return V(_(T.substring(1),A));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=m(Math.pow(A,8)),C=E,D=0;D<T.length;D+=8){var b=Math.min(8,T.length-D),k=parseInt(T.substring(D,D+b),A);8>b?(b=m(Math.pow(A,b)),C=C.j(b).add(m(k))):(C=C.j(I),C=C.add(m(k)))}return C}var E=f(0),S=f(1),P=f(16777216);n=u.prototype,n.m=function(){if(M(this))return-V(this).m();for(var T=0,A=1,I=0;I<this.g.length;I++){var C=this.i(I);T+=(0<=C?C:4294967296+C)*A,A*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(x(this))return"0";if(M(this))return"-"+V(this).toString(T);for(var A=m(Math.pow(T,6)),I=this,C="";;){var D=J(I,A).g;I=Q(I,D.j(A));var b=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=D,x(I))return b+C;for(;6>b.length;)b="0"+b;C=b+C}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function x(T){if(T.h!=0)return!1;for(var A=0;A<T.g.length;A++)if(T.g[A]!=0)return!1;return!0}function M(T){return T.h==-1}n.l=function(T){return T=Q(this,T),M(T)?-1:x(T)?0:1};function V(T){for(var A=T.g.length,I=[],C=0;C<A;C++)I[C]=~T.g[C];return new u(I,~T.h).add(S)}n.abs=function(){return M(this)?V(this):this},n.add=function(T){for(var A=Math.max(this.g.length,T.g.length),I=[],C=0,D=0;D<=A;D++){var b=C+(this.i(D)&65535)+(T.i(D)&65535),k=(b>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);C=k>>>16,b&=65535,k&=65535,I[D]=k<<16|b}return new u(I,I[I.length-1]&-2147483648?-1:0)};function Q(T,A){return T.add(V(A))}n.j=function(T){if(x(this)||x(T))return E;if(M(this))return M(T)?V(this).j(V(T)):V(V(this).j(T));if(M(T))return V(this.j(V(T)));if(0>this.l(P)&&0>T.l(P))return m(this.m()*T.m());for(var A=this.g.length+T.g.length,I=[],C=0;C<2*A;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var D=0;D<T.g.length;D++){var b=this.i(C)>>>16,k=this.i(C)&65535,de=T.i(D)>>>16,Je=T.i(D)&65535;I[2*C+2*D]+=k*Je,K(I,2*C+2*D),I[2*C+2*D+1]+=b*Je,K(I,2*C+2*D+1),I[2*C+2*D+1]+=k*de,K(I,2*C+2*D+1),I[2*C+2*D+2]+=b*de,K(I,2*C+2*D+2)}for(C=0;C<A;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=A;C<2*A;C++)I[C]=0;return new u(I,0)};function K(T,A){for(;(T[A]&65535)!=T[A];)T[A+1]+=T[A]>>>16,T[A]&=65535,A++}function Y(T,A){this.g=T,this.h=A}function J(T,A){if(x(A))throw Error("division by zero");if(x(T))return new Y(E,E);if(M(T))return A=J(V(T),A),new Y(V(A.g),V(A.h));if(M(A))return A=J(T,V(A)),new Y(V(A.g),A.h);if(30<T.g.length){if(M(T)||M(A))throw Error("slowDivide_ only works with positive integers.");for(var I=S,C=A;0>=C.l(T);)I=fe(I),C=fe(C);var D=te(I,1),b=te(C,1);for(C=te(C,2),I=te(I,2);!x(C);){var k=b.add(C);0>=k.l(T)&&(D=D.add(I),b=k),C=te(C,1),I=te(I,1)}return A=Q(T,D.j(A)),new Y(D,A)}for(D=E;0<=T.l(A);){for(I=Math.max(1,Math.floor(T.m()/A.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),b=m(I),k=b.j(A);M(k)||0<k.l(T);)I-=C,b=m(I),k=b.j(A);x(b)&&(b=S),D=D.add(b),T=Q(T,k)}return new Y(D,T)}n.A=function(T){return J(this,T).h},n.and=function(T){for(var A=Math.max(this.g.length,T.g.length),I=[],C=0;C<A;C++)I[C]=this.i(C)&T.i(C);return new u(I,this.h&T.h)},n.or=function(T){for(var A=Math.max(this.g.length,T.g.length),I=[],C=0;C<A;C++)I[C]=this.i(C)|T.i(C);return new u(I,this.h|T.h)},n.xor=function(T){for(var A=Math.max(this.g.length,T.g.length),I=[],C=0;C<A;C++)I[C]=this.i(C)^T.i(C);return new u(I,this.h^T.h)};function fe(T){for(var A=T.g.length+1,I=[],C=0;C<A;C++)I[C]=T.i(C)<<1|T.i(C-1)>>>31;return new u(I,T.h)}function te(T,A){var I=A>>5;A%=32;for(var C=T.g.length-I,D=[],b=0;b<C;b++)D[b]=0<A?T.i(b+I)>>>A|T.i(b+I+1)<<32-A:T.i(b+I);return new u(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qw=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,lo=u}).apply(typeof q_<"u"?q_:typeof self<"u"?self:typeof window<"u"?window:{});var lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kw,pl,Gw,wc,Jf,Qw,Yw,Jw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,v){return c==Array.prototype||c==Object.prototype||(c[g]=v.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof lc=="object"&&lc];for(var g=0;g<c.length;++g){var v=c[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function s(c,g){if(g)e:{var v=r;c=c.split(".");for(var R=0;R<c.length-1;R++){var j=c[R];if(!(j in v))break e;v=v[j]}c=c[c.length-1],R=v[c],g=g(R),g!=R&&g!=null&&e(v,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var v=0,R=!1,j={next:function(){if(!R&&v<c.length){var G=v++;return{value:g(G,c[G]),done:!1}}return R=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},d=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function m(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function _(c,g,v){return c.call.apply(c.bind,arguments)}function E(c,g,v){if(!c)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,R),c.apply(g,j)}}return function(){return c.apply(g,arguments)}}function S(c,g,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,S.apply(null,arguments)}function P(c,g){var v=Array.prototype.slice.call(arguments,1);return function(){var R=v.slice();return R.push.apply(R,arguments),c.apply(this,R)}}function x(c,g){function v(){}v.prototype=g.prototype,c.aa=g.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(R,j,G){for(var ue=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)ue[ct-2]=arguments[ct];return g.prototype[j].apply(R,ue)}}function M(c){const g=c.length;if(0<g){const v=Array(g);for(let R=0;R<g;R++)v[R]=c[R];return v}return[]}function V(c,g){for(let v=1;v<arguments.length;v++){const R=arguments[v];if(f(R)){const j=c.length||0,G=R.length||0;c.length=j+G;for(let ue=0;ue<G;ue++)c[j+ue]=R[ue]}else c.push(R)}}class Q{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function K(c){return/^[\s\xa0]*$/.test(c)}function Y(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var fe=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function te(c,g,v){for(const R in c)g.call(v,c[R],R,c)}function T(c,g){for(const v in c)g.call(void 0,c[v],v,c)}function A(c){const g={};for(const v in c)g[v]=c[v];return g}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,g){let v,R;for(let j=1;j<arguments.length;j++){R=arguments[j];for(v in R)c[v]=R[v];for(let G=0;G<I.length;G++)v=I[G],Object.prototype.hasOwnProperty.call(R,v)&&(c[v]=R[v])}}function D(c){var g=1;c=c.split(":");const v=[];for(;0<g&&c.length;)v.push(c.shift()),g--;return c.length&&v.push(c.join(":")),v}function b(c){d.setTimeout(()=>{throw c},0)}function k(){var c=Re;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class de{constructor(){this.h=this.g=null}add(g,v){const R=Je.get();R.set(g,v),this.h?this.h.next=R:this.g=R,this.h=R}}var Je=new Q(()=>new ft,c=>c.reset());class ft{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Xe,se=!1,Re=new de,he=()=>{const c=d.Promise.resolve(void 0);Xe=()=>{c.then(F)}};var F=()=>{for(var c;c=k();){try{c.h.call(c.g)}catch(v){b(v)}var g=Je;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}se=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _e(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}_e.prototype.h=function(){this.defaultPrevented=!0};var Le=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};d.addEventListener("test",v,g),d.removeEventListener("test",v,g)}catch{}return c})();function Pe(c,g){if(_e.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,R=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(fe){e:{try{J(g.nodeName);var j=!0;break e}catch{}j=!1}j||(g=null)}}else v=="mouseover"?g=c.fromElement:v=="mouseout"&&(g=c.toElement);this.relatedTarget=g,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:je[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Pe.aa.h.call(this)}}x(Pe,_e);var je={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),Ve=0;function Ze(c,g,v,R,j){this.listener=c,this.proxy=null,this.src=g,this.type=v,this.capture=!!R,this.ha=j,this.key=++Ve,this.da=this.fa=!1}function wt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function pr(c){this.src=c,this.g={},this.h=0}pr.prototype.add=function(c,g,v,R,j){var G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);var ue=En(c,g,R,j);return-1<ue?(g=c[ue],v||(g.fa=!1)):(g=new Ze(g,this.src,G,!!R,j),g.fa=v,c.push(g)),g};function Dt(c,g){var v=g.type;if(v in c.g){var R=c.g[v],j=Array.prototype.indexOf.call(R,g,void 0),G;(G=0<=j)&&Array.prototype.splice.call(R,j,1),G&&(wt(g),c.g[v].length==0&&(delete c.g[v],c.h--))}}function En(c,g,v,R){for(var j=0;j<c.length;++j){var G=c[j];if(!G.da&&G.listener==g&&G.capture==!!v&&G.ha==R)return j}return-1}var xr="closure_lm_"+(1e6*Math.random()|0),xi={};function $n(c,g,v,R,j){if(Array.isArray(g)){for(var G=0;G<g.length;G++)$n(c,g[G],v,R,j);return null}return v=yr(v),c&&c[Oe]?c.K(g,v,m(R)?!!R.capture:!1,j):Ns(c,g,v,!1,R,j)}function Ns(c,g,v,R,j,G){if(!g)throw Error("Invalid event type");var ue=m(j)?!!j.capture:!!j,ct=Li(c);if(ct||(c[xr]=ct=new pr(c)),v=ct.add(g,v,R,ue,G),v.proxy)return v;if(R=Io(),v.proxy=R,R.src=c,R.listener=v,c.addEventListener)Le||(j=ue),j===void 0&&(j=!1),c.addEventListener(g.toString(),R,j);else if(c.attachEvent)c.attachEvent(gr(g.toString()),R);else if(c.addListener&&c.removeListener)c.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Io(){function c(v){return g.call(c.src,c.listener,v)}const g=bs;return c}function ii(c,g,v,R,j){if(Array.isArray(g))for(var G=0;G<g.length;G++)ii(c,g[G],v,R,j);else R=m(R)?!!R.capture:!!R,v=yr(v),c&&c[Oe]?(c=c.i,g=String(g).toString(),g in c.g&&(G=c.g[g],v=En(G,v,R,j),-1<v&&(wt(G[v]),Array.prototype.splice.call(G,v,1),G.length==0&&(delete c.g[g],c.h--)))):c&&(c=Li(c))&&(g=c.g[g.toString()],c=-1,g&&(c=En(g,v,R,j)),(v=-1<c?g[c]:null)&&mr(v))}function mr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Oe])Dt(g.i,c);else{var v=c.type,R=c.proxy;g.removeEventListener?g.removeEventListener(v,R,c.capture):g.detachEvent?g.detachEvent(gr(v),R):g.addListener&&g.removeListener&&g.removeListener(R),(v=Li(g))?(Dt(v,c),v.h==0&&(v.src=null,g[xr]=null)):wt(c)}}}function gr(c){return c in xi?xi[c]:xi[c]="on"+c}function bs(c,g){if(c.da)c=!0;else{g=new Pe(g,this);var v=c.listener,R=c.ha||c.src;c.fa&&mr(c),c=v.call(R,g)}return c}function Li(c){return c=c[xr],c instanceof pr?c:null}var Cn="__closure_events_fn_"+(1e9*Math.random()>>>0);function yr(c){return typeof c=="function"?c:(c[Cn]||(c[Cn]=function(g){return c.handleEvent(g)}),c[Cn])}function Nt(){X.call(this),this.i=new pr(this),this.M=this,this.F=null}x(Nt,X),Nt.prototype[Oe]=!0,Nt.prototype.removeEventListener=function(c,g,v,R){ii(this,c,g,v,R)};function At(c,g){var v,R=c.F;if(R)for(v=[];R;R=R.F)v.push(R);if(c=c.M,R=g.type||g,typeof g=="string")g=new _e(g,c);else if(g instanceof _e)g.target=g.target||c;else{var j=g;g=new _e(R,c),C(g,j)}if(j=!0,v)for(var G=v.length-1;0<=G;G--){var ue=g.g=v[G];j=Gt(ue,R,!0,g)&&j}if(ue=g.g=c,j=Gt(ue,R,!0,g)&&j,j=Gt(ue,R,!1,g)&&j,v)for(G=0;G<v.length;G++)ue=g.g=v[G],j=Gt(ue,R,!1,g)&&j}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var v=c.g[g],R=0;R<v.length;R++)wt(v[R]);delete c.g[g],c.h--}}this.F=null},Nt.prototype.K=function(c,g,v,R){return this.i.add(String(c),g,!1,v,R)},Nt.prototype.L=function(c,g,v,R){return this.i.add(String(c),g,!0,v,R)};function Gt(c,g,v,R){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var j=!0,G=0;G<g.length;++G){var ue=g[G];if(ue&&!ue.da&&ue.capture==v){var ct=ue.listener,Ht=ue.ha||ue.src;ue.fa&&Dt(c.i,ue),j=ct.call(Ht,R)!==!1&&j}}return j&&!R.defaultPrevented}function wn(c,g,v){if(typeof c=="function")v&&(c=S(c,v));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:d.setTimeout(c,g||0)}function _r(c){c.g=wn(()=>{c.g=null,c.i&&(c.i=!1,_r(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class tr extends X{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:_r(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function si(c){X.call(this),this.h=c,this.g={}}x(si,X);var Pn=[];function Mi(c){te(c.g,function(g,v){this.g.hasOwnProperty(v)&&mr(g)},c),c.g={}}si.prototype.N=function(){si.aa.N.call(this),Mi(this)},si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vi=d.JSON.stringify,Ui=d.JSON.parse,Os=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function Lr(){}Lr.prototype.h=null;function vr(c){return c.h||(c.h=c.i())}function oi(){}var cn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kn(){_e.call(this,"d")}x(kn,_e);function Fi(){_e.call(this,"c")}x(Fi,_e);var zn={},xs=null;function Mr(){return xs=xs||new Nt}zn.La="serverreachability";function Vr(c){_e.call(this,zn.La,c)}x(Vr,_e);function Dn(c){const g=Mr();At(g,new Vr(g))}zn.STAT_EVENT="statevent";function Ls(c,g){_e.call(this,zn.STAT_EVENT,c),this.stat=g}x(Ls,_e);function Rt(c){const g=Mr();At(g,new Ls(g,c))}zn.Ma="timingevent";function O(c,g){_e.call(this,zn.Ma,c),this.size=g}x(O,_e);function B(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},g)}function W(){this.g=!0}W.prototype.xa=function(){this.g=!1};function ne(c,g,v,R,j,G){c.info(function(){if(c.g)if(G)for(var ue="",ct=G.split("&"),Ht=0;Ht<ct.length;Ht++){var tt=ct[Ht].split("=");if(1<tt.length){var Qt=tt[0];tt=tt[1];var Ft=Qt.split("_");ue=2<=Ft.length&&Ft[1]=="type"?ue+(Qt+"="+tt+"&"):ue+(Qt+"=redacted&")}}else ue=null;else ue=G;return"XMLHTTP REQ ("+R+") [attempt "+j+"]: "+g+`
`+v+`
`+ue})}function ce(c,g,v,R,j,G,ue){c.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+j+"]: "+g+`
`+v+`
`+G+" "+ue})}function Ee(c,g,v,R){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+we(c,v)+(R?" "+R:"")})}function De(c,g){c.info(function(){return"TIMEOUT: "+g})}W.prototype.info=function(){};function we(c,g){if(!c.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var R=v[c];if(!(2>R.length)){var j=R[1];if(Array.isArray(j)&&!(1>j.length)){var G=j[0];if(G!="noop"&&G!="stop"&&G!="close")for(var ue=1;ue<j.length;ue++)j[ue]=""}}}}return Vi(v)}catch{return g}}var ve={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},me={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ge;function xe(){}x(xe,Lr),xe.prototype.g=function(){return new XMLHttpRequest},xe.prototype.i=function(){return{}},ge=new xe;function Ue(c,g,v,R){this.j=c,this.i=g,this.l=v,this.R=R||1,this.U=new si(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bt}function bt(){this.i=null,this.g="",this.h=!1}var st={},He={};function ut(c,g,v){c.L=1,c.v=Hi(qn(g)),c.m=v,c.P=!0,nr(c,null)}function nr(c,g){c.F=Date.now(),qe(c),c.A=qn(c.v);var v=c.A,R=c.R;Array.isArray(R)||(R=[String(R)]),qi(v.i,"t",R),c.C=0,v=c.j.J,c.h=new bt,c.g=cu(c.j,v?g:null,!c.m),0<c.O&&(c.M=new tr(S(c.Y,c,c.g),c.O)),g=c.U,v=c.g,R=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(Pn[0]=j.toString()),j=Pn);for(var G=0;G<j.length;G++){var ue=$n(v,j[G],R||g.handleEvent,!1,g.h||g);if(!ue)break;g.g[ue.key]=ue}g=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Dn(),ne(c.i,c.u,c.A,c.l,c.R,c.m)}Ue.prototype.ca=function(c){c=c.target;const g=this.M;g&&bn(c)==3?g.j():this.Y(c)},Ue.prototype.Y=function(c){try{if(c==this.g)e:{const Ft=bn(this.g);var g=this.g.Ba();const sr=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||Oa(this.g)))){this.J||Ft!=4||g==7||(g==8||0>=sr?Dn(3):Dn(2)),Wn(this);var v=this.g.Z();this.X=v;t:if(Ur(this)){var R=Oa(this.g);c="";var j=R.length,G=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){en(this),hn(this);var ue="";break t}this.h.i=new d.TextDecoder}for(g=0;g<j;g++)this.h.h=!0,c+=this.h.i.decode(R[g],{stream:!(G&&g==j-1)});R.length=0,this.h.g+=c,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=v==200,ce(this.i,this.u,this.A,this.l,this.R,Ft,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,Ht=this.g;if((ct=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(ct)){var tt=ct;break t}}tt=null}if(v=tt)Ee(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fr(this,v);else{this.o=!1,this.s=3,Rt(12),en(this),hn(this);break e}}if(this.P){v=!0;let Gn;for(;!this.J&&this.C<ue.length;)if(Gn=Hn(this,ue),Gn==He){Ft==4&&(this.s=4,Rt(14),v=!1),Ee(this.i,this.l,null,"[Incomplete Response]");break}else if(Gn==st){this.s=4,Rt(15),Ee(this.i,this.l,ue,"[Invalid Chunk]"),v=!1;break}else Ee(this.i,this.l,Gn,null),Fr(this,Gn);if(Ur(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||ue.length!=0||this.h.h||(this.s=1,Rt(16),v=!1),this.o=this.o&&v,!v)Ee(this.i,this.l,ue,"[Invalid Chunked Response]"),en(this),hn(this);else if(0<ue.length&&!this.W){this.W=!0;var Qt=this.j;Qt.g==this&&Qt.ba&&!Qt.M&&(Qt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),La(Qt),Qt.M=!0,Rt(11))}}else Ee(this.i,this.l,ue,null),Fr(this,ue);Ft==4&&en(this),this.o&&!this.J&&(Ft==4?Lo(this.j,this):(this.o=!1,qe(this)))}else Do(this.g),v==400&&0<ue.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),en(this),hn(this)}}}catch{}finally{}};function Ur(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Hn(c,g){var v=c.C,R=g.indexOf(`
`,v);return R==-1?He:(v=Number(g.substring(v,R)),isNaN(v)?st:(R+=1,R+v>g.length?He:(g=g.slice(R,R+v),c.C=R+v,g)))}Ue.prototype.cancel=function(){this.J=!0,en(this)};function qe(c){c.S=Date.now()+c.I,Bi(c,c.I)}function Bi(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=B(S(c.ba,c),g)}function Wn(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Ue.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(De(this.i,this.A),this.L!=2&&(Dn(),Rt(17)),en(this),this.s=2,hn(this)):Bi(this,this.S-c)};function hn(c){c.j.G==0||c.J||Lo(c.j,c)}function en(c){Wn(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Mi(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Fr(c,g){try{var v=c.j;if(v.G!=0&&(v.g==c||Ge(v.h,c))){if(!c.K&&Ge(v.h,c)&&v.G==3){try{var R=v.Da.g.parse(g)}catch{R=null}if(Array.isArray(R)&&R.length==3){var j=R;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)xo(v),Sr(v);else break e;Oo(v),Rt(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=B(S(v.Za,v),6e3));if(1>=Br(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else hi(v,11)}else if((c.K||v.g==c)&&xo(v),!K(g))for(j=v.Da.g.parse(g),g=0;g<j.length;g++){let tt=j[g];if(v.T=tt[0],tt=tt[1],v.G==2)if(tt[0]=="c"){v.K=tt[1],v.ia=tt[2];const Qt=tt[3];Qt!=null&&(v.la=Qt,v.j.info("VER="+v.la));const Ft=tt[4];Ft!=null&&(v.Aa=Ft,v.j.info("SVER="+v.Aa));const sr=tt[5];sr!=null&&typeof sr=="number"&&0<sr&&(R=1.5*sr,v.L=R,v.j.info("backChannelRequestTimeoutMs_="+R)),R=v;const Gn=c.g;if(Gn){const $s=Gn.g?Gn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($s){var G=R.h;G.g||$s.indexOf("spdy")==-1&&$s.indexOf("quic")==-1&&$s.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(rr(G,G.h),G.h=null))}if(R.D){const Vo=Gn.g?Gn.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(R.ya=Vo,pt(R.I,R.D,Vo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),R=v;var ue=c;if(R.qa=uu(R,R.J?R.ia:null,R.W),ue.K){Ms(R.h,ue);var ct=ue,Ht=R.L;Ht&&(ct.I=Ht),ct.B&&(Wn(ct),qe(ct)),R.g=ue}else js(R);0<v.i.length&&Hr(v)}else tt[0]!="stop"&&tt[0]!="close"||hi(v,7);else v.G==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?hi(v,7):nn(v):tt[0]!="noop"&&v.l&&v.l.ta(tt),v.v=0)}}Dn(4)}catch{}}var Ke=class{constructor(c,g){this.g=c,this.map=g}};function lt(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ut(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Br(c){return c.h?1:c.g?c.g.size:0}function Ge(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function rr(c,g){c.g?c.g.add(g):c.h=g}function Ms(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}lt.prototype.cancel=function(){if(this.i=So(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function So(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const v of c.g.values())g=g.concat(v.D);return g}return M(c.i)}function Ao(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],v=c.length,R=0;R<v;R++)g.push(c[R]);return g}g=[],v=0;for(R in c)g[v++]=c[R];return g}function Ro(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var v=0;v<c;v++)g.push(v);return g}g=[],v=0;for(const R in c)g[v++]=R;return g}}}function ji(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var v=Ro(c),R=Ao(c),j=R.length,G=0;G<j;G++)g.call(void 0,R[G],v&&v[G],c)}var Vs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ih(c,g){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var R=c[v].indexOf("="),j=null;if(0<=R){var G=c[v].substring(0,R);j=c[v].substring(R+1)}else G=c[v];g(G,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function ai(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ai){this.h=c.h,Us(this,c.j),this.o=c.o,this.g=c.g,$i(this,c.s),this.l=c.l;var g=c.i,v=new jr;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),zi(this,v),this.m=c.m}else c&&(g=String(c).match(Vs))?(this.h=!1,Us(this,g[1]||"",!0),this.o=et(g[2]||""),this.g=et(g[3]||"",!0),$i(this,g[4]),this.l=et(g[5]||"",!0),zi(this,g[6]||"",!0),this.m=et(g[7]||"")):(this.h=!1,this.i=new jr(null,this.h))}ai.prototype.toString=function(){var c=[],g=this.j;g&&c.push(Wi(g,Co,!0),":");var v=this.g;return(v||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Wi(g,Co,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Wi(v,v.charAt(0)=="/"?tu:eu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Wi(v,Da)),c.join("")};function qn(c){return new ai(c)}function Us(c,g,v){c.j=v?et(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function $i(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function zi(c,g,v){g instanceof jr?(c.i=g,$r(c.i,c.h)):(v||(g=Wi(g,nu)),c.i=new jr(g,c.h))}function pt(c,g,v){c.i.set(g,v)}function Hi(c){return pt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function et(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Wi(c,g,v){return typeof c=="string"?(c=encodeURI(c).replace(g,Zl),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Zl(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Co=/[#\/\?@]/g,eu=/[#\?:]/g,tu=/[#\?]/g,nu=/[#\?@]/g,Da=/#/g;function jr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function tn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ih(c.i,function(g,v){c.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=jr.prototype,n.add=function(c,g){tn(this),this.i=null,c=ir(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(g),this.h+=1,this};function Er(c,g){tn(c),g=ir(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function wr(c,g){return tn(c),g=ir(c,g),c.g.has(g)}n.forEach=function(c,g){tn(this),this.g.forEach(function(v,R){v.forEach(function(j){c.call(g,j,R,this)},this)},this)},n.na=function(){tn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let R=0;R<g.length;R++){const j=c[R];for(let G=0;G<j.length;G++)v.push(g[R])}return v},n.V=function(c){tn(this);let g=[];if(typeof c=="string")wr(this,c)&&(g=g.concat(this.g.get(ir(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)g=g.concat(c[v])}return g},n.set=function(c,g){return tn(this),this.i=null,c=ir(this,c),wr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function qi(c,g,v){Er(c,g),0<v.length&&(c.i=null,c.g.set(ir(c,g),M(v)),c.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var R=g[v];const G=encodeURIComponent(String(R)),ue=this.V(R);for(R=0;R<ue.length;R++){var j=G;ue[R]!==""&&(j+="="+encodeURIComponent(String(ue[R]))),c.push(j)}}return this.i=c.join("&")};function ir(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function $r(c,g){g&&!c.j&&(tn(c),c.i=null,c.g.forEach(function(v,R){var j=R.toLowerCase();R!=j&&(Er(this,R),qi(this,j,v))},c)),c.j=g}function Sh(c,g){const v=new W;if(d.Image){const R=new Image;R.onload=P(Nn,v,"TestLoadImage: loaded",!0,g,R),R.onerror=P(Nn,v,"TestLoadImage: error",!1,g,R),R.onabort=P(Nn,v,"TestLoadImage: abort",!1,g,R),R.ontimeout=P(Nn,v,"TestLoadImage: timeout",!1,g,R),d.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=c}else g(!1)}function ru(c,g){const v=new W,R=new AbortController,j=setTimeout(()=>{R.abort(),Nn(v,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:R.signal}).then(G=>{clearTimeout(j),G.ok?Nn(v,"TestPingServer: ok",!0,g):Nn(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(j),Nn(v,"TestPingServer: error",!1,g)})}function Nn(c,g,v,R,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),R(v)}catch{}}function Ah(){this.g=new Os}function iu(c,g,v){const R=v||"";try{ji(c,function(j,G){let ue=j;m(j)&&(ue=Vi(j)),g.push(R+G+"="+encodeURIComponent(ue))})}catch(j){throw g.push(R+"type="+encodeURIComponent("_badmap")),j}}function li(c){this.l=c.Ub||null,this.j=c.eb||!1}x(li,Lr),li.prototype.g=function(){return new Fs(this.l,this.j)},li.prototype.i=(function(c){return function(){return c}})({});function Fs(c,g){Nt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Fs,Nt),n=Fs.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Ir(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||d).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tr(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ir(this)),this.g&&(this.readyState=3,Ir(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;su(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function su(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Tr(this):Ir(this),this.readyState==3&&su(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Tr(this))},n.Qa=function(c){this.g&&(this.response=c,Tr(this))},n.ga=function(){this.g&&Tr(this)};function Tr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ir(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=g.next();return c.join(`\r
`)};function Ir(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ui(c){let g="";return te(c,function(v,R){g+=R,g+=":",g+=v,g+=`\r
`}),g}function Ki(c,g,v){e:{for(R in v){var R=!1;break e}R=!0}R||(v=ui(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):pt(c,g,v))}function Tt(c){Nt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Tt,Nt);var Rh=/^https?$/i,Na=["POST","PUT"];n=Tt.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,v,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ge.g(),this.v=this.o?vr(this.o):vr(ge),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(G){Bs(this,G);return}if(c=v||"",v=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var j in R)v.set(j,R[j]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const G of R.keys())v.set(G,R.get(G));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(v.keys()).find(G=>G.toLowerCase()=="content-type"),j=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Na,g,void 0))||R||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ue]of v)this.g.setRequestHeader(G,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ko(this),this.u=!0,this.g.send(c),this.u=!1}catch(G){Bs(this,G)}};function Bs(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Po(c),Kn(c)}function Po(c){c.A||(c.A=!0,At(c,"complete"),At(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,At(this,"complete"),At(this,"abort"),Kn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kn(this,!0)),Tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ba(this):this.bb())},n.bb=function(){ba(this)};function ba(c){if(c.h&&typeof u<"u"&&(!c.v[1]||bn(c)!=4||c.Z()!=2)){if(c.u&&bn(c)==4)wn(c.Ea,0,c);else if(At(c,"readystatechange"),bn(c)==4){c.h=!1;try{const ue=c.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var R;if(R=ue===0){var j=String(c.D).match(Vs)[1]||null;!j&&d.self&&d.self.location&&(j=d.self.location.protocol.slice(0,-1)),R=!Rh.test(j?j.toLowerCase():"")}v=R}if(v)At(c,"complete"),At(c,"success");else{c.m=6;try{var G=2<bn(c)?c.g.statusText:""}catch{G=""}c.l=G+" ["+c.Z()+"]",Po(c)}}finally{Kn(c)}}}}function Kn(c,g){if(c.g){ko(c);const v=c.g,R=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||At(c,"ready");try{v.onreadystatechange=R}catch{}}}function ko(c){c.I&&(d.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function bn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Ui(g)}};function Oa(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Do(c){const g={};c=(c.g&&2<=bn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<c.length;R++){if(K(c[R]))continue;var v=D(c[R]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const G=g[j]||[];g[j]=G,G.push(v)}T(g,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zr(c,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||g}function xa(c){this.Aa=0,this.i=[],this.j=new W,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zr("baseRetryDelayMs",5e3,c),this.cb=zr("retryDelaySeedMs",1e4,c),this.Wa=zr("forwardChannelMaxRetries",2,c),this.wa=zr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new lt(c&&c.concurrentRequestLimit),this.Da=new Ah,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xa.prototype,n.la=8,n.G=1,n.connect=function(c,g,v,R){Rt(0),this.W=c,this.H=g||{},v&&R!==void 0&&(this.H.OSID=v,this.H.OAID=R),this.F=this.X,this.I=uu(this,null,this.W),Hr(this)};function nn(c){if(No(c),c.G==3){var g=c.U++,v=qn(c.I);if(pt(v,"SID",c.K),pt(v,"RID",g),pt(v,"TYPE","terminate"),ci(c,v),g=new Ue(c,c.j,g),g.L=2,g.v=Hi(qn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=g.v,v=!0),v||(g.g=cu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),qe(g)}lu(c)}function Sr(c){c.g&&(La(c),c.g.cancel(),c.g=null)}function No(c){Sr(c),c.u&&(d.clearTimeout(c.u),c.u=null),xo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function Hr(c){if(!Ut(c.h)&&!c.s){c.s=!0;var g=c.Ga;Xe||he(),se||(Xe(),se=!0),Re.add(g,c),c.B=0}}function Ch(c,g){return Br(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=B(S(c.Ga,c,g),au(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new Ue(this,this.j,c);let G=this.o;if(this.S&&(G?(G=A(G),C(G,this.S)):G=this.S),this.m!==null||this.O||(j.H=G,G=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var R=this.i[v];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(g+=R,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Gi(this,j,g),v=qn(this.I),pt(v,"RID",c),pt(v,"CVER",22),this.D&&pt(v,"X-HTTP-Session-Id",this.D),ci(this,v),G&&(this.O?g="headers="+encodeURIComponent(String(ui(G)))+"&"+g:this.m&&Ki(v,this.m,G)),rr(this.h,j),this.Ua&&pt(v,"TYPE","init"),this.P?(pt(v,"$req",g),pt(v,"SID","null"),j.T=!0,ut(j,v,null)):ut(j,v,g),this.G=2}}else this.G==3&&(c?bo(this,c):this.i.length==0||Ut(this.h)||bo(this))};function bo(c,g){var v;g?v=g.l:v=c.U++;const R=qn(c.I);pt(R,"SID",c.K),pt(R,"RID",v),pt(R,"AID",c.T),ci(c,R),c.m&&c.o&&Ki(R,c.m,c.o),v=new Ue(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Gi(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),rr(c.h,v),ut(v,R,g)}function ci(c,g){c.H&&te(c.H,function(v,R){pt(g,R,v)}),c.l&&ji({},function(v,R){pt(g,R,v)})}function Gi(c,g,v){v=Math.min(c.i.length,v);var R=c.l?S(c.l.Na,c.l,c):null;e:{var j=c.i;let G=-1;for(;;){const ue=["count="+v];G==-1?0<v?(G=j[0].g,ue.push("ofs="+G)):G=0:ue.push("ofs="+G);let ct=!0;for(let Ht=0;Ht<v;Ht++){let tt=j[Ht].g;const Qt=j[Ht].map;if(tt-=G,0>tt)G=Math.max(0,j[Ht].g-100),ct=!1;else try{iu(Qt,ue,"req"+tt+"_")}catch{R&&R(Qt)}}if(ct){R=ue.join("&");break e}}}return c=c.i.splice(0,v),g.D=c,R}function js(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Xe||he(),se||(Xe(),se=!0),Re.add(g,c),c.v=0}}function Oo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=B(S(c.Fa,c),au(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,ou(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=B(S(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),Sr(this),ou(this))};function La(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function ou(c){c.g=new Ue(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=qn(c.qa);pt(g,"RID","rpc"),pt(g,"SID",c.K),pt(g,"AID",c.T),pt(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&pt(g,"TO",c.ja),pt(g,"TYPE","xmlhttp"),ci(c,g),c.m&&c.o&&Ki(g,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=Hi(qn(g)),v.m=null,v.P=!0,nr(v,c)}n.Za=function(){this.C!=null&&(this.C=null,Sr(this),Oo(this),Rt(19))};function xo(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Lo(c,g){var v=null;if(c.g==g){xo(c),La(c),c.g=null;var R=2}else if(Ge(c.h,g))v=g.D,Ms(c.h,g),R=1;else return;if(c.G!=0){if(g.o)if(R==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var j=c.B;R=Mr(),At(R,new O(R,v)),Hr(c)}else js(c);else if(j=g.s,j==3||j==0&&0<g.X||!(R==1&&Ch(c,g)||R==2&&Oo(c)))switch(v&&0<v.length&&(g=c.h,g.i=g.i.concat(v)),j){case 1:hi(c,5);break;case 4:hi(c,10);break;case 3:hi(c,6);break;default:hi(c,2)}}}function au(c,g){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*g}function hi(c,g){if(c.j.info("Error code "+g),g==2){var v=S(c.fb,c),R=c.Xa;const j=!R;R=new ai(R||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Us(R,"https"),Hi(R),j?Sh(R.toString(),v):ru(R.toString(),v)}else Rt(2);c.G=0,c.l&&c.l.sa(g),lu(c),No(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function lu(c){if(c.G=0,c.ka=[],c.l){const g=So(c.h);(g.length!=0||c.i.length!=0)&&(V(c.ka,g),V(c.ka,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.ra()}}function uu(c,g,v){var R=v instanceof ai?qn(v):new ai(v);if(R.g!="")g&&(R.g=g+"."+R.g),$i(R,R.s);else{var j=d.location;R=j.protocol,g=g?g+"."+j.hostname:j.hostname,j=+j.port;var G=new ai(null);R&&Us(G,R),g&&(G.g=g),j&&$i(G,j),v&&(G.l=v),R=G}return v=c.D,g=c.ya,v&&g&&pt(R,v,g),pt(R,"VER",c.la),ci(c,R),R}function cu(c,g,v){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Tt(new li({eb:v})):new Tt(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ma(){}n=Ma.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Mo(){}Mo.prototype.g=function(c,g){return new Tn(c,g)};function Tn(c,g){Nt.call(this),this.g=new xa(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!K(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!K(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Wr(this)}x(Tn,Nt),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){nn(this.g)},Tn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=Vi(c),c=v);g.i.push(new Ke(g.Ya++,c)),g.G==3&&Hr(g)},Tn.prototype.N=function(){this.g.l=null,delete this.j,nn(this.g),delete this.g,Tn.aa.N.call(this)};function hu(c){kn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const v in g){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}x(hu,kn);function du(){Fi.call(this),this.status=1}x(du,Fi);function Wr(c){this.g=c}x(Wr,Ma),Wr.prototype.ua=function(){At(this.g,"a")},Wr.prototype.ta=function(c){At(this.g,new hu(c))},Wr.prototype.sa=function(c){At(this.g,new du)},Wr.prototype.ra=function(){At(this.g,"b")},Mo.prototype.createWebChannel=Mo.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,Jw=function(){return new Mo},Yw=function(){return Mr()},Qw=zn,Jf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ve.NO_ERROR=0,ve.TIMEOUT=8,ve.HTTP_ERROR=6,wc=ve,me.COMPLETE="complete",Gw=me,oi.EventType=cn,cn.OPEN="a",cn.CLOSE="b",cn.ERROR="c",cn.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,pl=oi,Tt.prototype.listenOnce=Tt.prototype.L,Tt.prototype.getLastError=Tt.prototype.Ka,Tt.prototype.getLastErrorCode=Tt.prototype.Ba,Tt.prototype.getStatus=Tt.prototype.Z,Tt.prototype.getResponseJson=Tt.prototype.Oa,Tt.prototype.getResponseText=Tt.prototype.oa,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Ha,Kw=Tt}).apply(typeof lc<"u"?lc:typeof self<"u"?self:typeof window<"u"?window:{});const K_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ra="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=new ok("@firebase/firestore");function cl(){return fo.logLevel}function Ae(n,...e){if(fo.logLevel<=it.DEBUG){const t=e.map(Mp);fo.debug(`Firestore (${Ra}): ${n}`,...t)}}function Di(n,...e){if(fo.logLevel<=it.ERROR){const t=e.map(Mp);fo.error(`Firestore (${Ra}): ${n}`,...t)}}function ya(n,...e){if(fo.logLevel<=it.WARN){const t=e.map(Mp);fo.warn(`Firestore (${Ra}): ${n}`,...t)}}function Mp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(n="Unexpected state"){const e=`FIRESTORE (${Ra}) INTERNAL ASSERTION FAILED: `+n;throw Di(e),new Error(e)}function dt(n,e){n||Be()}function ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Hw{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ak{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(yn.UNAUTHENTICATED)))}shutdown(){}}class lk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class uk{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dt(this.o===void 0);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new Ci;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ci,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},d=f=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ci)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt(typeof r.accessToken=="string"),new Xw(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string"),new yn(e)}}class ck{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hk{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new ck(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class dk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fk{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){dt(this.o===void 0);const r=a=>{a.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.R;return this.R=a.token,Ae("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(dt(typeof t.token=="string"),this.R=t.token,new dk(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=pk(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%e.length))}return r}}function at(n,e){return n<e?-1:n>e?1:0}function _a(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ye(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kt.fromMillis(Date.now())}static fromDate(e){return Kt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Kt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?at(this.nanoseconds,e.nanoseconds):at(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.timestamp=e}static fromTimestamp(e){return new $e(e)}static min(){return new $e(new Kt(0,0))}static max(){return new $e(new Kt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,t,r){t===void 0?t=0:t>e.length&&Be(),r===void 0?r=e.length-t:r>e.length-t&&Be(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Dl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dl?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=e.get(s),u=t.get(s);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Et extends Dl{construct(e,t,r){return new Et(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new Et(t)}static emptyPath(){return new Et([])}}const mk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends Dl{construct(e,t,r){return new an(e,t,r)}static isValidIdentifier(e){return mk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new an(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new ye(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new ye(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ye(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(r+=d,s++):(a(),s++)}if(a(),u)throw new ye(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(t)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(Et.fromString(e))}static fromName(e){return new ke(Et.fromString(e).popFirst(5))}static empty(){return new ke(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new Et(e.slice()))}}function gk(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=$e.fromTimestamp(r===1e9?new Kt(t+1,0):new Kt(t,r));return new Ss(s,ke.empty(),e)}function yk(n){return new Ss(n.readTime,n.key,-1)}class Ss{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ss($e.min(),ke.empty(),-1)}static max(){return new Ss($e.max(),ke.empty(),-1)}}function _k(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ke.comparator(n.documentKey,e.documentKey),t!==0?t:at(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ek{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==vk)throw n;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,r)=>{t(e)}))}static reject(e){return new oe(((t,r)=>{r(e)}))}static waitFor(e){return new oe(((t,r)=>{let s=0,a=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++a,u&&a===s&&t()}),(f=>r(f)))})),u=!0,a===s&&t()}))}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next((s=>s?oe.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new oe(((r,s)=>{const a=e.length,u=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((_=>{u[m]=_,++d,d===a&&r(u)}),(_=>s(_)))}}))}static doWhile(e,t){return new oe(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}function wk(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ql(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Vp.oe=-1;function Zc(n){return n==null}function Mc(n){return n===0&&1/n==-1/0}function Tk(n){return typeof n=="number"&&Number.isInteger(n)&&!Mc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function vo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function e0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,t){this.comparator=e,this.root=t||on.EMPTY}insert(e,t){return new kt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uc(this.root,e,this.comparator,!1)}getReverseIterator(){return new uc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uc(this.root,e,this.comparator,!0)}}class uc{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??on.RED,this.left=s??on.EMPTY,this.right=a??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new on(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return on.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Be();const e=this.left.check();if(e!==this.right.check())throw Be();return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Be()}get value(){throw Be()}get color(){throw Be()}get left(){throw Be()}get right(){throw Be()}copy(e,t,r,s,a){return this}insert(e,t,r){return new on(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Q_(this.data.getIterator())}getIteratorFrom(e){return new Q_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ln(this.comparator);return t.data=e,t}}class Q_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new Zn([])}unionWith(e){let t=new ln(an.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _a(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new t0("Invalid base64 string: "+a):a}})(e);return new un(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return at(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const Ik=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(n){if(dt(!!n),typeof n=="string"){let e=0;const t=Ik.exec(n);if(dt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vt(n.seconds),nanos:Vt(n.nanos)}}function Vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function po(n){return typeof n=="string"?un.fromBase64String(n):un.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Fp(n){const e=n.mapValue.fields.__previous_value__;return Up(e)?Fp(e):e}function Nl(n){const e=As(n.mapValue.fields.__local_write_time__.timestampValue);return new Kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,t,r,s,a,u,d,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m}}class bl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new bl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof bl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc={mapValue:{}};function mo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Up(n)?4:Rk(n)?9007199254740991:Ak(n)?10:11:Be()}function ri(n,e){if(n===e)return!0;const t=mo(n);if(t!==mo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nl(n).isEqual(Nl(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=As(s.timestampValue),d=As(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return po(s.bytesValue).isEqual(po(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return Vt(s.geoPointValue.latitude)===Vt(a.geoPointValue.latitude)&&Vt(s.geoPointValue.longitude)===Vt(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Vt(s.integerValue)===Vt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=Vt(s.doubleValue),d=Vt(a.doubleValue);return u===d?Mc(u)===Mc(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return _a(n.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:case 11:return(function(s,a){const u=s.mapValue.fields||{},d=a.mapValue.fields||{};if(G_(u)!==G_(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!ri(u[f],d[f])))return!1;return!0})(n,e);default:return Be()}}function Ol(n,e){return(n.values||[]).find((t=>ri(t,e)))!==void 0}function va(n,e){if(n===e)return 0;const t=mo(n),r=mo(e);if(t!==r)return at(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return at(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Vt(a.integerValue||a.doubleValue),f=Vt(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return Y_(n.timestampValue,e.timestampValue);case 4:return Y_(Nl(n),Nl(e));case 5:return at(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=po(a),f=po(u);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),f=u.split("/");for(let m=0;m<d.length&&m<f.length;m++){const _=at(d[m],f[m]);if(_!==0)return _}return at(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=at(Vt(a.latitude),Vt(u.latitude));return d!==0?d:at(Vt(a.longitude),Vt(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return J_(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var d,f,m,_;const E=a.fields||{},S=u.fields||{},P=(d=E.value)===null||d===void 0?void 0:d.arrayValue,x=(f=S.value)===null||f===void 0?void 0:f.arrayValue,M=at(((m=P?.values)===null||m===void 0?void 0:m.length)||0,((_=x?.values)===null||_===void 0?void 0:_.length)||0);return M!==0?M:J_(P,x)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===cc.mapValue&&u===cc.mapValue)return 0;if(a===cc.mapValue)return 1;if(u===cc.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=u.fields||{},_=Object.keys(m);f.sort(),_.sort();for(let E=0;E<f.length&&E<_.length;++E){const S=at(f[E],_[E]);if(S!==0)return S;const P=va(d[f[E]],m[_[E]]);if(P!==0)return P}return at(f.length,_.length)})(n.mapValue,e.mapValue);default:throw Be()}}function Y_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return at(n,e);const t=As(n),r=As(e),s=at(t.seconds,r.seconds);return s!==0?s:at(t.nanos,r.nanos)}function J_(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=va(t[s],r[s]);if(a)return a}return at(t.length,r.length)}function Ea(n){return Xf(n)}function Xf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=As(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return po(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ke.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=Xf(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${Xf(t.fields[u])}`;return s+"}"})(n.mapValue):Be()}function X_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Zf(n){return!!n&&"integerValue"in n}function Bp(n){return!!n&&"arrayValue"in n}function Z_(n){return!!n&&"nullValue"in n}function ev(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tc(n){return!!n&&"mapValue"in n}function Ak(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function El(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return vo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=El(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=El(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Rk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Tc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=El(t)}setAll(e){let t=an.emptyPath(),r={},s=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=d.popLast()}u?r[d.lastSegment()]=El(u):s.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());Tc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Tc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){vo(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new Bn(El(this.value))}}function n0(n){const e=[];return vo(n.fields,((t,r)=>{const s=new an([t]);if(Tc(r)){const a=n0(r.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)})),new Zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t,r,s,a,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new _n(e,0,$e.min(),$e.min(),$e.min(),Bn.empty(),0)}static newFoundDocument(e,t,r,s){return new _n(e,1,t,$e.min(),r,s,0)}static newNoDocument(e,t){return new _n(e,2,t,$e.min(),$e.min(),Bn.empty(),0)}static newUnknownDocument(e,t){return new _n(e,3,t,$e.min(),$e.min(),Bn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t){this.position=e,this.inclusive=t}}function tv(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],u=n.position[s];if(a.field.isKeyField()?r=ke.comparator(ke.fromName(u.referenceValue),t.key):r=va(u,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function nv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ri(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ck(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{}class zt extends r0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new kk(e,t,r):t==="array-contains"?new bk(e,r):t==="in"?new Ok(e,r):t==="not-in"?new xk(e,r):t==="array-contains-any"?new Lk(e,r):new zt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Dk(e,r):new Nk(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(va(t,this.value)):t!==null&&mo(this.value)===mo(t)&&this.matchesComparison(va(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Or extends r0{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Or(e,t)}matches(e){return i0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function i0(n){return n.op==="and"}function s0(n){return Pk(n)&&i0(n)}function Pk(n){for(const e of n.filters)if(e instanceof Or)return!1;return!0}function ep(n){if(n instanceof zt)return n.field.canonicalString()+n.op.toString()+Ea(n.value);if(s0(n))return n.filters.map((e=>ep(e))).join(",");{const e=n.filters.map((t=>ep(t))).join(",");return`${n.op}(${e})`}}function o0(n,e){return n instanceof zt?(function(r,s){return s instanceof zt&&r.op===s.op&&r.field.isEqual(s.field)&&ri(r.value,s.value)})(n,e):n instanceof Or?(function(r,s){return s instanceof Or&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,u,d)=>a&&o0(u,s.filters[d])),!0):!1})(n,e):void Be()}function a0(n){return n instanceof zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ea(t.value)}`})(n):n instanceof Or?(function(t){return t.op.toString()+" {"+t.getFilters().map(a0).join(" ,")+"}"})(n):"Filter"}class kk extends zt{constructor(e,t,r){super(e,t,r),this.key=ke.fromName(r.referenceValue)}matches(e){const t=ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class Dk extends zt{constructor(e,t){super(e,"in",t),this.keys=l0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Nk extends zt{constructor(e,t){super(e,"not-in",t),this.keys=l0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function l0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>ke.fromName(r.referenceValue)))}class bk extends zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bp(t)&&Ol(t.arrayValue,this.value)}}class Ok extends zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ol(this.value.arrayValue,t)}}class xk extends zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ol(this.value.arrayValue,t)}}class Lk extends zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Ol(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,t=null,r=[],s=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=u,this.endAt=d,this.ue=null}}function rv(n,e=null,t=[],r=[],s=null,a=null,u=null){return new Mk(n,e,t,r,s,a,u)}function jp(n){const e=ze(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>ep(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Zc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ea(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ea(r))).join(",")),e.ue=t}return e.ue}function $p(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ck(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!o0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nv(n.startAt,e.startAt)&&nv(n.endAt,e.endAt)}function tp(n){return ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t=null,r=[],s=[],a=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=f,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Vk(n,e,t,r,s,a,u,d){return new Ca(n,e,t,r,s,a,u,d)}function eh(n){return new Ca(n)}function iv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function u0(n){return n.collectionGroup!==null}function wl(n){const e=ze(n);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new ln(an.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new xl(a,r))})),t.has(an.keyField().canonicalString())||e.ce.push(new xl(an.keyField(),r))}return e.ce}function Zr(n){const e=ze(n);return e.le||(e.le=Uk(e,wl(n))),e.le}function Uk(n,e){if(n.limitType==="F")return rv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new xl(s.field,a)}));const t=n.endAt?new Vc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Vc(n.startAt.position,n.startAt.inclusive):null;return rv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function np(n,e){const t=n.filters.concat([e]);return new Ca(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function rp(n,e,t){return new Ca(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function th(n,e){return $p(Zr(n),Zr(e))&&n.limitType===e.limitType}function c0(n){return`${jp(Zr(n))}|lt:${n.limitType}`}function oa(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>a0(s))).join(", ")}]`),Zc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Ea(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Ea(s))).join(",")),`Target(${r})`})(Zr(n))}; limitType=${n.limitType})`}function nh(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ke.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of wl(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(u,d,f){const m=tv(u,d,f);return u.inclusive?m<=0:m<0})(r.startAt,wl(r),s)||r.endAt&&!(function(u,d,f){const m=tv(u,d,f);return u.inclusive?m>=0:m>0})(r.endAt,wl(r),s))})(n,e)}function Fk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function h0(n){return(e,t)=>{let r=!1;for(const s of wl(n)){const a=Bk(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function Bk(n,e,t){const r=n.field.isKeyField()?ke.comparator(e.key,t.key):(function(a,u,d){const f=u.data.field(a),m=d.data.field(a);return f!==null&&m!==null?va(f,m):Be()})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vo(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return e0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=new kt(ke.comparator);function Ni(){return jk}const d0=new kt(ke.comparator);function ml(...n){let e=d0;for(const t of n)e=e.insert(t.key,t);return e}function f0(n){let e=d0;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function oo(){return Tl()}function p0(){return Tl()}function Tl(){return new Pa((n=>n.toString()),((n,e)=>n.isEqual(e)))}const $k=new kt(ke.comparator),zk=new ln(ke.comparator);function Ye(...n){let e=zk;for(const t of n)e=e.add(t);return e}const Hk=new ln(at);function Wk(){return Hk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mc(e)?"-0":e}}function m0(n){return{integerValue:""+n}}function qk(n,e){return Tk(e)?m0(e):zp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(){this._=void 0}}function Kk(n,e,t){return n instanceof Ll?(function(s,a){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Up(a)&&(a=Fp(a)),a&&(u.fields.__previous_value__=a),{mapValue:u}})(t,e):n instanceof Ml?y0(n,e):n instanceof Vl?_0(n,e):(function(s,a){const u=g0(s,a),d=sv(u)+sv(s.Pe);return Zf(u)&&Zf(s.Pe)?m0(d):zp(s.serializer,d)})(n,e)}function Gk(n,e,t){return n instanceof Ml?y0(n,e):n instanceof Vl?_0(n,e):t}function g0(n,e){return n instanceof Uc?(function(r){return Zf(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Ll extends rh{}class Ml extends rh{constructor(e){super(),this.elements=e}}function y0(n,e){const t=v0(e);for(const r of n.elements)t.some((s=>ri(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Vl extends rh{constructor(e){super(),this.elements=e}}function _0(n,e){let t=v0(e);for(const r of n.elements)t=t.filter((s=>!ri(s,r)));return{arrayValue:{values:t}}}class Uc extends rh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function sv(n){return Vt(n.integerValue||n.doubleValue)}function v0(n){return Bp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,t){this.field=e,this.transform=t}}function Yk(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Ml&&s instanceof Ml||r instanceof Vl&&s instanceof Vl?_a(r.elements,s.elements,ri):r instanceof Uc&&s instanceof Uc?ri(r.Pe,s.Pe):r instanceof Ll&&s instanceof Ll})(n.transform,e.transform)}class Jk{constructor(e,t){this.version=e,this.transformResults=t}}class fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ic(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ih{}function E0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Hp(n.key,fr.none()):new Kl(n.key,n.data,fr.none());{const t=n.data,r=Bn.empty();let s=new ln(an.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?r.delete(a):r.set(a,u),s=s.add(a)}return new ks(n.key,r,new Zn(s.toArray()),fr.none())}}function Xk(n,e,t){n instanceof Kl?(function(s,a,u){const d=s.value.clone(),f=av(s.fieldTransforms,a,u.transformResults);d.setAll(f),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof ks?(function(s,a,u){if(!Ic(s.precondition,a))return void a.convertToUnknownDocument(u.version);const d=av(s.fieldTransforms,a,u.transformResults),f=a.data;f.setAll(w0(s)),f.setAll(d),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Il(n,e,t,r){return n instanceof Kl?(function(a,u,d,f){if(!Ic(a.precondition,u))return d;const m=a.value.clone(),_=lv(a.fieldTransforms,f,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof ks?(function(a,u,d,f){if(!Ic(a.precondition,u))return d;const m=lv(a.fieldTransforms,f,u),_=u.data;return _.setAll(w0(a)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,r):(function(a,u,d){return Ic(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function Zk(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=g0(r.transform,s||null);a!=null&&(t===null&&(t=Bn.empty()),t.set(r.field,a))}return t||null}function ov(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&_a(r,s,((a,u)=>Yk(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Kl extends ih{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ks extends ih{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function w0(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function av(n,e,t){const r=new Map;dt(n.length===t.length);for(let s=0;s<t.length;s++){const a=n[s],u=a.transform,d=e.data.field(a.field);r.set(a.field,Gk(u,d,t[s]))}return r}function lv(n,e,t){const r=new Map;for(const s of n){const a=s.transform,u=t.data.field(s.field);r.set(s.field,Kk(a,u,e))}return r}class Hp extends ih{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eD extends ih{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&Xk(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Il(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Il(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=p0();return this.mutations.forEach((s=>{const a=e.get(s.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(s.key)?null:d;const f=E0(u,d);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument($e.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ye())}isEqual(e){return this.batchId===e.batchId&&_a(this.mutations,e.mutations,((t,r)=>ov(t,r)))&&_a(this.baseMutations,e.baseMutations,((t,r)=>ov(t,r)))}}class Wp{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){dt(e.mutations.length===r.length);let s=(function(){return $k})();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,r[u].version);return new Wp(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,nt;function iD(n){switch(n){default:return Be();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0}}function T0(n){if(n===void 0)return Di("GRPC error has no .code"),ee.UNKNOWN;switch(n){case jt.OK:return ee.OK;case jt.CANCELLED:return ee.CANCELLED;case jt.UNKNOWN:return ee.UNKNOWN;case jt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case jt.INTERNAL:return ee.INTERNAL;case jt.UNAVAILABLE:return ee.UNAVAILABLE;case jt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case jt.NOT_FOUND:return ee.NOT_FOUND;case jt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case jt.ABORTED:return ee.ABORTED;case jt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case jt.DATA_LOSS:return ee.DATA_LOSS;default:return Be()}}(nt=jt||(jt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=new lo([4294967295,4294967295],0);function uv(n){const e=sD().encode(n),t=new qw;return t.update(e),new Uint8Array(t.digest())}function cv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new lo([t,r],0),new lo([s,a],0)]}class qp{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gl(`Invalid padding: ${t}`);if(r<0)throw new gl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new gl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=lo.fromNumber(this.Ie)}Ee(e,t,r){let s=e.add(t.multiply(lo.fromNumber(r)));return s.compare(oD)===1&&(s=new lo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=uv(e),[r,s]=cv(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,s,a);if(!this.de(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new qp(a,s,t);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.Ie===0)return;const t=uv(e),[r,s]=cv(t);for(let a=0;a<this.hashCount;a++){const u=this.Ee(r,s,a);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class gl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Gl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new sh($e.min(),s,new kt(at),Ni(),Ye())}}class Gl{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Gl(r,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class I0{constructor(e,t){this.targetId=e,this.me=t}}class S0{constructor(e,t,r=un.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class hv{constructor(){this.fe=0,this.ge=fv(),this.pe=un.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ye(),t=Ye(),r=Ye();return this.ge.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Be()}})),new Gl(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=fv()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,dt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class aD{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ni(),this.qe=dv(),this.Qe=new kt(at)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Be()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((r,s)=>{this.ze(s)&&t(s)}))}He(e){const t=e.targetId,r=e.me.count,s=this.Je(t);if(s){const a=s.target;if(tp(a))if(r===0){const u=new ke(a.path);this.Ue(t,u,_n.newNoDocument(u,$e.min()))}else dt(r===1);else{const u=this.Ye(t);if(u!==r){const d=this.Ze(e),f=d?this.Xe(d,e,u):1;if(f!==0){this.je(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let u,d;try{u=po(r).toUint8Array()}catch(f){if(f instanceof t0)return ya("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new qp(u,s,a)}catch(f){return ya(f instanceof gl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.Ie===0?null:d}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const u=this.Le.tt(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.Ue(t,a,null),s++)})),s}rt(e){const t=new Map;this.Be.forEach(((a,u)=>{const d=this.Je(u);if(d){if(a.current&&tp(d.target)){const f=new ke(d.target.path);this.ke.get(f)!==null||this.it(u,f)||this.Ue(u,f,_n.newNoDocument(f,e))}a.be&&(t.set(u,a.ve()),a.Ce())}}));let r=Ye();this.qe.forEach(((a,u)=>{let d=!0;u.forEachWhile((f=>{const m=this.Je(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.ke.forEach(((a,u)=>u.setReadTime(e)));const s=new sh(e,t,this.Qe,this.ke,r);return this.ke=Ni(),this.qe=dv(),this.Qe=new kt(at),s}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new hv,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ln(at),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||Ae("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new hv),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function dv(){return new kt(ke.comparator)}function fv(){return new kt(ke.comparator)}const lD={asc:"ASCENDING",desc:"DESCENDING"},uD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cD={and:"AND",or:"OR"};class hD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ip(n,e){return n.useProto3Json||Zc(e)?e:{value:e}}function Fc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function dD(n,e){return Fc(n,e.toTimestamp())}function ei(n){return dt(!!n),$e.fromTimestamp((function(t){const r=As(t);return new Kt(r.seconds,r.nanos)})(n))}function Kp(n,e){return sp(n,e).canonicalString()}function sp(n,e){const t=(function(s){return new Et(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function R0(n){const e=Et.fromString(n);return dt(N0(e)),e}function op(n,e){return Kp(n.databaseId,e.path)}function uf(n,e){const t=R0(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ke(P0(t))}function C0(n,e){return Kp(n.databaseId,e)}function fD(n){const e=R0(n);return e.length===4?Et.emptyPath():P0(e)}function ap(n){return new Et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function P0(n){return dt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function pv(n,e,t){return{name:op(n,e),fields:t.value.mapValue.fields}}function pD(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Be()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(m,_){return m.useProto3Json?(dt(_===void 0||typeof _=="string"),un.fromBase64String(_||"")):(dt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),un.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(m){const _=m.code===void 0?ee.UNKNOWN:T0(m.code);return new ye(_,m.message||"")})(u);t=new S0(r,s,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=uf(n,r.document.name),a=ei(r.document.updateTime),u=r.document.createTime?ei(r.document.createTime):$e.min(),d=new Bn({mapValue:{fields:r.document.fields}}),f=_n.newFoundDocument(s,a,u,d),m=r.targetIds||[],_=r.removedTargetIds||[];t=new Sc(m,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=uf(n,r.document),a=r.readTime?ei(r.readTime):$e.min(),u=_n.newNoDocument(s,a),d=r.removedTargetIds||[];t=new Sc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=uf(n,r.document),a=r.removedTargetIds||[];t=new Sc([],a,s,null)}else{if(!("filter"in e))return Be();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,u=new rD(s,a),d=r.targetId;t=new I0(d,u)}}return t}function mD(n,e){let t;if(e instanceof Kl)t={update:pv(n,e.key,e.value)};else if(e instanceof Hp)t={delete:op(n,e.key)};else if(e instanceof ks)t={update:pv(n,e.key,e.data),updateMask:SD(e.fieldMask)};else{if(!(e instanceof eD))return Be();t={verify:op(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,u){const d=u.transform;if(d instanceof Ll)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ml)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Vl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Uc)return{fieldPath:u.field.canonicalString(),increment:d.Pe};throw Be()})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:dD(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Be()})(n,e.precondition)),t}function gD(n,e){return n&&n.length>0?(dt(e!==void 0),n.map((t=>(function(s,a){let u=s.updateTime?ei(s.updateTime):ei(a);return u.isEqual($e.min())&&(u=ei(a)),new Jk(u,s.transformResults||[])})(t,e)))):[]}function yD(n,e){return{documents:[C0(n,e.path)]}}function _D(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=C0(n,s);const a=(function(m){if(m.length!==0)return D0(Or.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(m){if(m.length!==0)return m.map((_=>(function(S){return{field:aa(S.field),direction:wD(S.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=ip(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{_t:t,parent:s}}function vD(n){let e=fD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){dt(r===1);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(E){const S=k0(E);return S instanceof Or&&s0(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((S=>(function(x){return new xl(la(x.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,Zc(S)?null:S})(t.limit));let f=null;t.startAt&&(f=(function(E){const S=!!E.before,P=E.values||[];return new Vc(P,S)})(t.startAt));let m=null;return t.endAt&&(m=(function(E){const S=!E.before,P=E.values||[];return new Vc(P,S)})(t.endAt)),Vk(e,s,u,a,d,"F",f,m)}function ED(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function k0(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=la(t.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=la(t.unaryFilter.field);return zt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=la(t.unaryFilter.field);return zt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=la(t.unaryFilter.field);return zt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Be()}})(n):n.fieldFilter!==void 0?(function(t){return zt.create(la(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Be()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Or.create(t.compositeFilter.filters.map((r=>k0(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Be()}})(t.compositeFilter.op))})(n):Be()}function wD(n){return lD[n]}function TD(n){return uD[n]}function ID(n){return cD[n]}function aa(n){return{fieldPath:n.canonicalString()}}function la(n){return an.fromServerFormat(n.fieldPath)}function D0(n){return n instanceof zt?(function(t){if(t.op==="=="){if(ev(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NAN"}};if(Z_(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ev(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NOT_NAN"}};if(Z_(t.value))return{unaryFilter:{field:aa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:aa(t.field),op:TD(t.op),value:t.value}}})(n):n instanceof Or?(function(t){const r=t.getFilters().map((s=>D0(s)));return r.length===1?r[0]:{compositeFilter:{op:ID(t.op),filters:r}}})(n):Be()}function SD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function N0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t,r,s,a=$e.min(),u=$e.min(),d=un.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.ct=e}}function RD(n){const e=vD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this.un=new PD}addToCollectionParentIndex(e,t){return this.un.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Ss.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Ss.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class PD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new ln(Et.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ln(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new wa(0)}static kn(){return new wa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(){this.changes=new Pa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Il(r.mutation,s,Zn.empty(),Kt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ye()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ye()){const s=oo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let u=ml();return a.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=oo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ye())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,r,s){let a=Ni();const u=Tl(),d=(function(){return Tl()})();return t.forEach(((f,m)=>{const _=r.get(m.key);s.has(m.key)&&(_===void 0||_.mutation instanceof ks)?a=a.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),Il(_.mutation,m,_.mutation.getFieldMask(),Kt.now())):u.set(m.key,Zn.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,_)=>u.set(m,_))),t.forEach(((m,_)=>{var E;return d.set(m,new DD(_,(E=u.get(m))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=Tl();let s=new kt(((u,d)=>u-d)),a=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let _=r.get(f)||Zn.empty();_=d.applyToLocalView(m,_),r.set(f,_);const E=(s.get(d.batchId)||Ye()).add(f);s=s.insert(d.batchId,E)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,_=f.value,E=p0();_.forEach((S=>{if(!a.has(S)){const P=E0(t.get(S),r.get(S));P!==null&&E.set(S,P),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,m,E))}return oe.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(u){return ke.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):u0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):oe.resolve(oo());let d=-1,f=a;return u.next((m=>oe.forEach(m,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),a.get(_)?oe.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{f=f.insert(_,S)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,Ye()))).next((_=>({batchId:d,changes:f0(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ke(t)).next((r=>{let s=ml();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let u=ml();return this.indexManager.getCollectionParents(e,a).next((d=>oe.forEach(d,(f=>{const m=(function(E,S){return new Ca(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,s).next((_=>{_.forEach(((E,S)=>{u=u.insert(E,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((u=>{a.forEach(((f,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,_n.newInvalidDocument(_)))}));let d=ml();return u.forEach(((f,m)=>{const _=a.get(f);_!==void 0&&Il(_.mutation,m,Zn.empty(),Kt.now()),nh(t,m)&&(d=d.insert(f,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return oe.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:ei(s.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(s){return{name:s.name,query:RD(s.bundledQuery),readTime:ei(s.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.overlays=new kt(ke.comparator),this.Ir=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=oo();return oe.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.ht(e,t,a)})),oe.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const s=oo(),a=t.length+1,u=new ke(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new kt(((m,_)=>m-_));const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let _=a.get(m.largestBatchId);_===null&&(_=oo(),a=a.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const d=oo(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,_)=>d.set(m,_))),!(d.size()>=s)););return oe.resolve(d)}ht(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new nD(t,r));let a=this.Ir.get(t);a===void 0&&(a=Ye(),this.Ir.set(t,a)),this.Ir.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(){this.Tr=new ln(Zt.Er),this.dr=new ln(Zt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Zt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Vr(new Zt(e,t))}mr(e,t){e.forEach((r=>this.removeReference(r,t)))}gr(e){const t=new ke(new Et([])),r=new Zt(t,e),s=new Zt(t,e+1),a=[];return this.dr.forEachInRange([r,s],(u=>{this.Vr(u),a.push(u.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ke(new Et([])),r=new Zt(t,e),s=new Zt(t,e+1);let a=Ye();return this.dr.forEachInRange([r,s],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new Zt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Zt{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ke.comparator(e.key,t.key)||at(e.wr,t.wr)}static Ar(e,t){return at(e.wr,t.wr)||ke.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ln(Zt.Er)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new tD(a,t,r,s);this.mutationQueue.push(u);for(const d of s)this.br=this.br.add(new Zt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return oe.resolve(u)}lookupMutationBatch(e,t){return oe.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.vr(r),a=s<0?0:s;return oe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Zt(t,0),s=new Zt(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],(u=>{const d=this.Dr(u.wr);a.push(d)})),oe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(at);return t.forEach((s=>{const a=new Zt(s,0),u=new Zt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,u],(d=>{r=r.add(d.wr)}))})),oe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;ke.isDocumentKey(a)||(a=a.child(""));const u=new Zt(new ke(a),0);let d=new ln(at);return this.br.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===s&&(d=d.add(f.wr)),!0)}),u),oe.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach((r=>{const s=this.Dr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){dt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return oe.forEach(t.mutations,(s=>{const a=new Zt(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,t){const r=new Zt(t,0),s=this.br.firstAfterOrEqual(r);return oe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.Mr=e,this.docs=(function(){return new kt(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,u=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():_n.newInvalidDocument(t))}getEntries(e,t){let r=Ni();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():_n.newInvalidDocument(s))})),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Ni();const u=t.path,d=new ke(u.child("")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:_}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||_k(yk(_),r)<=0||(s.has(_.key)||nh(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return oe.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Be()}Or(e,t){return oe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new VD(this)}getSize(e){return oe.resolve(this.size)}}class VD extends kD{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)})),oe.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.persistence=e,this.Nr=new Pa((t=>jp(t)),$p),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Gp,this.targetCount=0,this.kr=wa.Bn()}forEachTarget(e,t){return this.Nr.forEach(((r,s)=>t(s))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),oe.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new wa(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Kn(t),oe.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.Nr.forEach(((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Nr.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),oe.waitFor(a).next((()=>s))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((u=>{a.push(s.markPotentiallyOrphaned(e,u))})),oe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Vp(0),this.Kr=!1,this.Kr=!0,this.$r=new xD,this.referenceDelegate=e(this),this.Ur=new UD(this),this.indexManager=new CD,this.remoteDocumentCache=(function(s){return new MD(s)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new AD(t),this.Gr=new bD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new LD(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Ae("MemoryPersistence","Starting transaction:",e);const s=new BD(this.Qr.next());return this.referenceDelegate.zr(),r(s).next((a=>this.referenceDelegate.jr(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Hr(e,t){return oe.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,t))))}}class BD extends Ek{constructor(e){super(),this.currentSequenceNumber=e}}class Qp{constructor(e){this.persistence=e,this.Jr=new Gp,this.Yr=null}static Zr(e){return new Qp(e)}get Xr(){if(this.Yr)return this.Yr;throw Be()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((s=>this.Xr.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.Xr.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Xr,(r=>{const s=ke.fromPath(r);return this.ei(e,s).next((a=>{a||t.removeEntry(s,$e.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return oe.or([()=>oe.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=s}static Wi(e,t){let r=Ye(),s=Ye();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Yp(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return YP()?8:wk(GP())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.Yi(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.Zi(e,t,s,r).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new jD;return this.Xi(e,t,u).next((d=>{if(a.result=d,this.zi)return this.es(e,t,u,d.size)}))})).next((()=>a.result))}es(e,t,r,s){return r.documentReadCount<this.ji?(cl()<=it.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",oa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oe.resolve()):(cl()<=it.DEBUG&&Ae("QueryEngine","Query:",oa(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(cl()<=it.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",oa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zr(t))):oe.resolve())}Yi(e,t){if(iv(t))return oe.resolve(null);let r=Zr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=rp(t,null,"F"),r=Zr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const u=Ye(...a);return this.Ji.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.ts(t,d);return this.ns(t,m,u,f.readTime)?this.Yi(e,rp(t,null,"F")):this.rs(e,m,t,f)}))))})))))}Zi(e,t,r,s){return iv(t)||s.isEqual($e.min())?oe.resolve(null):this.Ji.getDocuments(e,r).next((a=>{const u=this.ts(t,a);return this.ns(t,u,r,s)?oe.resolve(null):(cl()<=it.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),oa(t)),this.rs(e,u,t,gk(s,-1)).next((d=>d)))}))}ts(e,t){let r=new ln(h0(e));return t.forEach(((s,a)=>{nh(e,a)&&(r=r.add(a))})),r}ns(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,t,r){return cl()<=it.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",oa(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ss.min(),r)}rs(e,t,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,t,r,s){this.persistence=e,this.ss=t,this.serializer=s,this.os=new kt(at),this._s=new Pa((a=>jp(a)),$p),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ND(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function HD(n,e,t,r){return new zD(n,e,t,r)}async function b0(n,e){const t=ze(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.ls(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const u=[],d=[];let f=Ye();for(const m of s){u.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}for(const m of a){d.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(r,f).next((m=>({hs:m,removedBatchIds:u,addedBatchIds:d})))}))}))}function WD(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return(function(d,f,m,_){const E=m.batch,S=E.keys();let P=oe.resolve();return S.forEach((x=>{P=P.next((()=>_.getEntry(f,x))).next((M=>{const V=m.docVersions.get(x);dt(V!==null),M.version.compareTo(V)<0&&(E.applyToRemoteDocument(M,m),M.isValidDocument()&&(M.setReadTime(m.commitVersion),_.addEntry(M)))}))})),P.next((()=>d.mutationQueue.removeMutationBatch(f,E)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let f=Ye();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function O0(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function qD(n,e){const t=ze(n),r=e.snapshotVersion;let s=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.cs.newChangeBuffer({trackRemovals:!0});s=t.os;const d=[];e.targetChanges.forEach(((_,E)=>{const S=s.get(E);if(!S)return;d.push(t.Ur.removeMatchingKeys(a,_.removedDocuments,E).next((()=>t.Ur.addMatchingKeys(a,_.addedDocuments,E))));let P=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?P=P.withResumeToken(un.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):_.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(_.resumeToken,r)),s=s.insert(E,P),(function(M,V,Q){return M.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(S,P,_)&&d.push(t.Ur.updateTargetData(a,P))}));let f=Ni(),m=Ye();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(KD(a,u,e.documentUpdates).next((_=>{f=_.Ps,m=_.Is}))),!r.isEqual($e.min())){const _=t.Ur.getLastRemoteSnapshotVersion(a).next((E=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(_)}return oe.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.os=s,a)))}function KD(n,e,t){let r=Ye(),s=Ye();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let u=Ni();return t.forEach(((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual($e.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):Ae("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)})),{Ps:u,Is:s}}))}function GD(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function QD(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Ur.getTargetData(r,e).next((a=>a?(s=a,oe.resolve(s)):t.Ur.allocateTargetId(r).next((u=>(s=new vs(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r}))}async function lp(n,e,t){const r=ze(n),s=r.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!ql(u))throw u;Ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function mv(n,e,t){const r=ze(n);let s=$e.min(),a=Ye();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,m,_){const E=ze(f),S=E._s.get(_);return S!==void 0?oe.resolve(E.os.get(S)):E.Ur.getTargetData(m,_)})(r,u,Zr(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(u,d.targetId).next((f=>{a=f}))})).next((()=>r.ss.getDocumentsMatchingQuery(u,e,t?s:$e.min(),t?a:Ye()))).next((d=>(YD(r,Fk(e),d),{documents:d,Ts:a})))))}function YD(n,e,t){let r=n.us.get(e)||$e.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.us.set(e,r)}class gv{constructor(){this.activeTargetIds=Wk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JD{constructor(){this.so=new gv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new gv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc=null;function cf(){return hc===null?hc=(function(){return 268435456+Math.round(2147483648*Math.random())})():hc++,"0x"+hc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn="WebChannelConnection";class tN extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(t,r,s,a,u){const d=cf(),f=this.xo(t,r.toUriEncodedString());Ae("RestConnection",`Sending RPC '${t}' ${d}:`,f,s);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,a,u),this.No(t,f,m,s).then((_=>(Ae("RestConnection",`Received RPC '${t}' ${d}: `,_),_)),(_=>{throw ya("RestConnection",`RPC '${t}' ${d} failed with error: `,_,"url: ",f,"request:",s),_}))}Lo(t,r,s,a,u,d){return this.Mo(t,r,s,a,u)}Oo(t,r,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ra})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((a,u)=>t[u]=a)),s&&s.headers.forEach(((a,u)=>t[u]=a))}xo(t,r){const s=ZD[t];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,s){const a=cf();return new Promise(((u,d)=>{const f=new Kw;f.setWithCredentials(!0),f.listenOnce(Gw.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case wc.NO_ERROR:const _=f.getResponseJson();Ae(gn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),u(_);break;case wc.TIMEOUT:Ae(gn,`RPC '${e}' ${a} timed out`),d(new ye(ee.DEADLINE_EXCEEDED,"Request time out"));break;case wc.HTTP_ERROR:const E=f.getStatus();if(Ae(gn,`RPC '${e}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let S=f.getResponseJson();Array.isArray(S)&&(S=S[0]);const P=S?.error;if(P&&P.status&&P.message){const x=(function(V){const Q=V.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(Q)>=0?Q:ee.UNKNOWN})(P.status);d(new ye(x,P.message))}else d(new ye(ee.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new ye(ee.UNAVAILABLE,"Connection failed."));break;default:Be()}}finally{Ae(gn,`RPC '${e}' ${a} completed.`)}}));const m=JSON.stringify(s);Ae(gn,`RPC '${e}' ${a} sending request:`,s),f.send(t,"POST",m,r,15)}))}Bo(e,t,r){const s=cf(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Jw(),d=Yw(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Oo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const _=a.join("");Ae(gn,`Creating RPC '${e}' stream ${s}: ${_}`,f);const E=u.createWebChannel(_,f);let S=!1,P=!1;const x=new eN({Io:V=>{P?Ae(gn,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(S||(Ae(gn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),S=!0),Ae(gn,`RPC '${e}' stream ${s} sending:`,V),E.send(V))},To:()=>E.close()}),M=(V,Q,K)=>{V.listen(Q,(Y=>{try{K(Y)}catch(J){setTimeout((()=>{throw J}),0)}}))};return M(E,pl.EventType.OPEN,(()=>{P||(Ae(gn,`RPC '${e}' stream ${s} transport opened.`),x.yo())})),M(E,pl.EventType.CLOSE,(()=>{P||(P=!0,Ae(gn,`RPC '${e}' stream ${s} transport closed`),x.So())})),M(E,pl.EventType.ERROR,(V=>{P||(P=!0,ya(gn,`RPC '${e}' stream ${s} transport errored:`,V),x.So(new ye(ee.UNAVAILABLE,"The operation could not be completed")))})),M(E,pl.EventType.MESSAGE,(V=>{var Q;if(!P){const K=V.data[0];dt(!!K);const Y=K,J=Y.error||((Q=Y[0])===null||Q===void 0?void 0:Q.error);if(J){Ae(gn,`RPC '${e}' stream ${s} received error:`,J);const fe=J.status;let te=(function(I){const C=jt[I];if(C!==void 0)return T0(C)})(fe),T=J.message;te===void 0&&(te=ee.INTERNAL,T="Unknown error status: "+fe+" with message "+J.message),P=!0,x.So(new ye(te,T)),E.close()}else Ae(gn,`RPC '${e}' stream ${s} received:`,K),x.bo(K)}})),M(d,Qw.STAT_EVENT,(V=>{V.stat===Jf.PROXY?Ae(gn,`RPC '${e}' stream ${s} detected buffering proxy`):V.stat===Jf.NOPROXY&&Ae(gn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{x.wo()}),0),x}}function hf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(n){return new hD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,t,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,t-r);s>0&&Ae("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,t,r,s,a,u,d,f){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new x0(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(Di(t.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.Yo===t&&this.P_(r,s)}),(r=>{e((()=>{const s=new ye(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)}))}))}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{r((()=>this.I_(s)))})),this.stream.onMessage((s=>{r((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(Ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nN extends L0{constructor(e,t,r,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=pD(this.serializer,e),r=(function(a){if(!("targetChange"in a))return $e.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?$e.min():u.readTime?ei(u.readTime):$e.min()})(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=ap(this.serializer),t.addTarget=(function(a,u){let d;const f=u.target;if(d=tp(f)?{documents:yD(a,f)}:{query:_D(a,f)._t},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=A0(a,u.resumeToken);const m=ip(a,u.expectedCount);m!==null&&(d.expectedCount=m)}else if(u.snapshotVersion.compareTo($e.min())>0){d.readTime=Fc(a,u.snapshotVersion.toTimestamp());const m=ip(a,u.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const r=ED(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=ap(this.serializer),t.removeTarget=e,this.a_(t)}}class rN extends L0{constructor(e,t,r,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return dt(!!e.streamToken),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=gD(e.writeResults,e.commitTime),r=ei(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=ap(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>mD(this.serializer,r)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ye(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Mo(e,sp(t,r),s,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ye(ee.UNKNOWN,a.toString())}))}Lo(e,t,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Lo(e,sp(t,r),s,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(ee.UNKNOWN,u.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class sN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Di(t),this.D_=!1):Ae("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((u=>{r.enqueueAndForget((async()=>{Eo(this)&&(Ae("RemoteStore","Restarting streams for network reachability change."),await(async function(f){const m=ze(f);m.L_.add(4),await Ql(m),m.q_.set("Unknown"),m.L_.delete(4),await ah(m)})(this))}))})),this.q_=new sN(r,s)}}async function ah(n){if(Eo(n))for(const e of n.B_)await e(!0)}async function Ql(n){for(const e of n.B_)await e(!1)}function M0(n,e){const t=ze(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),em(t)?Zp(t):ka(t).r_()&&Xp(t,e))}function Jp(n,e){const t=ze(n),r=ka(t);t.N_.delete(e),r.r_()&&V0(t,e),t.N_.size===0&&(r.r_()?r.o_():Eo(t)&&t.q_.set("Unknown"))}function Xp(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ka(n).A_(e)}function V0(n,e){n.Q_.xe(e),ka(n).R_(e)}function Zp(n){n.Q_=new aD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ka(n).start(),n.q_.v_()}function em(n){return Eo(n)&&!ka(n).n_()&&n.N_.size>0}function Eo(n){return ze(n).L_.size===0}function U0(n){n.Q_=void 0}async function aN(n){n.q_.set("Online")}async function lN(n){n.N_.forEach(((e,t)=>{Xp(n,e)}))}async function uN(n,e){U0(n),em(n)?(n.q_.M_(e),Zp(n)):n.q_.set("Unknown")}async function cN(n,e,t){if(n.q_.set("Online"),e instanceof S0&&e.state===2&&e.cause)try{await(async function(s,a){const u=a.cause;for(const d of a.targetIds)s.N_.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.N_.delete(d),s.Q_.removeTarget(d))})(n,e)}catch(r){Ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bc(n,r)}else if(e instanceof Sc?n.Q_.Ke(e):e instanceof I0?n.Q_.He(e):n.Q_.We(e),!t.isEqual($e.min()))try{const r=await O0(n.localStore);t.compareTo(r)>=0&&await(function(a,u){const d=a.Q_.rt(u);return d.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const _=a.N_.get(m);_&&a.N_.set(m,_.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,m)=>{const _=a.N_.get(f);if(!_)return;a.N_.set(f,_.withResumeToken(un.EMPTY_BYTE_STRING,_.snapshotVersion)),V0(a,f);const E=new vs(_.target,f,m,_.sequenceNumber);Xp(a,E)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){Ae("RemoteStore","Failed to raise snapshot:",r),await Bc(n,r)}}async function Bc(n,e,t){if(!ql(e))throw e;n.L_.add(1),await Ql(n),n.q_.set("Offline"),t||(t=()=>O0(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ae("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await ah(n)}))}function F0(n,e){return e().catch((t=>Bc(n,t,e)))}async function lh(n){const e=ze(n),t=Rs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;hN(e);)try{const s=await GD(e.localStore,r);if(s===null){e.O_.length===0&&t.o_();break}r=s.batchId,dN(e,s)}catch(s){await Bc(e,s)}B0(e)&&j0(e)}function hN(n){return Eo(n)&&n.O_.length<10}function dN(n,e){n.O_.push(e);const t=Rs(n);t.r_()&&t.V_&&t.m_(e.mutations)}function B0(n){return Eo(n)&&!Rs(n).n_()&&n.O_.length>0}function j0(n){Rs(n).start()}async function fN(n){Rs(n).p_()}async function pN(n){const e=Rs(n);for(const t of n.O_)e.m_(t.mutations)}async function mN(n,e,t){const r=n.O_.shift(),s=Wp.from(r,e,t);await F0(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await lh(n)}async function gN(n,e){e&&Rs(n).V_&&await(async function(r,s){if((function(u){return iD(u)&&u!==ee.ABORTED})(s.code)){const a=r.O_.shift();Rs(r).s_(),await F0(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await lh(r)}})(n,e),B0(n)&&j0(n)}async function _v(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),Ae("RemoteStore","RemoteStore received new credentials");const r=Eo(t);t.L_.add(3),await Ql(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await ah(t)}async function yN(n,e){const t=ze(n);e?(t.L_.delete(2),await ah(t)):e||(t.L_.add(2),await Ql(t),t.q_.set("Unknown"))}function ka(n){return n.K_||(n.K_=(function(t,r,s){const a=ze(t);return a.w_(),new nN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Eo:aN.bind(null,n),Ro:lN.bind(null,n),mo:uN.bind(null,n),d_:cN.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),em(n)?Zp(n):n.q_.set("Unknown")):(await n.K_.stop(),U0(n))}))),n.K_}function Rs(n){return n.U_||(n.U_=(function(t,r,s){const a=ze(t);return a.w_(),new rN(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:fN.bind(null,n),mo:gN.bind(null,n),f_:pN.bind(null,n),g_:mN.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await lh(n)):(await n.U_.stop(),n.O_.length>0&&(Ae("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const u=Date.now()+r,d=new tm(e,t,u,s,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nm(n,e){if(Di("AsyncQueue",`${e}: ${n}`),ql(n))return new ye(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ke.comparator(t.key,r.key):(t,r)=>ke.comparator(t.key,r.key),this.keyedMap=ml(),this.sortedSet=new kt(this.comparator)}static emptySet(e){return new fa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new fa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.W_=new kt(ke.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Be():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ta{constructor(e,t,r,s,a,u,d,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,s,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ta(e,t,fa.emptySet(t),u,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class vN{constructor(){this.queries=Ev(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const s=ze(t),a=s.queries;s.queries=Ev(),a.forEach(((u,d)=>{for(const f of d.j_)f.onError(r)}))})(this,new ye(ee.ABORTED,"Firestore shutting down"))}}function Ev(){return new Pa((n=>c0(n)),th)}async function rm(n,e){const t=ze(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new _N,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await t.onListen(s,!0);break;case 1:a.z_=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const d=nm(u,`Initialization of query '${oa(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&sm(t)}async function im(n,e){const t=ze(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const u=a.j_.indexOf(e);u>=0&&(a.j_.splice(u,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function EN(n,e){const t=ze(n);let r=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const d of u.j_)d.X_(s)&&(r=!0);u.z_=s}}r&&sm(t)}function wN(n,e,t){const r=ze(n),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(t);r.queries.delete(e)}function sm(n){n.Y_.forEach((e=>{e.next()}))}var up,wv;(wv=up||(up={})).ea="default",wv.Cache="cache";class om{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ta(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ta.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==up.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){this.key=e}}class z0{constructor(e){this.key=e}}class TN{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ye(),this.mutatedKeys=Ye(),this.Aa=h0(e),this.Ra=new fa(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new vv,s=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,E)=>{const S=s.get(_),P=nh(this.query,E)?E:null,x=!!S&&this.mutatedKeys.has(S.key),M=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let V=!1;S&&P?S.data.isEqual(P.data)?x!==M&&(r.track({type:3,doc:P}),V=!0):this.ga(S,P)||(r.track({type:2,doc:P}),V=!0,(f&&this.Aa(P,f)>0||m&&this.Aa(P,m)<0)&&(d=!0)):!S&&P?(r.track({type:0,doc:P}),V=!0):S&&!P&&(r.track({type:1,doc:S}),V=!0,(f||m)&&(d=!0)),V&&(P?(u=u.add(P),a=M?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),r.track({type:1,doc:_})}return{Ra:u,fa:r,ns:d,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort(((_,E)=>(function(P,x){const M=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be()}};return M(P)-M(x)})(_.type,E.type)||this.Aa(_.doc,E.doc))),this.pa(r),s=s!=null&&s;const d=t&&!s?this.ya():[],f=this.da.size===0&&this.current&&!s?1:0,m=f!==this.Ea;return this.Ea=f,u.length!==0||m?{snapshot:new Ta(this.query,e.Ra,a,u,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ye(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const t=[];return e.forEach((r=>{this.da.has(r)||t.push(new z0(r))})),this.da.forEach((r=>{e.has(r)||t.push(new $0(r))})),t}ba(e){this.Ta=e.Ts,this.da=Ye();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ta.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class IN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class SN{constructor(e){this.key=e,this.va=!1}}class AN{constructor(e,t,r,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new Pa((d=>c0(d)),th),this.Ma=new Map,this.xa=new Set,this.Oa=new kt(ke.comparator),this.Na=new Map,this.La=new Gp,this.Ba={},this.ka=new Map,this.qa=wa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function RN(n,e,t=!0){const r=Q0(n);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await H0(r,e,t,!0),s}async function CN(n,e){const t=Q0(n);await H0(t,e,!0,!1)}async function H0(n,e,t,r){const s=await QD(n.localStore,Zr(e)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await PN(n,e,a,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&M0(n.remoteStore,s),d}async function PN(n,e,t,r,s){n.Ka=(E,S,P)=>(async function(M,V,Q,K){let Y=V.view.ma(Q);Y.ns&&(Y=await mv(M.localStore,V.query,!1).then((({documents:T})=>V.view.ma(T,Y))));const J=K&&K.targetChanges.get(V.targetId),fe=K&&K.targetMismatches.get(V.targetId)!=null,te=V.view.applyChanges(Y,M.isPrimaryClient,J,fe);return Iv(M,V.targetId,te.wa),te.snapshot})(n,E,S,P);const a=await mv(n.localStore,e,!0),u=new TN(e,a.Ts),d=u.ma(a.documents),f=Gl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),m=u.applyChanges(d,n.isPrimaryClient,f);Iv(n,t,m.wa);const _=new IN(e,t,u);return n.Fa.set(e,_),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot}async function kN(n,e,t){const r=ze(n),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter((u=>!th(u,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await lp(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Jp(r.remoteStore,s.targetId),cp(r,s.targetId)})).catch(Wl)):(cp(r,s.targetId),await lp(r.localStore,s.targetId,!0))}async function DN(n,e){const t=ze(n),r=t.Fa.get(e),s=t.Ma.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Jp(t.remoteStore,r.targetId))}async function NN(n,e,t){const r=UN(n);try{const s=await(function(u,d){const f=ze(u),m=Kt.now(),_=d.reduce(((P,x)=>P.add(x.key)),Ye());let E,S;return f.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let x=Ni(),M=Ye();return f.cs.getEntries(P,_).next((V=>{x=V,x.forEach(((Q,K)=>{K.isValidDocument()||(M=M.add(Q))}))})).next((()=>f.localDocuments.getOverlayedDocuments(P,x))).next((V=>{E=V;const Q=[];for(const K of d){const Y=Zk(K,E.get(K.key).overlayedDocument);Y!=null&&Q.push(new ks(K.key,Y,n0(Y.value.mapValue),fr.exists(!0)))}return f.mutationQueue.addMutationBatch(P,m,Q,d)})).next((V=>{S=V;const Q=V.applyToLocalDocumentSet(E,M);return f.documentOverlayCache.saveOverlays(P,V.batchId,Q)}))})).then((()=>({batchId:S.batchId,changes:f0(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(u,d,f){let m=u.Ba[u.currentUser.toKey()];m||(m=new kt(at)),m=m.insert(d,f),u.Ba[u.currentUser.toKey()]=m})(r,s.batchId,t),await Yl(r,s.changes),await lh(r.remoteStore)}catch(s){const a=nm(s,"Failed to persist write");t.reject(a)}}async function W0(n,e){const t=ze(n);try{const r=await qD(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const u=t.Na.get(a);u&&(dt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.va=!0:s.modifiedDocuments.size>0?dt(u.va):s.removedDocuments.size>0&&(dt(u.va),u.va=!1))})),await Yl(t,r,e)}catch(r){await Wl(r)}}function Tv(n,e,t){const r=ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Fa.forEach(((a,u)=>{const d=u.view.Z_(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const f=ze(u);f.onlineState=d;let m=!1;f.queries.forEach(((_,E)=>{for(const S of E.j_)S.Z_(d)&&(m=!0)})),m&&sm(f)})(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bN(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Na.get(e),a=s&&s.key;if(a){let u=new kt(ke.comparator);u=u.insert(a,_n.newNoDocument(a,$e.min()));const d=Ye().add(a),f=new sh($e.min(),new Map,new kt(at),u,d);await W0(r,f),r.Oa=r.Oa.remove(a),r.Na.delete(e),am(r)}else await lp(r.localStore,e,!1).then((()=>cp(r,e,t))).catch(Wl)}async function ON(n,e){const t=ze(n),r=e.batch.batchId;try{const s=await WD(t.localStore,e);K0(t,r,null),q0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Yl(t,s)}catch(s){await Wl(s)}}async function xN(n,e,t){const r=ze(n);try{const s=await(function(u,d){const f=ze(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return f.mutationQueue.lookupMutationBatch(m,d).next((E=>(dt(E!==null),_=E.keys(),f.mutationQueue.removeMutationBatch(m,E)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,_,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>f.localDocuments.getDocuments(m,_)))}))})(r.localStore,e);K0(r,e,t),q0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Yl(r,s)}catch(s){await Wl(s)}}function q0(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function K0(n,e,t){const r=ze(n);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function cp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((r=>{n.La.containsKey(r)||G0(n,r)}))}function G0(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Jp(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),am(n))}function Iv(n,e,t){for(const r of t)r instanceof $0?(n.La.addReference(r.key,e),LN(n,r)):r instanceof z0?(Ae("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||G0(n,r.key)):Be()}function LN(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Ae("SyncEngine","New document in limbo: "+t),n.xa.add(r),am(n))}function am(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new ke(Et.fromString(e)),r=n.qa.next();n.Na.set(r,new SN(t)),n.Oa=n.Oa.insert(t,r),M0(n.remoteStore,new vs(Zr(eh(t.path)),r,"TargetPurposeLimboResolution",Vp.oe))}}async function Yl(n,e,t){const r=ze(n),s=[],a=[],u=[];r.Fa.isEmpty()||(r.Fa.forEach(((d,f)=>{u.push(r.Ka(f,e,t).then((m=>{var _;if((m||t)&&r.isPrimaryClient){const E=m?!m.fromCache:(_=t?.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(m){s.push(m);const E=Yp.Wi(f.targetId,m);a.push(E)}})))})),await Promise.all(u),r.Ca.d_(s),await(async function(f,m){const _=ze(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>oe.forEach(m,(S=>oe.forEach(S.$i,(P=>_.persistence.referenceDelegate.addReference(E,S.targetId,P))).next((()=>oe.forEach(S.Ui,(P=>_.persistence.referenceDelegate.removeReference(E,S.targetId,P)))))))))}catch(E){if(!ql(E))throw E;Ae("LocalStore","Failed to update sequence numbers: "+E)}for(const E of m){const S=E.targetId;if(!E.fromCache){const P=_.os.get(S),x=P.snapshotVersion,M=P.withLastLimboFreeSnapshotVersion(x);_.os=_.os.insert(S,M)}}})(r.localStore,a))}async function MN(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){Ae("SyncEngine","User change. New user:",e.toKey());const r=await b0(t.localStore,e);t.currentUser=e,(function(a,u){a.ka.forEach((d=>{d.forEach((f=>{f.reject(new ye(ee.CANCELLED,u))}))})),a.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Yl(t,r.hs)}}function VN(n,e){const t=ze(n),r=t.Na.get(e);if(r&&r.va)return Ye().add(r.key);{let s=Ye();const a=t.Ma.get(e);if(!a)return s;for(const u of a){const d=t.Fa.get(u);s=s.unionWith(d.view.Va)}return s}}function Q0(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=W0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bN.bind(null,e),e.Ca.d_=EN.bind(null,e.eventManager),e.Ca.$a=wN.bind(null,e.eventManager),e}function UN(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ON.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xN.bind(null,e),e}class jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=oh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return HD(this.persistence,new $D,e.initialUser,this.serializer)}Ga(e){return new FD(Qp.Zr,this.serializer)}Wa(e){return new JD}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jc.provider={build:()=>new jc};class hp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Tv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MN.bind(null,this.syncEngine),await yN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new vN})()}createDatastore(e){const t=oh(e.databaseInfo.databaseId),r=(function(a){return new tN(a)})(e.databaseInfo);return(function(a,u,d,f){return new iN(a,u,d,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,u,d){return new oN(r,s,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Tv(this.syncEngine,t,0)),(function(){return yv.D()?new yv:new XD})())}createSyncEngine(e,t){return(function(s,a,u,d,f,m,_){const E=new AN(s,a,u,d,f,m);return _&&(E.Qa=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=ze(s);Ae("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Ql(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}hp.provider={build:()=>new hp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=yn.UNAUTHENTICATED,this.clientId=Zw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async u=>{Ae("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(Ae("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=nm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function df(n,e){n.asyncQueue.verifyOperationInProgress(),Ae("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await b0(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Sv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await BN(n);Ae("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>_v(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>_v(e.remoteStore,s))),n._onlineComponents=e}async function BN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ae("FirestoreClient","Using user provided OfflineComponentProvider");try{await df(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ee.FAILED_PRECONDITION||s.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;ya("Error using user provided cache. Falling back to memory cache: "+t),await df(n,new jc)}}else Ae("FirestoreClient","Using default OfflineComponentProvider"),await df(n,new jc);return n._offlineComponents}async function Y0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ae("FirestoreClient","Using user provided OnlineComponentProvider"),await Sv(n,n._uninitializedComponentsProvider._online)):(Ae("FirestoreClient","Using default OnlineComponentProvider"),await Sv(n,new hp))),n._onlineComponents}function jN(n){return Y0(n).then((e=>e.syncEngine))}async function $c(n){const e=await Y0(n),t=e.eventManager;return t.onListen=RN.bind(null,e.syncEngine),t.onUnlisten=kN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=CN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=DN.bind(null,e.syncEngine),t}function $N(n,e,t={}){const r=new Ci;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const _=new lm({next:S=>{_.Za(),u.enqueueAndForget((()=>im(a,E)));const P=S.docs.has(d);!P&&S.fromCache?m.reject(new ye(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&f&&f.source==="server"?m.reject(new ye(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),E=new om(eh(d.path),_,{includeMetadataChanges:!0,_a:!0});return rm(a,E)})(await $c(n),n.asyncQueue,e,t,r))),r.promise}function zN(n,e,t={}){const r=new Ci;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,f,m){const _=new lm({next:S=>{_.Za(),u.enqueueAndForget((()=>im(a,E))),S.fromCache&&f.source==="server"?m.reject(new ye(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),E=new om(d,_,{includeMetadataChanges:!0,_a:!0});return rm(a,E)})(await $c(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(n,e,t){if(!t)throw new ye(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function HN(n,e,t,r){if(e===!0&&r===!0)throw new ye(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Rv(n){if(!ke.isDocumentKey(n))throw new ye(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Cv(n){if(ke.isDocumentKey(n))throw new ye(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Be()}function jn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=uh(n);throw new ye(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ye(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=J0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ye(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ye(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ye(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ch{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pv(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new ak;switch(r.type){case"firstParty":return new hk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Av.get(t);r&&(Ae("ComponentProvider","Removing Datastore"),Av.delete(t),r.terminate())})(this),Promise.resolve()}}function WN(n,e,t,r={}){var s;const a=(n=jn(n,ch))._getSettings(),u=`${e}:${t}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),r.mockUserToken){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=yn.MOCK_USER;else{d=KP(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ye(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new yn(m)}n._authCredentials=new lk(new Xw(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ds(this.firestore,e,this._query)}}class vn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}}class Ts extends Ds{constructor(e,t,r){super(e,t,eh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new ke(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function yl(n,e,...t){if(n=ni(n),X0("collection","path",e),n instanceof ch){const r=Et.fromString(e,...t);return Cv(r),new Ts(n,null,r)}{if(!(n instanceof vn||n instanceof Ts))throw new ye(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Et.fromString(e,...t));return Cv(r),new Ts(n.firestore,null,r)}}function Ul(n,e,...t){if(n=ni(n),arguments.length===1&&(e=Zw.newId()),X0("doc","path",e),n instanceof ch){const r=Et.fromString(e,...t);return Rv(r),new vn(n,null,new ke(r))}{if(!(n instanceof vn||n instanceof Ts))throw new ye(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Et.fromString(e,...t));return Rv(r),new vn(n.firestore,n instanceof Ts?n.converter:null,new ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new x0(this,"async_queue_retry"),this.Vu=()=>{const r=hf();r&&Ae("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=hf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=hf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Ci;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ql(e))throw e;Ae("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const s=(function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),d})(r);throw Di("INTERNAL UNHANDLED ERROR: ",s),r})).then((r=>(this.du=!1,r))))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const s=tm.createAndSchedule(this,e,t,r,(a=>this.yu(a)));return this.Tu.push(s),s}fu(){this.Eu&&Be()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Dv(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1})(n,["next","error","complete"])}class bi extends ch{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new kv,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kv(e),this._firestoreClient=void 0,await e}}}function qN(n,e){const t=typeof n=="object"?n:Kc(),r=typeof n=="string"?n:"(default)",s=Bl(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=qP("firestore");a&&WN(s,...a)}return s}function hh(n){if(n._terminated)throw new ye(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||KN(n),n._firestoreClient}function KN(n){var e,t,r;const s=n._freezeSettings(),a=(function(d,f,m,_){return new Sk(d,f,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,J0(_.experimentalLongPollingOptions),_.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new FN(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&(function(d){const f=d?._online.build();return{_offline:d?._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ia(un.fromBase64String(e))}catch(t){throw new ye(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ia(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return at(this._lat,e._lat)||at(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=/^__.*__$/;class QN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ks(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kl(e,this.data,t,this.fieldTransforms)}}class Z0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ks(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be()}}class hm{constructor(e,t,r,s,a,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new hm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return zc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(eT(this.Cu)&&GN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class YN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||oh(e)}Qu(e,t,r,s=!1){return new hm({Cu:e,methodName:t,qu:r,path:an.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ph(n){const e=n._freezeSettings(),t=oh(n._databaseId);return new YN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tT(n,e,t,r,s,a={}){const u=n.Qu(a.merge||a.mergeFields?2:0,e,t,s);fm("Data must be an object, but it was:",u,r);const d=nT(r,u);let f,m;if(a.merge)f=new Zn(u.fieldMask),m=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const S=dp(e,E,t);if(!u.contains(S))throw new ye(ee.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);iT(_,S)||_.push(S)}f=new Zn(_),m=u.fieldTransforms.filter((E=>f.covers(E.field)))}else f=null,m=u.fieldTransforms;return new QN(new Bn(d),f,m)}class mh extends fh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mh}}class dm extends fh{_toFieldTransform(e){return new Qk(e.path,new Ll)}isEqual(e){return e instanceof dm}}function JN(n,e,t,r){const s=n.Qu(1,e,t);fm("Data must be an object, but it was:",s,r);const a=[],u=Bn.empty();vo(r,((f,m)=>{const _=pm(e,f,t);m=ni(m);const E=s.Nu(_);if(m instanceof mh)a.push(_);else{const S=Jl(m,E);S!=null&&(a.push(_),u.set(_,S))}}));const d=new Zn(a);return new Z0(u,d,s.fieldTransforms)}function XN(n,e,t,r,s,a){const u=n.Qu(1,e,t),d=[dp(e,r,t)],f=[s];if(a.length%2!=0)throw new ye(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(dp(e,a[S])),f.push(a[S+1]);const m=[],_=Bn.empty();for(let S=d.length-1;S>=0;--S)if(!iT(m,d[S])){const P=d[S];let x=f[S];x=ni(x);const M=u.Nu(P);if(x instanceof mh)m.push(P);else{const V=Jl(x,M);V!=null&&(m.push(P),_.set(P,V))}}const E=new Zn(m);return new Z0(_,E,u.fieldTransforms)}function ZN(n,e,t,r=!1){return Jl(t,n.Qu(r?4:3,e))}function Jl(n,e){if(rT(n=ni(n)))return fm("Unsupported field value:",e,n),nT(n,e);if(n instanceof fh)return(function(r,s){if(!eT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,s){const a=[];let u=0;for(const d of r){let f=Jl(d,s.Lu(u));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),u++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=ni(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Kt.fromDate(r);return{timestampValue:Fc(s.serializer,a)}}if(r instanceof Kt){const a=new Kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fc(s.serializer,a)}}if(r instanceof um)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ia)return{bytesValue:A0(s.serializer,r._byteString)};if(r instanceof vn){const a=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(a))throw s.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Kp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof cm)return(function(u,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map((f=>{if(typeof f!="number")throw d.Bu("VectorValues must only contain numeric values.");return zp(d.serializer,f)}))}}}}}})(r,s);throw s.Bu(`Unsupported field value: ${uh(r)}`)})(n,e)}function nT(n,e){const t={};return e0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vo(n,((r,s)=>{const a=Jl(s,e.Mu(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function rT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Kt||n instanceof um||n instanceof Ia||n instanceof vn||n instanceof fh||n instanceof cm)}function fm(n,e,t){if(!rT(t)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(t)){const r=uh(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function dp(n,e,t){if((e=ni(e))instanceof dh)return e._internalPath;if(typeof e=="string")return pm(n,e);throw zc("Field path arguments must be of type string or ",n,!1,void 0,t)}const e2=new RegExp("[~\\*/\\[\\]]");function pm(n,e,t){if(e.search(e2)>=0)throw zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dh(...e.split("."))._internalPath}catch{throw zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zc(n,e,t,r,s){const a=r&&!r.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||u)&&(f+=" (found",a&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new ye(ee.INVALID_ARGUMENT,d+n+f)}function iT(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(gh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class t2 extends sT{data(){return super.data()}}function gh(n,e){return typeof e=="string"?pm(n,e):e instanceof dh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mm{}class aT extends mm{}function Nv(n,e,...t){let r=[];e instanceof mm&&r.push(e),r=r.concat(t),(function(a){const u=a.filter((f=>f instanceof gm)).length,d=a.filter((f=>f instanceof yh)).length;if(u>1||u>0&&d>0)throw new ye(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class yh extends aT{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new yh(e,t,r)}_apply(e){const t=this._parse(e);return lT(e._query,t),new Ds(e.firestore,e.converter,np(e._query,t))}_parse(e){const t=ph(e.firestore);return(function(a,u,d,f,m,_,E){let S;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ye(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){xv(E,_);const P=[];for(const x of E)P.push(Ov(f,a,x));S={arrayValue:{values:P}}}else S=Ov(f,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||xv(E,_),S=ZN(d,u,E,_==="in"||_==="not-in");return zt.create(m,_,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function n2(n,e,t){const r=e,s=gh("where",n);return yh._create(s,r,t)}class gm extends mm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gm(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Or.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let u=s;const d=a.getFlattenedFilters();for(const f of d)lT(u,f),u=np(u,f)})(e._query,t),new Ds(e.firestore,e.converter,np(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ym extends aT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ym(e,t)}_apply(e){const t=(function(s,a,u){if(s.startAt!==null)throw new ye(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ye(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xl(a,u)})(e._query,this._field,this._direction);return new Ds(e.firestore,e.converter,(function(s,a){const u=s.explicitOrderBy.concat([a]);return new Ca(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function bv(n,e="asc"){const t=e,r=gh("orderBy",n);return ym._create(r,t)}function Ov(n,e,t){if(typeof(t=ni(t))=="string"){if(t==="")throw new ye(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!u0(e)&&t.indexOf("/")!==-1)throw new ye(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Et.fromString(t));if(!ke.isDocumentKey(r))throw new ye(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return X_(n,new ke(r))}if(t instanceof vn)return X_(n,t._key);throw new ye(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uh(t)}.`)}function xv(n,e){if(!Array.isArray(n)||n.length===0)throw new ye(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lT(n,e){const t=(function(s,a){for(const u of s)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ye(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class r2{convertValue(e,t="none"){switch(mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(po(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Be()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return vo(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((u=>Vt(u.doubleValue)));return new cm(a)}convertGeoPoint(e){return new um(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Fp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Nl(e));default:return null}}convertTimestamp(e){const t=As(e);return new Kt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Et.fromString(e);dt(N0(r));const s=new bl(r.get(1),r.get(3)),a=new ke(r.popFirst(5));return s.isEqual(t)||Di(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cT extends sT{constructor(e,t,r,s,a,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(gh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ac extends cT{data(e={}){return super.data(e)}}class hT{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new _l(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Ac(this._firestore,this._userDataWriter,r.key,r,new _l(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const f=new Ac(s._firestore,s._userDataWriter,d.doc.key,d.doc,new _l(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new Ac(s._firestore,s._userDataWriter,d.doc.key,d.doc,new _l(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,_=-1;return d.type!==0&&(m=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:i2(d.type),doc:f,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function i2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(n){n=jn(n,vn);const e=jn(n.firestore,bi);return $N(hh(e),n._key).then((t=>fT(e,n,t)))}class _m extends r2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ia(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,t)}}function s2(n){n=jn(n,Ds);const e=jn(n.firestore,bi),t=hh(e),r=new _m(e);return oT(n._query),zN(t,n._query).then((s=>new hT(e,r,n,s)))}function o2(n,e,t){n=jn(n,vn);const r=jn(n.firestore,bi),s=uT(n.converter,e);return _h(r,[tT(ph(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,fr.none())])}function Lv(n,e,t,...r){n=jn(n,vn);const s=jn(n.firestore,bi),a=ph(s);let u;return u=typeof(e=ni(e))=="string"||e instanceof dh?XN(a,"updateDoc",n._key,e,t,r):JN(a,"updateDoc",n._key,e),_h(s,[u.toMutation(n._key,fr.exists(!0))])}function a2(n){return _h(jn(n.firestore,bi),[new Hp(n._key,fr.none())])}function Mv(n,e){const t=jn(n.firestore,bi),r=Ul(n),s=uT(n.converter,e);return _h(t,[tT(ph(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,fr.exists(!1))]).then((()=>r))}function Vv(n,...e){var t,r,s;n=ni(n);let a={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||Dv(e[u])||(a=e[u],u++);const d={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Dv(e[u])){const E=e[u];e[u]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[u+1]=(r=E.error)===null||r===void 0?void 0:r.bind(E),e[u+2]=(s=E.complete)===null||s===void 0?void 0:s.bind(E)}let f,m,_;if(n instanceof vn)m=jn(n.firestore,bi),_=eh(n._key.path),f={next:E=>{e[u]&&e[u](fT(m,n,E))},error:e[u+1],complete:e[u+2]};else{const E=jn(n,Ds);m=jn(E.firestore,bi),_=E._query;const S=new _m(m);f={next:P=>{e[u]&&e[u](new hT(m,S,E,P))},error:e[u+1],complete:e[u+2]},oT(n._query)}return(function(S,P,x,M){const V=new lm(M),Q=new om(P,V,x);return S.asyncQueue.enqueueAndForget((async()=>rm(await $c(S),Q))),()=>{V.Za(),S.asyncQueue.enqueueAndForget((async()=>im(await $c(S),Q)))}})(hh(m),_,d,f)}function _h(n,e){return(function(r,s){const a=new Ci;return r.asyncQueue.enqueueAndForget((async()=>NN(await jN(r),s,a))),a.promise})(hh(n),e)}function fT(n,e,t){const r=t.docs.get(e._key),s=new _m(n);return new cT(n,s,e._key,r,new _l(t.hasPendingWrites,t.fromCache),e.converter)}function dc(){return new dm("serverTimestamp")}(function(e,t=!0){(function(s){Ra=s})(_o),Is(new tk("firestore",((r,{instanceIdentifier:s,options:a})=>{const u=r.getProvider("app").getImmediate(),d=new bi(new uk(r.getProvider("auth-internal")),new fk(r.getProvider("app-check-internal")),(function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ye(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bl(m.options.projectId,_)})(u,s),u);return a=Object.assign({useFetchStreams:t},a),d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),dr(K_,"4.7.3",e),dr(K_,"4.7.3","esm2017")})();var Uv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},u2=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},c2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,d=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,_=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|m>>6,P=m&63;f||(P=64,u||(S=64)),r.push(t[_],t[E],t[S],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(l2(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):u2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||m==null||E==null)throw new h2;const S=a<<2|d>>4;if(r.push(S),m!==64){const P=d<<4&240|m>>2;if(r.push(P),E!==64){const x=m<<6&192|E;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};let h2=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};const d2=function(n){try{return c2.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=()=>f2().__FIREBASE_DEFAULTS__,m2=()=>{if(typeof process>"u"||typeof Uv>"u")return;const n=Uv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},g2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&d2(n[1]);return e&&JSON.parse(e)},y2=()=>{try{return p2()||m2()||g2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},_2=n=>{var e,t;return(t=(e=y2())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},v2=n=>{const e=_2(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="FirebaseError";let pT=class mT extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=E2,Object.setPrototypeOf(this,mT.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w2.prototype.create)}},w2=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?T2(a,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new pT(s,d,r)}};function T2(n,e){return n.replace(I2,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const I2=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(n){return n&&n._delegate?n._delegate:n}let S2=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2="type.googleapis.com/google.protobuf.Int64Value",R2="type.googleapis.com/google.protobuf.UInt64Value";function gT(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function fp(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>fp(e));if(typeof n=="function"||typeof n=="object")return gT(n,e=>fp(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Hc(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case A2:case R2:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Hc(e)):typeof n=="function"||typeof n=="object"?gT(n,e=>Hc(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pa extends pT{constructor(e,t,r){super(`${Em}/${e}`,t||""),this.details=r}}function C2(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function P2(n,e){let t=C2(n),r=t,s;try{const a=e&&e.error;if(a){const u=a.status;if(typeof u=="string"){if(!Fv[u])return new pa("internal","internal");t=Fv[u],r=u}const d=a.message;typeof d=="string"&&(r=d),s=a.details,s!==void 0&&(s=Hc(s))}}catch{}return t==="ok"?null:new pa(t,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||t.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="us-central1";function D2(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new pa("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class N2{constructor(e,t,r,s,a=pp,u){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new k2(t,r,s),this.cancelAllRequests=new Promise(d=>{this.deleteService=()=>Promise.resolve(d())});try{const d=new URL(a);this.customDomain=d.origin+(d.pathname==="/"?"":d.pathname),this.region=pp}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function b2(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}function O2(n,e,t){return(r=>L2(n,e,r,{}))}async function x2(n,e,t,r){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}function L2(n,e,t,r){const s=n._url(e);return M2(n,s,t,r)}async function M2(n,e,t,r){t=fp(t);const s={data:t},a={},u=await n.contextProvider.getContext(r.limitedUseAppCheckTokens);u.authToken&&(a.Authorization="Bearer "+u.authToken),u.messagingToken&&(a["Firebase-Instance-ID-Token"]=u.messagingToken),u.appCheckToken!==null&&(a["X-Firebase-AppCheck"]=u.appCheckToken);const d=r.timeout||7e4,f=D2(d),m=await Promise.race([x2(e,s,a,n.fetchImpl),f.promise,n.cancelAllRequests]);if(f.cancel(),!m)throw new pa("cancelled","Firebase Functions instance was deleted.");const _=P2(m.status,m.json);if(_)throw _;if(!m.json)throw new pa("internal","Response is not valid JSON object.");let E=m.json.data;if(typeof E>"u"&&(E=m.json.result),typeof E>"u")throw new pa("internal","Response is missing data field.");return{data:Hc(E)}}const Bv="@firebase/functions",jv="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="auth-internal",U2="app-check-internal",F2="messaging-internal";function B2(n,e){const t=(r,{instanceIdentifier:s})=>{const a=r.getProvider("app").getImmediate(),u=r.getProvider(V2),d=r.getProvider(F2),f=r.getProvider(U2);return new N2(a,u,d,f,s,n)};Is(new S2(Em,t,"PUBLIC").setMultipleInstances(!0)),dr(Bv,jv,e),dr(Bv,jv,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(n=Kc(),e=pp){const r=Bl(vm(n),Em).getImmediate({identifier:e}),s=v2("functions");return s&&$2(r,...s),r}function $2(n,e,t){b2(vm(n),e,t)}function wm(n,e,t){return O2(vm(n),e)}B2(fetch.bind(self));var $v={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},z2=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],d=n[t++],f=((s&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},_T={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,d=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,_=a>>2,E=(a&3)<<4|d>>4;let S=(d&15)<<2|m>>6,P=m&63;f||(P=64,u||(S=64)),r.push(t[_],t[E],t[S],t[P])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):z2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||d==null||m==null||E==null)throw new H2;const S=a<<2|d>>4;if(r.push(S),m!==64){const P=d<<4&240|m>>2;if(r.push(P),E!==64){const x=m<<6&192|E;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class H2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const W2=function(n){const e=yT(n);return _T.encodeByteArray(e,!0)},zv=function(n){return W2(n).replace(/\./g,"")},q2=function(n){try{return _T.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=()=>K2().__FIREBASE_DEFAULTS__,Q2=()=>{if(typeof process>"u"||typeof $v>"u")return;const n=$v.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Y2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&q2(n[1]);return e&&JSON.parse(e)},J2=()=>{try{return G2()||Q2()||Y2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},X2=n=>{var e,t;return(t=(e=J2())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Z2=n=>{const e=X2(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[zv(JSON.stringify(t)),zv(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="FirebaseError";class vh extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=tb,Object.setPrototypeOf(this,vh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nb.prototype.create)}}class nb{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?rb(a,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new vh(s,d,r)}}function rb(n,e){return n.replace(ib,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const ib=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(n){return n&&n._delegate?n._delegate:n}class sb{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="firebasestorage.googleapis.com",ET="storageBucket",ob=120*1e3,ab=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt extends vh{constructor(e,t,r=0){super(ff(e),`Firebase Storage: ${t} (${ff(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Lt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ff(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var xt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(xt||(xt={}));function ff(n){return"storage/"+n}function Tm(){const n="An unknown error occurred, please check the error payload for server response.";return new Lt(xt.UNKNOWN,n)}function lb(n){return new Lt(xt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function ub(n){return new Lt(xt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function cb(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Lt(xt.UNAUTHENTICATED,n)}function hb(){return new Lt(xt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function db(n){return new Lt(xt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function fb(){return new Lt(xt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pb(){return new Lt(xt.CANCELED,"User canceled the upload/download.")}function mb(n){return new Lt(xt.INVALID_URL,"Invalid URL '"+n+"'.")}function gb(n){return new Lt(xt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function yb(){return new Lt(xt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ET+"' property when initializing the app?")}function _b(){return new Lt(xt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function vb(){return new Lt(xt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Eb(n){return new Lt(xt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function mp(n){return new Lt(xt.INVALID_ARGUMENT,n)}function wT(){return new Lt(xt.APP_DELETED,"The Firebase app was deleted.")}function wb(n){return new Lt(xt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Sl(n,e){return new Lt(xt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function hl(n){throw new Lt(xt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=er.makeFromUrl(e,t)}catch{return new er(e,"")}if(r.path==="")return r;throw gb(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(J){J.path.charAt(J.path.length-1)==="/"&&(J.path_=J.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+s+u,"i"),f={bucket:1,path:3};function m(J){J.path_=decodeURIComponent(J.path)}const _="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",P=new RegExp(`^https?://${E}/${_}/b/${s}/o${S}`,"i"),x={bucket:1,path:3},M=t===vT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",Q=new RegExp(`^https?://${M}/${s}/${V}`,"i"),Y=[{regex:d,indices:f,postModify:a},{regex:P,indices:x,postModify:m},{regex:Q,indices:{bucket:1,path:2},postModify:m}];for(let J=0;J<Y.length;J++){const fe=Y[J],te=fe.regex.exec(e);if(te){const T=te[fe.indices.bucket];let A=te[fe.indices.path];A||(A=""),r=new er(T,A),fe.postModify(r);break}}if(r==null)throw mb(e);return r}}class Tb{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(n,e,t){let r=1,s=null,a=null,u=!1,d=0;function f(){return d===2}let m=!1;function _(...V){m||(m=!0,e.apply(null,V))}function E(V){s=setTimeout(()=>{s=null,n(P,f())},V)}function S(){a&&clearTimeout(a)}function P(V,...Q){if(m){S();return}if(V){S(),_.call(null,V,...Q);return}if(f()||u){S(),_.call(null,V,...Q);return}r<64&&(r*=2);let Y;d===1?(d=2,Y=0):Y=(r+Math.random())*1e3,E(Y)}let x=!1;function M(V){x||(x=!0,S(),!m&&(s!==null?(V||(d=2),clearTimeout(s),E(0)):V||(d=1)))}return E(0),a=setTimeout(()=>{u=!0,M(!0)},t),M}function Sb(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(n){return n!==void 0}function Rb(n){return typeof n=="object"&&!Array.isArray(n)}function Im(n){return typeof n=="string"||n instanceof String}function Hv(n){return Sm()&&n instanceof Blob}function Sm(){return typeof Blob<"u"}function Wv(n,e,t,r){if(r<e)throw mp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw mp(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function TT(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var uo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(uo||(uo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,t,r,s,a,u,d,f,m,_,E,S=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=_,this.connectionFactory_=E,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,x)=>{this.resolve_=P,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new fc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const f=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===uo.NO_ERROR,f=a.getStatus();if(!d||Cb(f,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===uo.ABORT;r(!1,new fc(!1,null,_));return}const m=this.successCodes_.indexOf(f)!==-1;r(!0,new fc(m,a))})},t=(r,s)=>{const a=this.resolve_,u=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());Ab(f)?a(f):a()}catch(f){u(f)}else if(d!==null){const f=Tm();f.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,f)):u(f)}else if(s.canceled){const f=this.appDelete_?wT():pb();u(f)}else{const f=fb();u(f)}};this.canceled_?t(!1,new fc(!1,null,!0)):this.backoffId_=Ib(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Sb(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class fc{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function kb(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Db(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Nb(n,e){e&&(n["X-Firebase-GMPID"]=e)}function bb(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Ob(n,e,t,r,s,a,u=!0){const d=TT(n.urlParams),f=n.url+d,m=Object.assign({},n.headers);return Nb(m,e),kb(m,t),Db(m,a),bb(m,r),new Pb(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Lb(...n){const e=xb();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Sm())return new Blob(n);throw new Lt(xt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Mb(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(n){if(typeof atob>"u")throw Eb("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pf{constructor(e,t){this.data=e,this.contentType=t||null}}function Ub(n,e){switch(n){case Jr.RAW:return new pf(IT(e));case Jr.BASE64:case Jr.BASE64URL:return new pf(ST(n,e));case Jr.DATA_URL:return new pf(Bb(e),jb(e))}throw Tm()}function IT(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=r,u=n.charCodeAt(++t);r=65536|(a&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Fb(n){let e;try{e=decodeURIComponent(n)}catch{throw Sl(Jr.DATA_URL,"Malformed data URL.")}return IT(e)}function ST(n,e){switch(n){case Jr.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw Sl(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Jr.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw Sl(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Vb(e)}catch(s){throw s.message.includes("polyfill")?s:Sl(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class AT{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Sl(Jr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=$b(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Bb(n){const e=new AT(n);return e.base64?ST(Jr.BASE64,e.rest):Fb(e.rest)}function jb(n){return new AT(n).contentType}function $b(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,t){let r=0,s="";Hv(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(Hv(this.data_)){const r=this.data_,s=Mb(r,e,t);return s===null?null:new gs(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new gs(r,!0)}}static getBlob(...e){if(Sm()){const t=e.map(r=>r instanceof gs?r.data_:r);return new gs(Lb.apply(null,t))}else{const t=e.map(u=>Im(u)?Ub(Jr.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)s[a++]=u[d]}),new gs(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(n){let e;try{e=JSON.parse(n)}catch{return null}return Rb(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Hb(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function CT(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(n,e){return e}class An{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||Wb}}let pc=null;function qb(n){return!Im(n)||n.length<2?n:CT(n)}function PT(){if(pc)return pc;const n=[];n.push(new An("bucket")),n.push(new An("generation")),n.push(new An("metageneration")),n.push(new An("name","fullPath",!0));function e(a,u){return qb(u)}const t=new An("name");t.xform=e,n.push(t);function r(a,u){return u!==void 0?Number(u):u}const s=new An("size");return s.xform=r,n.push(s),n.push(new An("timeCreated")),n.push(new An("updated")),n.push(new An("md5Hash",null,!0)),n.push(new An("cacheControl",null,!0)),n.push(new An("contentDisposition",null,!0)),n.push(new An("contentEncoding",null,!0)),n.push(new An("contentLanguage",null,!0)),n.push(new An("contentType",null,!0)),n.push(new An("metadata","customMetadata",!0)),pc=n,pc}function Kb(n,e){function t(){const r=n.bucket,s=n.fullPath,a=new er(r,s);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function Gb(n,e,t){const r={};r.type="file";const s=t.length;for(let a=0;a<s;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return Kb(r,n),r}function kT(n,e,t){const r=RT(e);return r===null?null:Gb(n,r,t)}function Qb(n,e,t,r){const s=RT(e);if(s===null||!Im(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(m=>{const _=n.bucket,E=n.fullPath,S="/b/"+u(_)+"/o/"+u(E),P=Eh(S,t,r),x=TT({alt:"media",token:m});return P+x})[0]}function Yb(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class Am{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(n){if(!n)throw Tm()}function Jb(n,e){function t(r,s){const a=kT(n,s,e);return DT(a!==null),a}return t}function Xb(n,e){function t(r,s){const a=kT(n,s,e);return DT(a!==null),Qb(a,s,n.host,n._protocol)}return t}function NT(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=hb():s=cb():t.getStatus()===402?s=ub(n.bucket):t.getStatus()===403?s=db(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function bT(n){const e=NT(n);function t(r,s){let a=e(r,s);return r.getStatus()===404&&(a=lb(n.path)),a.serverResponse=s.serverResponse,a}return t}function Zb(n,e,t){const r=e.fullServerUrl(),s=Eh(r,n.host,n._protocol),a="GET",u=n.maxOperationRetryTime,d=new Am(s,a,Xb(n,t),u);return d.errorHandler=bT(e),d}function eO(n,e){const t=e.fullServerUrl(),r=Eh(t,n.host,n._protocol),s="DELETE",a=n.maxOperationRetryTime;function u(f,m){}const d=new Am(r,s,u,a);return d.successCodes=[200,204],d.errorHandler=bT(e),d}function tO(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function nO(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=tO(null,e)),r}function rO(n,e,t,r,s){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let Y="";for(let J=0;J<2;J++)Y=Y+Math.random().toString().slice(2);return Y}const f=d();u["Content-Type"]="multipart/related; boundary="+f;const m=nO(e,r,s),_=Yb(m,t),E="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+f+`\r
Content-Type: `+m.contentType+`\r
\r
`,S=`\r
--`+f+"--",P=gs.getBlob(E,r,S);if(P===null)throw _b();const x={name:m.fullPath},M=Eh(a,n.host,n._protocol),V="POST",Q=n.maxUploadRetryTime,K=new Am(M,V,Jb(n,t),Q);return K.urlParams=x,K.headers=u,K.body=P.uploadData(),K.errorHandler=NT(e),K}class iO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=uo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=uo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=uo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw hl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw hl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class sO extends iO{initXhr(){this.xhr_.responseType="text"}}function Rm(){return new sO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,t){this._service=e,t instanceof er?this._location=t:this._location=er.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new go(e,t)}get root(){const e=new er(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CT(this._location.path)}get storage(){return this._service}get parent(){const e=zb(this._location.path);if(e===null)return null;const t=new er(this._location.bucket,e);return new go(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw wb(e)}}function oO(n,e,t){n._throwIfRoot("uploadBytes");const r=rO(n.storage,n._location,PT(),new gs(e,!0),t);return n.storage.makeRequestWithTokens(r,Rm).then(s=>({metadata:s,ref:n}))}function aO(n){n._throwIfRoot("getDownloadURL");const e=Zb(n.storage,n._location,PT());return n.storage.makeRequestWithTokens(e,Rm).then(t=>{if(t===null)throw vb();return t})}function lO(n){n._throwIfRoot("deleteObject");const e=eO(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Rm)}function uO(n,e){const t=Hb(n._location.path,e),r=new er(n._location.bucket,t);return new go(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(n){return/^[A-Za-z]+:\/\//.test(n)}function hO(n,e){return new go(n,e)}function OT(n,e){if(n instanceof Cm){const t=n;if(t._bucket==null)throw yb();const r=new go(t,t._bucket);return e!=null?OT(r,e):r}else return e!==void 0?uO(n,e):n}function dO(n,e){if(e&&cO(e)){if(n instanceof Cm)return hO(n,e);throw mp("To use ref(service, url), the first argument must be a Storage instance.")}else return OT(n,e)}function qv(n,e){const t=e?.[ET];return t==null?null:er.makeFromBucketSpec(t,n)}function fO(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:eb(s,n.app.options.projectId))}class Cm{constructor(e,t,r,s,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=vT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ob,this._maxUploadRetryTime=ab,this._requests=new Set,s!=null?this._bucket=er.makeFromBucketSpec(s,this._host):this._bucket=qv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=er.makeFromBucketSpec(this._url,e):this._bucket=qv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Wv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Wv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new go(this,e)}_makeRequest(e,t,r,s,a=!0){if(this._deleted)return new Tb(wT());{const u=Ob(e,this._appId,r,s,t,this._firebaseVersion,a);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const Kv="@firebase/storage",Gv="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="storage";function pO(n,e,t){return n=Xl(n),oO(n,e,t)}function mO(n){return n=Xl(n),aO(n)}function gO(n){return n=Xl(n),lO(n)}function Qv(n,e){return n=Xl(n),dO(n,e)}function yO(n=Kc(),e){n=Xl(n);const r=Bl(n,xT).getImmediate({identifier:e}),s=Z2("storage");return s&&_O(r,...s),r}function _O(n,e,t,r={}){fO(n,e,t,r)}function vO(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Cm(t,r,s,e,_o)}function EO(){Is(new sb(xT,vO,"PUBLIC").setMultipleInstances(!0)),dr(Kv,Gv,""),dr(Kv,Gv,"esm2017")}EO();const wO={apiKey:"AIzaSyD7OpIZiT7DMCdZgpNoI0INK9bpPL2cpj8",authDomain:"registro-animal-mx.firebaseapp.com",projectId:"registro-animal-mx",storageBucket:"registro-animal-mx.appspot.com",messagingSenderId:"520878195963",appId:"1:520878195963:web:cf7d9dc2ff02aa909b1c5e",measurementId:"G-6WSKSJ2B95"},wh=nw(wO),Th=LP(wh),Ei=qN(wh),Yv=yO(wh),Pm=j2(wh,"us-central1"),TO=wm(Pm,"createCheckoutSession"),IO=wm(Pm,"vetChat"),SO=wm(Pm,"dietRecommendations");async function LT(){const n=new wi,{user:e}=await HC(Th,n),t=Ul(Ei,"users",e.uid);(await dT(t)).exists()||await o2(t,{email:e.email||"",displayName:e.displayName||"",plan:"free",createdAt:new Date().toISOString()})}async function AO(){await SC(Th)}function RO(n){return IC(Th,n)}function CO(){return H.jsxs("div",{style:{padding:24,color:"#eee"},children:[H.jsx("h1",{style:{fontSize:36,marginBottom:8},children:"🐾 RegistroAnimalMX"}),H.jsx("p",{children:"Identificación, rescate y salud de mascotas en un solo lugar."}),H.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginTop:24},children:[H.jsxs("div",{style:{background:"#111",padding:16,borderRadius:12},children:[H.jsx("h3",{children:"Registro y QR"}),H.jsx("p",{children:"Genera un QR público para ayudar a que tu mascota vuelva a casa."})]}),H.jsxs("div",{style:{background:"#111",padding:16,borderRadius:12},children:[H.jsx("h3",{children:"Modo perdido"}),H.jsx("p",{children:"Activa alertas y registra reportes de avistamientos."})]}),H.jsxs("div",{style:{background:"#111",padding:16,borderRadius:12},children:[H.jsx("h3",{children:"Directorio de veterinarias"}),H.jsx("p",{children:"Encuentra clínicas cercanas en el mapa."})]}),H.jsxs("div",{style:{background:"#111",padding:16,borderRadius:12},children:[H.jsx("h3",{children:"Funciones Premium"}),H.jsx("p",{children:"Vet IA y recomendaciones de dieta personalizadas."})]})]}),H.jsxs("div",{style:{marginTop:24,display:"flex",gap:12},children:[H.jsx("button",{onClick:LT,children:"Ingresar / Registrarme"}),H.jsx(ds,{to:"/dashboard",children:"Ir al dashboard"})]})]})}function PO(){const[n,e]=Z.useState(null),[t,r]=Z.useState([]),[s,a]=Z.useState(!0),u={id:null,name:"",species:"perro",breed:"",age:"",microchip:"",photoURL:""},[d,f]=Z.useState(u),[m,_]=Z.useState(null),[E,S]=Z.useState(null),[P,x]=Z.useState([]),[M,V]=Z.useState("");Z.useEffect(()=>{const I=Th.onAuthStateChanged(C=>e(C));return()=>I()},[]);const Q=Z.useMemo(()=>n?Nv(yl(Ei,"pets"),n2("ownerId","==",n.uid),bv("createdAt","desc")):null,[n]);Z.useEffect(()=>{if(!Q)return;a(!0);const I=Vv(Q,C=>{const D=C.docs.map(b=>({id:b.id,...b.data()}));r(D),a(!1)});return()=>I()},[Q]);async function K(I){if(!m)return null;const C=Qv(Yv,`pets/${n.uid}/${I}.jpg`);return await pO(C,m),await mO(C)}function Y(){f(u),_(null)}function J(I){f({id:I.id,name:I.name||"",species:I.species||"perro",breed:I.breed||"",age:I.age||"",microchip:I.microchip||"",photoURL:I.photoURL||""}),_(null)}async function fe(I){if(I.preventDefault(),!!n){if(d.id){const C=Ul(Ei,"pets",d.id),D=await K(d.id);await Lv(C,{name:d.name,species:d.species,breed:d.breed,age:d.age,microchip:d.microchip,updatedAt:dc(),...D?{photoURL:D}:{}})}else{const C=await Mv(yl(Ei,"pets"),{ownerId:n.uid,name:d.name,species:d.species,breed:d.breed,age:d.age,microchip:d.microchip,lost:!1,createdAt:dc(),updatedAt:dc()}),D=await K(C.id);D&&await Lv(C,{photoURL:D})}Y()}}async function te(I){if(confirm(`Eliminar a ${I.name}?`)){if(I.photoURL)try{const C=Qv(Yv,`pets/${n.uid}/${I.id}.jpg`);await gO(C)}catch{}await a2(Ul(Ei,"pets",I.id)),E===I.id&&S(null)}}async function T(I){S(I);const C=Nv(yl(Ei,"pets",I,"history"),bv("at","desc"));return Vv(C,D=>{x(D.docs.map(b=>({id:b.id,...b.data()})))})}async function A(I){M.trim()&&(await Mv(yl(Ei,"pets",I,"history"),{text:M.trim(),at:dc(),authorId:n.uid}),V(""))}return n?H.jsxs("div",{style:{padding:24},children:[H.jsx("h1",{children:"Dashboard"}),H.jsxs("section",{className:"card",children:[H.jsx("h2",{children:d.id?"Editar mascota":"Registrar mascota"}),H.jsxs("form",{onSubmit:fe,className:"grid",children:[H.jsxs("label",{children:["Nombre",H.jsx("input",{value:d.name,onChange:I=>f(C=>({...C,name:I.target.value})),required:!0})]}),H.jsxs("label",{children:["Especie",H.jsxs("select",{value:d.species,onChange:I=>f(C=>({...C,species:I.target.value})),children:[H.jsx("option",{value:"perro",children:"Perro"}),H.jsx("option",{value:"gato",children:"Gato"}),H.jsx("option",{value:"otro",children:"Otro"})]})]}),H.jsxs("label",{children:["Raza",H.jsx("input",{value:d.breed,onChange:I=>f(C=>({...C,breed:I.target.value}))})]}),H.jsxs("label",{children:["Edad (años)",H.jsx("input",{type:"number",min:"0",step:"0.1",value:d.age,onChange:I=>f(C=>({...C,age:I.target.value}))})]}),H.jsxs("label",{children:["Microchip",H.jsx("input",{value:d.microchip,onChange:I=>f(C=>({...C,microchip:I.target.value}))})]}),H.jsxs("label",{children:["Foto (opcional)",H.jsx("input",{type:"file",accept:"image/*",onChange:I=>_(I.target.files?.[0]||null)})]}),H.jsxs("div",{className:"row",children:[H.jsx("button",{type:"submit",className:"btn primary",children:d.id?"Guardar cambios":"Crear"}),d.id&&H.jsx("button",{type:"button",className:"btn",onClick:Y,children:"Cancelar"})]})]})]}),H.jsxs("section",{style:{marginTop:32},children:[H.jsx("h2",{children:"Mis mascotas"}),s&&H.jsx("p",{children:"Cargando…"}),!s&&t.length===0&&H.jsx("p",{children:"Aún no tienes mascotas registradas."}),H.jsx("div",{className:"grid-cards",children:t.map(I=>H.jsxs("article",{className:"pet-card",children:[H.jsx("img",{src:I.photoURL||"https://placehold.co/300x200?text=Mascota",alt:I.name}),H.jsx("h3",{children:I.name}),H.jsxs("p",{children:[I.species," ",I.breed?`• ${I.breed}`:""]}),H.jsx("p",{children:I.age?`${I.age} años`:""}),H.jsx("p",{children:I.microchip?`Microchip: ${I.microchip}`:""}),H.jsxs("div",{className:"row",children:[H.jsx("button",{className:"btn",onClick:()=>J(I),children:"Editar"}),H.jsx("button",{className:"btn danger",onClick:()=>te(I),children:"Eliminar"})]}),H.jsx("div",{className:"history",children:E===I.id?H.jsxs(H.Fragment,{children:[H.jsx("h4",{children:"Historial"}),H.jsx("div",{className:"history-list",children:P.map(C=>H.jsxs("div",{className:"history-item",children:[H.jsx("small",{children:C.at?.toDate?C.at.toDate().toLocaleString():"…"}),H.jsx("p",{children:C.text})]},C.id))}),H.jsxs("div",{className:"row",children:[H.jsx("input",{placeholder:"Vacuna, desparasitación, consulta…",value:M,onChange:C=>V(C.target.value)}),H.jsx("button",{className:"btn primary",onClick:()=>A(I.id),children:"Agregar"}),H.jsx("button",{className:"btn",onClick:()=>S(null),children:"Cerrar"})]})]}):H.jsx("button",{className:"btn",onClick:()=>T(I.id),children:"Ver historial"})})]},I.id))})]})]}):H.jsxs("div",{style:{padding:24},children:[H.jsx("h1",{children:"Dashboard"}),H.jsx("p",{children:"Inicia sesión para ver tus mascotas."})]})}function km({children:n}){const[e,t]=Z.useState(void 0);return Z.useEffect(()=>{const r=RO(t);return()=>r()},[]),e===void 0?H.jsx("div",{style:{padding:24},children:"Cargando sesión…"}):e?H.jsxs("div",{children:[H.jsxs("div",{style:{padding:12,fontSize:12},children:["Sesión: ",e.displayName||e.email," · ",H.jsx("button",{onClick:AO,children:"Salir"})]}),n]}):H.jsxs("div",{style:{padding:24},children:[H.jsx("h2",{children:"Necesitas iniciar sesión"}),H.jsx("button",{onClick:LT,children:"Ingresar con Google"})]})}var sa={},mf,Jv;function kO(){return Jv||(Jv=1,mf=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),mf}var gf={},cs={},Xv;function wo(){if(Xv)return cs;Xv=1;let n;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return cs.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},cs.getSymbolTotalCodewords=function(r){return e[r]},cs.getBCHDigit=function(t){let r=0;for(;t!==0;)r++,t>>>=1;return r},cs.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');n=r},cs.isKanjiModeEnabled=function(){return typeof n<"u"},cs.toSJIS=function(r){return n(r)},cs}var yf={},Zv;function Dm(){return Zv||(Zv=1,(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},n.from=function(r,s){if(n.isValid(r))return r;try{return e(r)}catch{return s}}})(yf)),yf}var _f,eE;function DO(){if(eE)return _f;eE=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},_f=n,_f}var vf,tE;function NO(){if(tE)return vf;tE=1;function n(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return n.prototype.set=function(e,t,r,s){const a=e*this.size+t;this.data[a]=r,s&&(this.reservedBit[a]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},vf=n,vf}var Ef={},nE;function bO(){return nE||(nE=1,(function(n){const e=wo().getSymbolSize;n.getRowColCoords=function(r){if(r===1)return[];const s=Math.floor(r/7)+2,a=e(r),u=a===145?26:Math.ceil((a-13)/(2*s-2))*2,d=[a-7];for(let f=1;f<s-1;f++)d[f]=d[f-1]-u;return d.push(6),d.reverse()},n.getPositions=function(r){const s=[],a=n.getRowColCoords(r),u=a.length;for(let d=0;d<u;d++)for(let f=0;f<u;f++)d===0&&f===0||d===0&&f===u-1||d===u-1&&f===0||s.push([a[d],a[f]]);return s}})(Ef)),Ef}var wf={},rE;function OO(){if(rE)return wf;rE=1;const n=wo().getSymbolSize,e=7;return wf.getPositions=function(r){const s=n(r);return[[0,0],[s-e,0],[0,s-e]]},wf}var Tf={},iE;function xO(){return iE||(iE=1,(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},n.from=function(s){return n.isValid(s)?parseInt(s,10):void 0},n.getPenaltyN1=function(s){const a=s.size;let u=0,d=0,f=0,m=null,_=null;for(let E=0;E<a;E++){d=f=0,m=_=null;for(let S=0;S<a;S++){let P=s.get(E,S);P===m?d++:(d>=5&&(u+=e.N1+(d-5)),m=P,d=1),P=s.get(S,E),P===_?f++:(f>=5&&(u+=e.N1+(f-5)),_=P,f=1)}d>=5&&(u+=e.N1+(d-5)),f>=5&&(u+=e.N1+(f-5))}return u},n.getPenaltyN2=function(s){const a=s.size;let u=0;for(let d=0;d<a-1;d++)for(let f=0;f<a-1;f++){const m=s.get(d,f)+s.get(d,f+1)+s.get(d+1,f)+s.get(d+1,f+1);(m===4||m===0)&&u++}return u*e.N2},n.getPenaltyN3=function(s){const a=s.size;let u=0,d=0,f=0;for(let m=0;m<a;m++){d=f=0;for(let _=0;_<a;_++)d=d<<1&2047|s.get(m,_),_>=10&&(d===1488||d===93)&&u++,f=f<<1&2047|s.get(_,m),_>=10&&(f===1488||f===93)&&u++}return u*e.N3},n.getPenaltyN4=function(s){let a=0;const u=s.data.length;for(let f=0;f<u;f++)a+=s.data[f];return Math.abs(Math.ceil(a*100/u/5)-10)*e.N4};function t(r,s,a){switch(r){case n.Patterns.PATTERN000:return(s+a)%2===0;case n.Patterns.PATTERN001:return s%2===0;case n.Patterns.PATTERN010:return a%3===0;case n.Patterns.PATTERN011:return(s+a)%3===0;case n.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(a/3))%2===0;case n.Patterns.PATTERN101:return s*a%2+s*a%3===0;case n.Patterns.PATTERN110:return(s*a%2+s*a%3)%2===0;case n.Patterns.PATTERN111:return(s*a%3+(s+a)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}n.applyMask=function(s,a){const u=a.size;for(let d=0;d<u;d++)for(let f=0;f<u;f++)a.isReserved(f,d)||a.xor(f,d,t(s,f,d))},n.getBestMask=function(s,a){const u=Object.keys(n.Patterns).length;let d=0,f=1/0;for(let m=0;m<u;m++){a(m),n.applyMask(m,s);const _=n.getPenaltyN1(s)+n.getPenaltyN2(s)+n.getPenaltyN3(s)+n.getPenaltyN4(s);n.applyMask(m,s),_<f&&(f=_,d=m)}return d}})(Tf)),Tf}var mc={},sE;function MT(){if(sE)return mc;sE=1;const n=Dm(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return mc.getBlocksCount=function(s,a){switch(a){case n.L:return e[(s-1)*4+0];case n.M:return e[(s-1)*4+1];case n.Q:return e[(s-1)*4+2];case n.H:return e[(s-1)*4+3];default:return}},mc.getTotalCodewordsCount=function(s,a){switch(a){case n.L:return t[(s-1)*4+0];case n.M:return t[(s-1)*4+1];case n.Q:return t[(s-1)*4+2];case n.H:return t[(s-1)*4+3];default:return}},mc}var If={},dl={},oE;function LO(){if(oE)return dl;oE=1;const n=new Uint8Array(512),e=new Uint8Array(256);return(function(){let r=1;for(let s=0;s<255;s++)n[s]=r,e[r]=s,r<<=1,r&256&&(r^=285);for(let s=255;s<512;s++)n[s]=n[s-255]})(),dl.log=function(r){if(r<1)throw new Error("log("+r+")");return e[r]},dl.exp=function(r){return n[r]},dl.mul=function(r,s){return r===0||s===0?0:n[e[r]+e[s]]},dl}var aE;function MO(){return aE||(aE=1,(function(n){const e=LO();n.mul=function(r,s){const a=new Uint8Array(r.length+s.length-1);for(let u=0;u<r.length;u++)for(let d=0;d<s.length;d++)a[u+d]^=e.mul(r[u],s[d]);return a},n.mod=function(r,s){let a=new Uint8Array(r);for(;a.length-s.length>=0;){const u=a[0];for(let f=0;f<s.length;f++)a[f]^=e.mul(s[f],u);let d=0;for(;d<a.length&&a[d]===0;)d++;a=a.slice(d)}return a},n.generateECPolynomial=function(r){let s=new Uint8Array([1]);for(let a=0;a<r;a++)s=n.mul(s,new Uint8Array([1,e.exp(a)]));return s}})(If)),If}var Sf,lE;function VO(){if(lE)return Sf;lE=1;const n=MO();function e(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(r){this.degree=r,this.genPoly=n.generateECPolynomial(this.degree)},e.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(r.length+this.degree);s.set(r);const a=n.mod(s,this.genPoly),u=this.degree-a.length;if(u>0){const d=new Uint8Array(this.degree);return d.set(a,u),d}return a},Sf=e,Sf}var Af={},Rf={},Cf={},uE;function VT(){return uE||(uE=1,Cf.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),Cf}var Yr={},cE;function UT(){if(cE)return Yr;cE=1;const n="[0-9]+",e="[A-Z $%*+\\-./:]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+`)(?:.|[\r
]))+`;Yr.KANJI=new RegExp(t,"g"),Yr.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Yr.BYTE=new RegExp(r,"g"),Yr.NUMERIC=new RegExp(n,"g"),Yr.ALPHANUMERIC=new RegExp(e,"g");const s=new RegExp("^"+t+"$"),a=new RegExp("^"+n+"$"),u=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Yr.testKanji=function(f){return s.test(f)},Yr.testNumeric=function(f){return a.test(f)},Yr.testAlphanumeric=function(f){return u.test(f)},Yr}var hE;function To(){return hE||(hE=1,(function(n){const e=VT(),t=UT();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(a,u){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!e.isValid(u))throw new Error("Invalid version: "+u);return u>=1&&u<10?a.ccBits[0]:u<27?a.ccBits[1]:a.ccBits[2]},n.getBestModeForData=function(a){return t.testNumeric(a)?n.NUMERIC:t.testAlphanumeric(a)?n.ALPHANUMERIC:t.testKanji(a)?n.KANJI:n.BYTE},n.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},n.isValid=function(a){return a&&a.bit&&a.ccBits};function r(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+s)}}n.from=function(a,u){if(n.isValid(a))return a;try{return r(a)}catch{return u}}})(Rf)),Rf}var dE;function UO(){return dE||(dE=1,(function(n){const e=wo(),t=MT(),r=Dm(),s=To(),a=VT(),u=7973,d=e.getBCHDigit(u);function f(S,P,x){for(let M=1;M<=40;M++)if(P<=n.getCapacity(M,x,S))return M}function m(S,P){return s.getCharCountIndicator(S,P)+4}function _(S,P){let x=0;return S.forEach(function(M){const V=m(M.mode,P);x+=V+M.getBitsLength()}),x}function E(S,P){for(let x=1;x<=40;x++)if(_(S,x)<=n.getCapacity(x,P,s.MIXED))return x}n.from=function(P,x){return a.isValid(P)?parseInt(P,10):x},n.getCapacity=function(P,x,M){if(!a.isValid(P))throw new Error("Invalid QR Code version");typeof M>"u"&&(M=s.BYTE);const V=e.getSymbolTotalCodewords(P),Q=t.getTotalCodewordsCount(P,x),K=(V-Q)*8;if(M===s.MIXED)return K;const Y=K-m(M,P);switch(M){case s.NUMERIC:return Math.floor(Y/10*3);case s.ALPHANUMERIC:return Math.floor(Y/11*2);case s.KANJI:return Math.floor(Y/13);case s.BYTE:default:return Math.floor(Y/8)}},n.getBestVersionForData=function(P,x){let M;const V=r.from(x,r.M);if(Array.isArray(P)){if(P.length>1)return E(P,V);if(P.length===0)return 1;M=P[0]}else M=P;return f(M.mode,M.getLength(),V)},n.getEncodedBits=function(P){if(!a.isValid(P)||P<7)throw new Error("Invalid QR Code version");let x=P<<12;for(;e.getBCHDigit(x)-d>=0;)x^=u<<e.getBCHDigit(x)-d;return P<<12|x}})(Af)),Af}var Pf={},fE;function FO(){if(fE)return Pf;fE=1;const n=wo(),e=1335,t=21522,r=n.getBCHDigit(e);return Pf.getEncodedBits=function(a,u){const d=a.bit<<3|u;let f=d<<10;for(;n.getBCHDigit(f)-r>=0;)f^=e<<n.getBCHDigit(f)-r;return(d<<10|f)^t},Pf}var kf={},Df,pE;function BO(){if(pE)return Df;pE=1;const n=To();function e(t){this.mode=n.NUMERIC,this.data=t.toString()}return e.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){let s,a,u;for(s=0;s+3<=this.data.length;s+=3)a=this.data.substr(s,3),u=parseInt(a,10),r.put(u,10);const d=this.data.length-s;d>0&&(a=this.data.substr(s),u=parseInt(a,10),r.put(u,d*3+1))},Df=e,Df}var Nf,mE;function jO(){if(mE)return Nf;mE=1;const n=To(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(r){this.mode=n.ALPHANUMERIC,this.data=r}return t.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(s){let a;for(a=0;a+2<=this.data.length;a+=2){let u=e.indexOf(this.data[a])*45;u+=e.indexOf(this.data[a+1]),s.put(u,11)}this.data.length%2&&s.put(e.indexOf(this.data[a]),6)},Nf=t,Nf}var bf,gE;function $O(){if(gE)return bf;gE=1;const n=To();function e(t){this.mode=n.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}return e.getBitsLength=function(r){return r*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(t){for(let r=0,s=this.data.length;r<s;r++)t.put(this.data[r],8)},bf=e,bf}var Of,yE;function zO(){if(yE)return Of;yE=1;const n=To(),e=wo();function t(r){this.mode=n.KANJI,this.data=r}return t.getBitsLength=function(s){return s*13},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let s;for(s=0;s<this.data.length;s++){let a=e.toSJIS(this.data[s]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),r.put(a,13)}},Of=t,Of}var xf={exports:{}},_E;function HO(){return _E||(_E=1,(function(n){var e={single_source_shortest_paths:function(t,r,s){var a={},u={};u[r]=0;var d=e.PriorityQueue.make();d.push(r,0);for(var f,m,_,E,S,P,x,M,V;!d.empty();){f=d.pop(),m=f.value,E=f.cost,S=t[m]||{};for(_ in S)S.hasOwnProperty(_)&&(P=S[_],x=E+P,M=u[_],V=typeof u[_]>"u",(V||M>x)&&(u[_]=x,d.push(_,x),a[_]=m))}if(typeof s<"u"&&typeof u[s]>"u"){var Q=["Could not find a path from ",r," to ",s,"."].join("");throw new Error(Q)}return a},extract_shortest_path_from_predecessor_list:function(t,r){for(var s=[],a=r;a;)s.push(a),t[a],a=t[a];return s.reverse(),s},find_path:function(t,r,s){var a=e.single_source_shortest_paths(t,r,s);return e.extract_shortest_path_from_predecessor_list(a,s)},PriorityQueue:{make:function(t){var r=e.PriorityQueue,s={},a;t=t||{};for(a in r)r.hasOwnProperty(a)&&(s[a]=r[a]);return s.queue=[],s.sorter=t.sorter||r.default_sorter,s},default_sorter:function(t,r){return t.cost-r.cost},push:function(t,r){var s={value:t,cost:r};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(xf)),xf.exports}var vE;function WO(){return vE||(vE=1,(function(n){const e=To(),t=BO(),r=jO(),s=$O(),a=zO(),u=UT(),d=wo(),f=HO();function m(Q){return unescape(encodeURIComponent(Q)).length}function _(Q,K,Y){const J=[];let fe;for(;(fe=Q.exec(Y))!==null;)J.push({data:fe[0],index:fe.index,mode:K,length:fe[0].length});return J}function E(Q){const K=_(u.NUMERIC,e.NUMERIC,Q),Y=_(u.ALPHANUMERIC,e.ALPHANUMERIC,Q);let J,fe;return d.isKanjiModeEnabled()?(J=_(u.BYTE,e.BYTE,Q),fe=_(u.KANJI,e.KANJI,Q)):(J=_(u.BYTE_KANJI,e.BYTE,Q),fe=[]),K.concat(Y,J,fe).sort(function(T,A){return T.index-A.index}).map(function(T){return{data:T.data,mode:T.mode,length:T.length}})}function S(Q,K){switch(K){case e.NUMERIC:return t.getBitsLength(Q);case e.ALPHANUMERIC:return r.getBitsLength(Q);case e.KANJI:return a.getBitsLength(Q);case e.BYTE:return s.getBitsLength(Q)}}function P(Q){return Q.reduce(function(K,Y){const J=K.length-1>=0?K[K.length-1]:null;return J&&J.mode===Y.mode?(K[K.length-1].data+=Y.data,K):(K.push(Y),K)},[])}function x(Q){const K=[];for(let Y=0;Y<Q.length;Y++){const J=Q[Y];switch(J.mode){case e.NUMERIC:K.push([J,{data:J.data,mode:e.ALPHANUMERIC,length:J.length},{data:J.data,mode:e.BYTE,length:J.length}]);break;case e.ALPHANUMERIC:K.push([J,{data:J.data,mode:e.BYTE,length:J.length}]);break;case e.KANJI:K.push([J,{data:J.data,mode:e.BYTE,length:m(J.data)}]);break;case e.BYTE:K.push([{data:J.data,mode:e.BYTE,length:m(J.data)}])}}return K}function M(Q,K){const Y={},J={start:{}};let fe=["start"];for(let te=0;te<Q.length;te++){const T=Q[te],A=[];for(let I=0;I<T.length;I++){const C=T[I],D=""+te+I;A.push(D),Y[D]={node:C,lastCount:0},J[D]={};for(let b=0;b<fe.length;b++){const k=fe[b];Y[k]&&Y[k].node.mode===C.mode?(J[k][D]=S(Y[k].lastCount+C.length,C.mode)-S(Y[k].lastCount,C.mode),Y[k].lastCount+=C.length):(Y[k]&&(Y[k].lastCount=C.length),J[k][D]=S(C.length,C.mode)+4+e.getCharCountIndicator(C.mode,K))}}fe=A}for(let te=0;te<fe.length;te++)J[fe[te]].end=0;return{map:J,table:Y}}function V(Q,K){let Y;const J=e.getBestModeForData(Q);if(Y=e.from(K,J),Y!==e.BYTE&&Y.bit<J.bit)throw new Error('"'+Q+'" cannot be encoded with mode '+e.toString(Y)+`.
 Suggested mode is: `+e.toString(J));switch(Y===e.KANJI&&!d.isKanjiModeEnabled()&&(Y=e.BYTE),Y){case e.NUMERIC:return new t(Q);case e.ALPHANUMERIC:return new r(Q);case e.KANJI:return new a(Q);case e.BYTE:return new s(Q)}}n.fromArray=function(K){return K.reduce(function(Y,J){return typeof J=="string"?Y.push(V(J,null)):J.data&&Y.push(V(J.data,J.mode)),Y},[])},n.fromString=function(K,Y){const J=E(K,d.isKanjiModeEnabled()),fe=x(J),te=M(fe,Y),T=f.find_path(te.map,"start","end"),A=[];for(let I=1;I<T.length-1;I++)A.push(te.table[T[I]].node);return n.fromArray(P(A))},n.rawSplit=function(K){return n.fromArray(E(K,d.isKanjiModeEnabled()))}})(kf)),kf}var EE;function qO(){if(EE)return gf;EE=1;const n=wo(),e=Dm(),t=DO(),r=NO(),s=bO(),a=OO(),u=xO(),d=MT(),f=VO(),m=UO(),_=FO(),E=To(),S=WO();function P(te,T){const A=te.size,I=a.getPositions(T);for(let C=0;C<I.length;C++){const D=I[C][0],b=I[C][1];for(let k=-1;k<=7;k++)if(!(D+k<=-1||A<=D+k))for(let de=-1;de<=7;de++)b+de<=-1||A<=b+de||(k>=0&&k<=6&&(de===0||de===6)||de>=0&&de<=6&&(k===0||k===6)||k>=2&&k<=4&&de>=2&&de<=4?te.set(D+k,b+de,!0,!0):te.set(D+k,b+de,!1,!0))}}function x(te){const T=te.size;for(let A=8;A<T-8;A++){const I=A%2===0;te.set(A,6,I,!0),te.set(6,A,I,!0)}}function M(te,T){const A=s.getPositions(T);for(let I=0;I<A.length;I++){const C=A[I][0],D=A[I][1];for(let b=-2;b<=2;b++)for(let k=-2;k<=2;k++)b===-2||b===2||k===-2||k===2||b===0&&k===0?te.set(C+b,D+k,!0,!0):te.set(C+b,D+k,!1,!0)}}function V(te,T){const A=te.size,I=m.getEncodedBits(T);let C,D,b;for(let k=0;k<18;k++)C=Math.floor(k/3),D=k%3+A-8-3,b=(I>>k&1)===1,te.set(C,D,b,!0),te.set(D,C,b,!0)}function Q(te,T,A){const I=te.size,C=_.getEncodedBits(T,A);let D,b;for(D=0;D<15;D++)b=(C>>D&1)===1,D<6?te.set(D,8,b,!0):D<8?te.set(D+1,8,b,!0):te.set(I-15+D,8,b,!0),D<8?te.set(8,I-D-1,b,!0):D<9?te.set(8,15-D-1+1,b,!0):te.set(8,15-D-1,b,!0);te.set(I-8,8,1,!0)}function K(te,T){const A=te.size;let I=-1,C=A-1,D=7,b=0;for(let k=A-1;k>0;k-=2)for(k===6&&k--;;){for(let de=0;de<2;de++)if(!te.isReserved(C,k-de)){let Je=!1;b<T.length&&(Je=(T[b]>>>D&1)===1),te.set(C,k-de,Je),D--,D===-1&&(b++,D=7)}if(C+=I,C<0||A<=C){C-=I,I=-I;break}}}function Y(te,T,A){const I=new t;A.forEach(function(de){I.put(de.mode.bit,4),I.put(de.getLength(),E.getCharCountIndicator(de.mode,te)),de.write(I)});const C=n.getSymbolTotalCodewords(te),D=d.getTotalCodewordsCount(te,T),b=(C-D)*8;for(I.getLengthInBits()+4<=b&&I.put(0,4);I.getLengthInBits()%8!==0;)I.putBit(0);const k=(b-I.getLengthInBits())/8;for(let de=0;de<k;de++)I.put(de%2?17:236,8);return J(I,te,T)}function J(te,T,A){const I=n.getSymbolTotalCodewords(T),C=d.getTotalCodewordsCount(T,A),D=I-C,b=d.getBlocksCount(T,A),k=I%b,de=b-k,Je=Math.floor(I/b),ft=Math.floor(D/b),Xe=ft+1,se=Je-ft,Re=new f(se);let he=0;const F=new Array(b),X=new Array(b);let _e=0;const Le=new Uint8Array(te.buffer);for(let Ze=0;Ze<b;Ze++){const wt=Ze<de?ft:Xe;F[Ze]=Le.slice(he,he+wt),X[Ze]=Re.encode(F[Ze]),he+=wt,_e=Math.max(_e,wt)}const Pe=new Uint8Array(I);let je=0,Oe,Ve;for(Oe=0;Oe<_e;Oe++)for(Ve=0;Ve<b;Ve++)Oe<F[Ve].length&&(Pe[je++]=F[Ve][Oe]);for(Oe=0;Oe<se;Oe++)for(Ve=0;Ve<b;Ve++)Pe[je++]=X[Ve][Oe];return Pe}function fe(te,T,A,I){let C;if(Array.isArray(te))C=S.fromArray(te);else if(typeof te=="string"){let Je=T;if(!Je){const ft=S.rawSplit(te);Je=m.getBestVersionForData(ft,A)}C=S.fromString(te,Je||40)}else throw new Error("Invalid data");const D=m.getBestVersionForData(C,A);if(!D)throw new Error("The amount of data is too big to be stored in a QR Code");if(!T)T=D;else if(T<D)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+D+`.
`);const b=Y(T,A,C),k=n.getSymbolSize(T),de=new r(k);return P(de,T),x(de),M(de,T),Q(de,A,0),T>=7&&V(de,T),K(de,b),isNaN(I)&&(I=u.getBestMask(de,Q.bind(null,de,A))),u.applyMask(I,de),Q(de,A,I),{modules:de,version:T,errorCorrectionLevel:A,maskPattern:I,segments:C}}return gf.create=function(T,A){if(typeof T>"u"||T==="")throw new Error("No input text");let I=e.M,C,D;return typeof A<"u"&&(I=e.from(A.errorCorrectionLevel,e.M),C=m.from(A.version),D=u.from(A.maskPattern),A.toSJISFunc&&n.setToSJISFunction(A.toSJISFunc)),fe(T,C,I,D)},gf}var Lf={},Mf={},wE;function FT(){return wE||(wE=1,(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let r=t.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+t);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(a){return[a,a]}))),r.length===6&&r.push("F","F");const s=parseInt(r.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+r.slice(0,6).join("")}}n.getOptions=function(r){r||(r={}),r.color||(r.color={});const s=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,a=r.width&&r.width>=21?r.width:void 0,u=r.scale||4;return{width:a,scale:a?4:u,margin:s,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},n.getScale=function(r,s){return s.width&&s.width>=r+s.margin*2?s.width/(r+s.margin*2):s.scale},n.getImageWidth=function(r,s){const a=n.getScale(r,s);return Math.floor((r+s.margin*2)*a)},n.qrToImageData=function(r,s,a){const u=s.modules.size,d=s.modules.data,f=n.getScale(u,a),m=Math.floor((u+a.margin*2)*f),_=a.margin*f,E=[a.color.light,a.color.dark];for(let S=0;S<m;S++)for(let P=0;P<m;P++){let x=(S*m+P)*4,M=a.color.light;if(S>=_&&P>=_&&S<m-_&&P<m-_){const V=Math.floor((S-_)/f),Q=Math.floor((P-_)/f);M=E[d[V*u+Q]?1:0]}r[x++]=M.r,r[x++]=M.g,r[x++]=M.b,r[x]=M.a}}})(Mf)),Mf}var TE;function KO(){return TE||(TE=1,(function(n){const e=FT();function t(s,a,u){s.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=u,a.width=u,a.style.height=u+"px",a.style.width=u+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(a,u,d){let f=d,m=u;typeof f>"u"&&(!u||!u.getContext)&&(f=u,u=void 0),u||(m=r()),f=e.getOptions(f);const _=e.getImageWidth(a.modules.size,f),E=m.getContext("2d"),S=E.createImageData(_,_);return e.qrToImageData(S.data,a,f),t(E,m,_),E.putImageData(S,0,0),m},n.renderToDataURL=function(a,u,d){let f=d;typeof f>"u"&&(!u||!u.getContext)&&(f=u,u=void 0),f||(f={});const m=n.render(a,u,f),_=f.type||"image/png",E=f.rendererOpts||{};return m.toDataURL(_,E.quality)}})(Lf)),Lf}var Vf={},IE;function GO(){if(IE)return Vf;IE=1;const n=FT();function e(s,a){const u=s.a/255,d=a+'="'+s.hex+'"';return u<1?d+" "+a+'-opacity="'+u.toFixed(2).slice(1)+'"':d}function t(s,a,u){let d=s+a;return typeof u<"u"&&(d+=" "+u),d}function r(s,a,u){let d="",f=0,m=!1,_=0;for(let E=0;E<s.length;E++){const S=Math.floor(E%a),P=Math.floor(E/a);!S&&!m&&(m=!0),s[E]?(_++,E>0&&S>0&&s[E-1]||(d+=m?t("M",S+u,.5+P+u):t("m",f,0),f=0,m=!1),S+1<a&&s[E+1]||(d+=t("h",_),_=0)):f++}return d}return Vf.render=function(a,u,d){const f=n.getOptions(u),m=a.modules.size,_=a.modules.data,E=m+f.margin*2,S=f.color.light.a?"<path "+e(f.color.light,"fill")+' d="M0 0h'+E+"v"+E+'H0z"/>':"",P="<path "+e(f.color.dark,"stroke")+' d="'+r(_,m,f.margin)+'"/>',x='viewBox="0 0 '+E+" "+E+'"',V='<svg xmlns="http://www.w3.org/2000/svg" '+(f.width?'width="'+f.width+'" height="'+f.width+'" ':"")+x+' shape-rendering="crispEdges">'+S+P+`</svg>
`;return typeof d=="function"&&d(null,V),V},Vf}var SE;function QO(){if(SE)return sa;SE=1;const n=kO(),e=qO(),t=KO(),r=GO();function s(a,u,d,f,m){const _=[].slice.call(arguments,1),E=_.length,S=typeof _[E-1]=="function";if(!S&&!n())throw new Error("Callback required as last argument");if(S){if(E<2)throw new Error("Too few arguments provided");E===2?(m=d,d=u,u=f=void 0):E===3&&(u.getContext&&typeof m>"u"?(m=f,f=void 0):(m=f,f=d,d=u,u=void 0))}else{if(E<1)throw new Error("Too few arguments provided");return E===1?(d=u,u=f=void 0):E===2&&!u.getContext&&(f=d,d=u,u=void 0),new Promise(function(P,x){try{const M=e.create(d,f);P(a(M,u,f))}catch(M){x(M)}})}try{const P=e.create(d,f);m(null,a(P,u,f))}catch(P){m(P)}}return sa.create=e.create,sa.toCanvas=s.bind(null,t.render),sa.toDataURL=s.bind(null,t.renderToDataURL),sa.toString=s.bind(null,function(a,u,d){return r.render(a,d)}),sa}QO();const AE=window.location.origin;async function YO(n){const e=`${AE}/success`,t=`${AE}/cancel`,{data:r}=await TO({priceId:n,successUrl:e,cancelUrl:t});return r?.url&&(window.location.href=r.url),r}async function JO(n){const{data:e}=await IO({message:n});return e}async function XO({species:n,breed:e,age:t}){const{data:r}=await SO({species:n,breed:e,age:t});return r}const ZO=void 0;function ex(){return H.jsx(km,{children:H.jsxs("div",{style:{padding:24,color:"#eee"},children:[H.jsx("h1",{children:"Premium"}),H.jsx("p",{children:"Desbloquea Vet IA y recomendaciones de dieta."}),H.jsx("button",{onClick:()=>YO(ZO),children:"Pagar suscripción Premium"})]})})}function tx(){return H.jsx(km,{children:H.jsx(nx,{})})}function nx(){const[n,e]=Z.useState(""),[t,r]=Z.useState(""),[s,a]=Z.useState(!1),[u,d]=Z.useState("");async function f(){a(!0),d(""),r("");try{const m=await JO(n);r(m.reply||"(sin respuesta)")}catch{d("Necesitas Premium para usar Vet IA.")}finally{a(!1)}}return H.jsxs("div",{style:{padding:24,color:"#eee"},children:[H.jsx("h1",{children:"Vet IA"}),H.jsx("textarea",{rows:"4",value:n,onChange:m=>e(m.target.value),placeholder:"Describe el problema…",style:{width:"100%",maxWidth:600}}),H.jsx("div",{style:{marginTop:8},children:H.jsx("button",{onClick:f,disabled:s,children:s?"Consultando…":"Preguntar"})}),u&&H.jsx("div",{style:{marginTop:12,color:"#f77"},children:u}),t&&H.jsx("div",{style:{marginTop:12,whiteSpace:"pre-wrap"},children:t})]})}function rx(){return H.jsx(km,{children:H.jsx(ix,{})})}function ix(){const[n,e]=Z.useState("perro"),[t,r]=Z.useState(""),[s,a]=Z.useState("3"),[u,d]=Z.useState(""),[f,m]=Z.useState("");async function _(){d(""),m("");try{const E=await XO({species:n,breed:t,age:s});d(E.recommendations||"")}catch{m("Necesitas Premium para esta función.")}}return H.jsxs("div",{style:{padding:24,color:"#eee"},children:[H.jsx("h1",{children:"Dieta"}),H.jsxs("div",{style:{display:"grid",gap:8,maxWidth:480},children:[H.jsxs("select",{value:n,onChange:E=>e(E.target.value),children:[H.jsx("option",{value:"perro",children:"Perro"}),H.jsx("option",{value:"gato",children:"Gato"})]}),H.jsx("input",{placeholder:"Raza (opcional)",value:t,onChange:E=>r(E.target.value)}),H.jsx("input",{type:"number",placeholder:"Edad (años)",value:s,onChange:E=>a(E.target.value)}),H.jsx("button",{onClick:_,children:"Generar recomendaciones"})]}),f&&H.jsx("div",{style:{marginTop:12,color:"#f77"},children:f}),u&&H.jsx("pre",{style:{whiteSpace:"pre-wrap",marginTop:12},children:u})]})}function sx(){return H.jsxs("div",{style:{padding:24,color:"#eee"},children:[H.jsx("h1",{children:"Modo perdido"}),H.jsx("p",{children:"Desde tu Dashboard puedes activar “Marcar como perdido” en cada mascota. El QR seguirá apuntando a esta ficha pública."})]})}function ox(){const{petId:n}=nA(),[e,t]=Z.useState(null),[r,s]=Z.useState(!0);return Z.useEffect(()=>{(async()=>{const a=await dT(Ul(Ei,"pets",n));a.exists()&&t({id:a.id,...a.data()}),s(!1)})()},[n]),r?H.jsx("div",{style:{padding:24},children:"Cargando…"}):e?H.jsxs("div",{style:{padding:24,color:"#eee"},children:[H.jsx("h1",{children:e.name}),e.photoUrl&&H.jsx("img",{src:e.photoUrl,alt:"",style:{width:240,borderRadius:12}}),H.jsxs("p",{children:["Especie: ",e.species]}),H.jsxs("p",{children:["Estado: ",e.lost?"🚨 Reportada como perdida":"✔️ En casa"]}),H.jsxs("p",{children:["Si encontraste a ",e.name,", por favor contacta al dueño mediante la plataforma."]}),H.jsx("p",{style:{marginTop:16},children:H.jsx(ds,{to:"/",children:"Ir a RegistroAnimalMX"})})]}):H.jsx("div",{style:{padding:24},children:"Mascota no encontrada."})}function ax(n,e,t,r){function s(a){return a instanceof t?a:new t(function(u){u(a)})}return new(t||(t=Promise))(function(a,u){function d(_){try{m(r.next(_))}catch(E){u(E)}}function f(_){try{m(r.throw(_))}catch(E){u(E)}}function m(_){_.done?a(_.value):s(_.value).then(d,f)}m((r=r.apply(n,[])).next())})}function lx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Uf,RE;function ux(){return RE||(RE=1,Uf=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,s,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(!n(e[s],t[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[s]))return!1;for(s=r;s--!==0;){var u=a[s];if(!n(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}),Uf}var cx=ux(),hx=lx(cx);const CE="__googleMapsScriptId";var ua;(function(n){n[n.INITIALIZED=0]="INITIALIZED",n[n.LOADING=1]="LOADING",n[n.SUCCESS=2]="SUCCESS",n[n.FAILURE=3]="FAILURE"})(ua||(ua={}));class ys{constructor({apiKey:e,authReferrerPolicy:t,channel:r,client:s,id:a=CE,language:u,libraries:d=[],mapIds:f,nonce:m,region:_,retries:E=3,url:S="https://maps.googleapis.com/maps/api/js",version:P}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=r,this.client=s,this.id=a||CE,this.language=u,this.libraries=d,this.mapIds=f,this.nonce=m,this.region=_,this.retries=E,this.url=S,this.version=P,ys.instance){if(!hx(this.options,ys.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(ys.instance.options)}`);return ys.instance}ys.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?ua.FAILURE:this.done?ua.SUCCESS:this.loading?ua.LOADING:ua.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(r=>{r?t(r.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id)){this.callback();return}const r={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(r).forEach(a=>!r[a]&&delete r[a]),!((t=(e=window?.google)===null||e===void 0?void 0:e.maps)===null||t===void 0)&&t.importLibrary||(a=>{let u,d,f,m="The Google Maps JavaScript API",_="google",E="importLibrary",S="__ib__",P=document,x=window;x=x[_]||(x[_]={});const M=x.maps||(x.maps={}),V=new Set,Q=new URLSearchParams,K=()=>u||(u=new Promise((Y,J)=>ax(this,void 0,void 0,function*(){var fe;yield d=P.createElement("script"),d.id=this.id,Q.set("libraries",[...V]+"");for(f in a)Q.set(f.replace(/[A-Z]/g,te=>"_"+te[0].toLowerCase()),a[f]);Q.set("callback",_+".maps."+S),d.src=this.url+"?"+Q,M[S]=Y,d.onerror=()=>u=J(Error(m+" could not load.")),d.nonce=this.nonce||((fe=P.querySelector("script[nonce]"))===null||fe===void 0?void 0:fe.nonce)||"",P.head.append(d)})));M[E]?console.warn(m+" only loads once. Ignoring:",a):M[E]=(Y,...J)=>V.add(Y)&&K().then(()=>M[E](Y,...J))})(r);const s=this.libraries.map(a=>this.importLibrary(a));s.length||s.push(this.importLibrary("core")),Promise.all(s).then(()=>this.callback(),a=>{const u=new ErrorEvent("error",{error:a});this.loadErrorCallback(u)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const t=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${t} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}function dx(){const[n,e]=Z.useState([]),[t,r]=Z.useState(null);return Z.useEffect(()=>{(async()=>{const a=(await s2(yl(Ei,"clinics"))).docs.map(E=>({id:E.id,...E.data()}));e(a);const u=new ys({apiKey:void 0,version:"weekly"}),{Map:d}=await u.importLibrary("maps"),f=document.getElementById("map"),m={lat:19.4326,lng:-99.1332},_=new d(f,{center:m,zoom:10});r(_)})()},[]),Z.useEffect(()=>{t&&(async()=>{const{AdvancedMarkerElement:s}=await new ys({apiKey:void 0,version:"weekly"}).importLibrary("marker");n.forEach(a=>{typeof a.lat=="number"&&typeof a.lng=="number"&&new s({map:t,position:{lat:a.lat,lng:a.lng},title:a.name||"Clínica"})})})()},[t,n]),H.jsxs("div",{style:{padding:24,color:"#eee"},children:[H.jsx("h1",{children:"Directorio de veterinarias"}),H.jsx("div",{id:"map",style:{width:"100%",height:400,borderRadius:12,background:"#111",margin:"12px 0"}}),H.jsxs("ul",{children:[n.map(s=>H.jsxs("li",{style:{marginBottom:8},children:[H.jsx("strong",{children:s.name})," · ",s.phone||""," · ",s.address||""]},s.id)),n.length===0&&H.jsx("li",{children:"No hay clínicas cargadas aún."})]})]})}function fx(){return H.jsxs("div",{style:{padding:24,color:"#eee"},children:[H.jsx("h1",{children:"¡Pago completado!"}),H.jsx("p",{children:"Tu plan se activará en breve."})]})}function px(){return H.jsxs("div",{style:{padding:24,color:"#eee"},children:[H.jsx("h1",{children:"Pago cancelado"}),H.jsx("p",{children:"Intento cancelado por el usuario."})]})}const mx=SA([{element:H.jsx(FA,{}),children:[{path:"/",element:H.jsx(CO,{})},{path:"/dashboard",element:H.jsx(PO,{})},{path:"/premium",element:H.jsx(ex,{})},{path:"/success",element:H.jsx(fx,{})},{path:"/cancel",element:H.jsx(px,{})},{path:"/vet",element:H.jsx(tx,{})},{path:"/diet",element:H.jsx(rx,{})},{path:"/lost",element:H.jsx(sx,{})},{path:"/p/:petId",element:H.jsx(ox,{})},{path:"/vets",element:H.jsx(dx,{})}]}]);XI.createRoot(document.getElementById("root")).render(H.jsx(OA,{router:mx}));
